bytesun | 2021-11-08 16:08:46 UTC | #1

Just realized the principal id is different when I login my local development system, staging system and release system( 3 app deployments).  I am using principal id as user id in system, it will be a problem if I change the deployment, the existed user can't retrieve their data.

Is it possible to keep the same principal for sign with the same anchor?  or suggestions?

-------------------------

hassen.saidi | 2021-11-08 17:26:28 UTC | #2

The principal ID is generated by a deterministic algorithm from the public key of the current user. Your systems all have different "identities" (pub/private key pairs). You won't be able to have a single principal ID for a single anchor because you will login into different apps using a different delegate key for each app on the IC.

-------------------------

bytesun | 2021-11-08 18:59:28 UTC | #3

I see, which means I have to migrate user data if the deploy is changed.  Thanks!

-------------------------

hassen.saidi | 2021-11-09 04:46:13 UTC | #4

If the deploy changes, your app will have a new canister ID and will be considered a completely new app. Therefore, principal IDs are going to be different, and you will need to migrate users, as well as match new IDs with old IDs.

-------------------------

saikatdas0790 | 2021-11-10 09:07:45 UTC | #5

![Principals and Canister IDs](https://smartcontracts.org/docs/developers-guide/_images/principal-identities.svg)

This diagram summarizes it really well. The identifier for the user remains the same. However, the canister identifier changes for every deployment and hence the principal changes between deployments

More context available here:
https://smartcontracts.org/docs/developers-guide/tutorials/access-control.html

-------------------------

