diegop | 2022-02-03 18:43:25 UTC | #1

## Wrapped Bitcoin Ledger on the Internet Computer

## Summary

While the Bitcoin integration enables canisters to hold and transfer Bitcoin, transactions are still slow and costly because they happen on the Bitcoin blockchain. In order to enable fast and cheap transactions, the goal is to develop a wrapped Bitcoin ledger running on the Internet Computer.

## Status

The feature is currently being scoped.

## What you can do to help

* Ask questions
* Propose ideas

## Key people involved

Manu Drijvers ([@Manu](https://forum.dfinity.org/u/manu)), Mario Pastorelli ([@mariop](https://forum.dfinity.org/u/mariop)), Thomas Locher ([@THLO](https://forum.dfinity.org/u/thlo))

## Timelines

The tentative plan is to release the wrapped Bitcoin ledger shortly after the launch of the Bitcoin integration on mainnet at the end of Q1, 2022.

## Relevant Background

1. [Bitcoin integration](https://forum.dfinity.org/t/direct-integration-with-bitcoin/6147)
2. Youtube Description: [Inside DFINITY 21/9/2: Integrating the Internet Computer and Bitcoin Networks - YouTube 118](https://www.youtube.com/watch?v=TtVo3krjARI&t=1s)
3. Scope of project

The scope of this feature is to provide a new ledger canister that provides wrapped Bitcoin functionality. Specifically, this ledger will make it possible to (1) trade real Bitcoin for wrapped Bitcoin directly on the Internet Computer, (2) transfer wrapped Bitcoin cheaply at the speed of the Internet Computer, and (3) convert wrapped Bitcoin back to real Bitcoin.

A crucial advantage compared to existing wrapped Bitcoin solutions is that no trusted third parties are involved because the ledger offers the required custodial service itself. Moreover, given the high efficiency of the Internet Computer, transfers will be fast and only incur a minimal fee.

It is important to note that this will be but one such ledger canister and the community is welcome to provide their own ledgers with similar or different design goals.

The reason for developing such a ledger ourselves is twofold. First, we would like to have this functionality in place as soon as possible so that developers can start building (wrapped) Bitcoin smart contracts shortly after the Bitcoin integration is launched. Second, we would like to offer our ledger as a well-tested sample project to showcase the power of the Bitcoin integration, which can be used as inspiration for the development of other ledger canisters.

-------------------------

inBlockit | 2022-02-03 20:09:53 UTC | #2

I was thinking about the direct integration of IC with other networks recently. What I think at the moment is that we certainly need a canister that will wrap original tokens, so we can use IC's full potential - DeFi in particular. But wouldn't we introduce middlemen if we allow developers to build their own canisters - which in fact will build bridges? I think that new exploit opportunities will arise.

What I think is we should create a DAO controlled, open sourced canister that will work in fact as a bridge, but nicely and thoroughly built and maintained by the IC community. This approach would be very limitative, but trustworthy.

On the other hand I see lots of use cases and potential that can be unleashed if we all start building our solutions.

-------------------------

lastmjs | 2022-02-03 20:32:09 UTC | #3

I assume this ledger will follow the standard of the SNS ledger standard being created?

-------------------------

ajismyid | 2022-02-04 02:22:01 UTC | #4

My suggestion is, if ICP want to introduce 'wrapped' asset technology that is "different" than current classical wrapped asset (that use bridge / validator / trusted third party), better to use new keyword to avoid confusion to the people. For ex. enclosed-bitcoin, enveloped-bitcoin, capsulated-bitcoin , etc.

-------------------------

ComputerInternetMan | 2022-02-04 03:53:03 UTC | #5

Hmmmm … ‘teleport’ kinda works both as a noun ( center of interconnection ) and a verb.

-------------------------

Manu | 2022-02-04 09:19:53 UTC | #6

[quote="inBlockit, post:2, topic:10681"]
What I think is we should create a DAO controlled, open sourced canister that will work in fact as a bridge, but nicely and thoroughly built and maintained by the IC community. This approach would be very limitative, but trustworthy.
[/quote]

This is exactly what we have in mind. So instead of needing to trust some group of entities to do the "wrapping", this open source smart contract would hold real BTC (by using the direct BTC integration) and issue some "wrapped" BTC, which will be a token that lives on the IC and can therefore be traded very quickly.

-------------------------

Manu | 2022-02-04 09:21:29 UTC | #7

> I assume this ledger will follow the standard of the SNS ledger standard being created?

@lastmjs that currently looks like the most logical option to me, wdyt?

> My suggestion is, if ICP want to introduce ‘wrapped’ asset technology that is “different” than current classical wrapped asset (that use bridge / validator / trusted third party), better to use new keyword to avoid confusion to the people. For ex. enclosed-bitcoin, enveloped-bitcoin, capsulated-bitcoin , etc.

@ajismyid Great suggestion, I agree that the term "wrapped" is a bit loaded by now and we should make the difference clear. Thanks!

-------------------------

lastmjs | 2022-02-04 13:47:58 UTC | #8

I agree with both of these points. Follow the ICP/SNS ledger standard, and a new name/terminology that is more accurate could be an excellent improvement in education and adoption

-------------------------

THLO | 2022-02-04 15:32:34 UTC | #9

I agree as well. We are currently thinking about a better name/terminology.
Feel free to post (more) suggestions here!

-------------------------

ComputerInternetMan | 2022-02-04 18:32:01 UTC | #10

Ported Bitcoin? Definition : Transfer from one system to another.

-------------------------

tsetse | 2022-02-05 03:58:32 UTC | #11

As long as the formula xBitcoin is followed, it will be associated with wrapped BTC. Perhaps a change of name itself, say Bitquoin BTQ. A quoin is an architectural term for the corner of a building or the stone wrapping around a corner. So, Bitquoin is Bitcoin that has figuratively turned a corner.

-------------------------

Maxfinity | 2022-02-05 04:08:35 UTC | #12

[quote="diegop, post:1, topic:10681"]
The reason for developing such a ledger ourselves is twofold. First, we would like to have this functionality in place as soon as possible so that developers can start building (wrapped) Bitcoin smart contracts shortly after the Bitcoin integration is launched. Second, we would like to offer our ledger as a well-tested sample project to showcase the power of the Bitcoin integration, which can be used as inspiration for the development of other ledger canisters.
[/quote]

Great decision for the Foundation to use their own ledger canister. Will definitely help with interop.

-------------------------

b3hr4d | 2022-02-06 00:59:26 UTC | #13

I think we can name it Satoshi, 1) its real bitcoin 2) as far as i know on ICP we doesn’t need decimals, and with this approach when you trade 1 BTC to canister you will get 100,000,000  Satoshi and vice versa.

-------------------------

Goku | 2022-02-06 17:27:14 UTC | #14

I suggested an idea for this in another thread here: https://forum.dfinity.org/t/earth-bitcoin-an-idea-for-btc-integration/8624, but a powerful narrative given the current market for both Bitcoin and our global society/environment would be to call this 'eBTC'.

1) eBTC is energy efficient and solves the massive waste of energy that the Bitcoin networks are consuming.
2) We could introduce a small fee which would go towards keeping the canister alive and potentially purchasing carbon assets to make Bitcoin 100% carbon neutral (or positive).
3) An eBTC DAO could govern this canister as well to focus on social impact causes and change the incentives of the crypto industry from greed/hoarding to creating more positive values for society.

Since the original post we've created a new design for [what this could look](https://earthda.org/earth) like, and also announced a new initiative to build a [decentralized social network](https://earthda.org/social) which will be ready post-bitcoin integration to decentralize social networks which could potentially be used to govern the DAO.

-------------------------

Goku | 2022-02-06 18:00:20 UTC | #15

Another suggestion I have is to make the ratio such that the total supply of eBTC would be 7.7B, this would reduce the price per eBTC down to the $100 range and make it much more attractive for retail to hold and participate in. From experience, this stuff makes quite a bit of a difference in adoption.

![eBTC|500x500, 50%](upload://1DpkBu5vFUM1lshbdiuyk9Ijtg7.png)
Current numbers for eBTC would be:

$112 price
7,018,825,124 circulating supply
7,777,777,777 total supply

-------------------------

jzxchiang | 2022-02-06 18:51:33 UTC | #16

I think the new name should reflect one or a combination of these properties:

* completely trustless (not true with WBTC)
* completely programmable (not true with BTC or Lightning)
* really fast transactions (not true with BTC or WBTC)
* infinitely scalable (not true with any of them)

It should also be ideally one word + Bitcoin, so that the ticker symbol is relatively short, e.g. WBTC.

-------------------------

ajismyid | 2022-02-07 10:13:00 UTC | #17

∞BTC or i-BTC ? (derived from infinite-BTC, ICP ∞ BTC)
Another idea is Hyperloop Bitcoin, (the idea is from highspeed transportation proposed by elon musk)

-------------------------

THLO | 2022-02-07 11:03:33 UTC | #18

[quote="tsetse, post:11, topic:10681"]
Bitquoin is Bitcoin that has figuratively turned a corner.
[/quote]

Very creative!  :-)

It's great to see that there are many good suggestions for the name/ticker symbol (and substitutes for "wrapped") already.

-------------------------

lastmjs | 2022-02-08 14:53:59 UTC | #19

What do you all think of ∞BTC?

-------------------------

lastmjs | 2022-02-08 14:55:15 UTC | #20

[quote="ajismyid, post:17, topic:10681, full:true"]
∞BTC or i-BTC ? (derived from infinite-BTC, ICP ∞ BTC)
Another idea is Hyperloop Bitcoin, (the idea is from highspeed transportation proposed by elon musk)
[/quote]

Didn't see that you already said ∞BTC, I like it

-------------------------

lastmjs | 2022-02-08 15:06:50 UTC | #21

I made a quick Twitter poll with some of the ideas discussed here, hopefully we can get some more input: https://twitter.com/lastmjs/status/1491065564826984448

-------------------------

lastmjs | 2022-02-08 15:19:42 UTC | #22

Looks like people really like iBTC...perhaps icBTC would be even better?

-------------------------

Goku | 2022-02-08 18:54:03 UTC | #23

It would be a bit short sighted to choose a name for something potentially game changing for *Bitcoin* and tying it to the IC.

Your audience does not represent the broader crypto market (which largely believes the Internet Computer/IC is a rug pull, do a poll or ask any large crypto fund this and you will quickly find the answer as we have), and definitely does not represent the broader macro markets (which don't care/know about blockchain protocols, but want a easy to understand story that relates to them). 

We can tap into bigger pools of liquidity if we go with eBTC, just my 2c.

-------------------------

hpeebles | 2022-02-08 18:56:52 UTC | #24

icBTC all the way!

I really think the name must contain BTC, and it must be swapped at a 1-to-1 ratio otherwise things will just become confusing.

Also, BTC is just the first of many coins for which this same process will happen and we should follow a single pattern for each of them.

I think icBTC, icETH, etc works well.

-------------------------

Comfortable_Reply_56 | 2022-02-08 19:08:11 UTC | #25

icBTC is my thinking as well.

icBTC has the benefit of 
- not using the word wrapped, 
- not using a word so close in everyday meaning to "wrapped" that it can be interpreted as disingenuous word play, 
- potentially brings attention to the IC through its name in cases where the IC would otherwise not be mentioned, 
- short and convenient.

-------------------------

ildefons | 2022-02-09 00:14:54 UTC | #26

[quote="Manu, post:7, topic:10681"]
better to use new keyword to avoid confusion to the people. For ex. enclosed-bitcoin, enveloped-bitcoin, capsulated-bitcoin , etc.
[/quote]

WarpedBTC instead of WrappedBTC just like a warp drive distorts the shape of the space-time continuum to fly faster than light :slight_smile:

-------------------------

jzxchiang | 2022-02-09 01:23:10 UTC | #27

I'm not a fan of iBTC.

CoinMarketCap will display the ticker in all uppercase, which means it will appear as IBTC. Could be confused for the letter l (yes, lowercase) or the number 1.

icBTC isn't good either IMO. That's too long. Also, I feel like we shouldn't reference the Internet Computer in the name at all. Its reputation isn't the best right now, and it may cause others to accuse ICBTC as being "centralized".

Names with non-standard unicode characters like ∞BTC won't work, because most people can't type them.

eBTC sounds cool, but I don't know if I really understand the "e for Earth" part. Also, it may be confused for Ethereum.

A bunch of objections from me but no suggestions. :man_facepalming:

-------------------------

Maxfinity | 2022-02-09 01:28:55 UTC | #28

[quote="jzxchiang, post:27, topic:10681"]
Names with non-standard unicode characters like ∞BTC won’t work, because most people can’t type them.
[/quote]

Team iBTC here, sounds cool and like it's bringing BTC to the future. Also for warped BTC over wrapped BTC.

-------------------------

ajismyid | 2022-02-09 01:53:06 UTC | #29

Still trying to sell the hyperloop idea, what about called BTC-pods ETH-pods? Since vehicles in hyperloops transportation are called pods. Hyperloop tech may represent the analogy of what the 'wrapped' tech IC want to proposed. It's green tech, lightning fast transportation, and the pods is like encapsulated / wrapped asset.

-------------------------

jzxchiang | 2022-02-09 01:57:09 UTC | #30

Personally, BTC-pod sounds a little weird to me, and I'm not sure how you'd abbreviate it.

-----

How about something simple and easily readable like XBTC? X for cross-chain. (You don't even need to explain the abbreviation, can just say it aloud as "XBTC" or "X Bitcoin".

-------------------------

ajismyid | 2022-02-09 02:22:29 UTC | #31

BTC-pod is just the naming (how we call the BTC-IC wrapped asset), for symbol we can use (BTC), or {BTC}, or <BTC> (any ideas?). The symbol may not follow conventional naming as XBTC, but IC is proposing unconventional wrapped asset too right?

-------------------------

Goku | 2022-02-09 04:09:46 UTC | #32

If it turns out that hyperloop tech doesn't actually work (as the past decade has shown) then it may be a bad idea to align the future of the IC with it. This guy goes into alot of detail in several videos about why if you are interested in learning more.
https://www.youtube.com/watch?v=2h6Cz4hwuEI

-------------------------

gabe | 2022-02-09 13:57:46 UTC | #33

What about BTX for cross-chain? Super short and recognizable.
Emphasis on cross-chain can imply "true" cross-chain without bridges etc.

Same could be used for ETH, i.e ETX.

-------------------------

lastmjs | 2022-02-09 14:49:37 UTC | #34

I've created another poll with some runners up that weren't included in the first poll. iBTC and icBTC were the clear favorites from the first poll and comments: https://twitter.com/lastmjs/status/1491423533419089921

-------------------------

tsetse | 2022-02-10 06:11:08 UTC | #35

Okay, I think I have hit upon a good one. How about chained Bitcoin cBTC? 'Chained' sounds stronger and more secure than 'wrapped' and indicates the asset has been initially transferred on-chain rather through a bridge.

-------------------------

jzxchiang | 2022-02-10 06:43:18 UTC | #36

CBTC doesn't sound bad at all. The word "chained" doesn't really have a positive connotation though. At least "wrapped" is more neutral sounding.

-------------------------

ildefons | 2022-02-10 07:36:49 UTC | #37

I don't like it because BTC is on chain already

-------------------------

lastmjs | 2022-02-10 14:14:50 UTC | #38

We've got a lot of good initial feedback from the discussions here, on Twitter, and on Distrikt. Not sure how to proceed, I do think the name is pretty important.

Perhaps we should lay out some governance proposals more clearly explaining the trade-offs with each name? For example, icBTC is long but the prefix is wide open and will work for nearly every asset we'll want to bring to the IC. iBTC is short but many people have brought up that it sounds like an Apple product. cBTC is short and has some nice possible meanings like "canister" or "chained" but is pretty generic, so perhaps other assets won't be able to apply the name.

-------------------------

LightningLad91 | 2022-02-10 14:20:31 UTC | #39

I agree there needs to be more discussion.

[quote="lastmjs, post:38, topic:10681"]
cBTC is short and has some nice possible meanings like “canister” or “chained” but is pretty generic, so perhaps other assets won’t be able to apply the name.
[/quote]

When would “Canister” not apply to an asset in the IC? Seems like something that could apply to any “wrapped” asset with a ledger stored in a canister.

-------------------------

lastmjs | 2022-02-10 14:22:57 UTC | #40

I meant the names will have already been taken, the actual tickers. We need to make sure our names are open and can be listed without conflicts on exchanges. The prefix "c" I'm sure is used quite often already (Compound, Avalanche maybe, etc).

We have to optimize between a lot of variables to get the name right: availability of the name, trademark, readability, pronunciation, meaning, etc

-------------------------

LightningLad91 | 2022-02-10 14:46:35 UTC | #41

That's a good point, and you're right, there's an obvious conflict with Compound Ether (CETH).

I'm expecting to have a lot of discussions (& debates) with individuals about the merits of wrapped assets on the IC. It would be nice if the prefix could lead into a discussion about the security attributes of the asset. I thought Canister served this purpose well but I'm sure there are other good options.

If someone asks me why we called it Infinity (or Infinite) BTC what am I supposed to say? Open to suggestions.

-------------------------

lastmjs | 2022-02-10 15:15:57 UTC | #42

I think we should call it icBTC...so I wouldn't ever suggest discussing infinite Bitcoin with anyone. Bitcoiners will not be very appreciative of that wording.

-------------------------

paulyoung | 2022-02-10 15:37:25 UTC | #43

In some programming languages when we need to name a derivative function we attach a suffix of `'` which is pronounced “prime”

i.e. `BTC'` for “BTC Prime” or “Bitcoin Prime”

> One of the most common modern notations for differentiation is named after [Joseph Louis Lagrange](https://en.m.wikipedia.org/wiki/Joseph_Louis_Lagrange), even though it was actually invented by [Euler](https://en.m.wikipedia.org/wiki/Leonhard_Euler) and just popularized by the former. In Lagrange's notation, a [prime mark](https://en.m.wikipedia.org/wiki/Prime_(symbol)) denotes a derivative. If *f* is a function, then its derivative evaluated at *x* is written
>
> ```f'(x)```

https://en.wikipedia.org/wiki/Notation_for_differentiation

-------------------------

diegop | 2022-02-10 20:59:19 UTC | #44

I have a *softly-held* opinion on naming I want to pose by you all regarding naming conventions like "iBTC" or  other types (fwiw, i voted for that on the Twitter poll Jordan held). I am very much prepared for folks to ignore this, as feedback is what I am looking for:

1. The more I read this thread, the more I think the more *user helpful* version of what we are doing is using a **verb** (though not “wrapped”) rather than a **proper noun**.
2. A **proper noun** like iBTC, iCBTC, *BTC, etc... connotes (from a distance) a new chain or new token asset. 
3. A **verb** connotes that it is the same underlying token…. But some action was taken on it.
4. I have no opinion on *which* verb

-------------------------

lastmjs | 2022-02-10 20:47:04 UTC | #45

Going along with that, I would suggest the following (not all verbs but more ideas as well:

* Threshold BTC
* Shamir BTC
* Shared BTC
* Secret shared BTC
* Threshold Shared BTC
* Chain key BTC (ooh...ckBTC)

Something about the threshold shamir secret sharing chain keyness of it all. I like saying Chain Key Bitcoin.

-------------------------

ajismyid | 2022-02-11 04:41:11 UTC | #46

Some ideas:
"mantled" BTC
"augmented" BTC
"morphed" BTC - from "Neuromorphic engineering", basically to morph BTC become smarter, faster.
If BTC direct integration only make BTC "smarter", we need to "morph" it to make it "smarter & faster" to harvest full potential of ICP technology.

How do we abbreviate it while not trying to give impression it is a new asset ? The idea is using agnostic coding symbol as identifier. Such as bracket (BTC), <BTC> or other coding symbol. But I do not know if using such symbols make it less compatible and cause problem.

-------------------------

JaMarco | 2022-02-11 08:53:00 UTC | #47

Encased BTC (eBTC). Verb for being BTC inside a canister.

-------------------------

gabe | 2022-02-11 09:42:12 UTC | #48

Bit confused, do you mean **adjective** instead of **verb**?

If so, I think that is a good point. Personally I like "Smart BTC" or "SBTC" but most *SXXX* tickers are already taken by synthetix.

One suggestion would be "Agile BTC" or "ABTC". Some definitions for agile are:

1. quick and well-coordinated in movement -> *as in BTC on IC is fast*
2. active; lively -> *as in IC brings new life to BTC as a programmable asset*
3. mentally acute or aware -> *as in BTC becomes smarter*

I realize that it can bring connections to the AGILE development methodology, but I suppose that philosophy goes hand in hand with IC's iterative and collaborative improvements through proposals.

-------------------------

lastmjs | 2022-02-12 16:19:38 UTC | #49

This discussion on Twitter has gone well, and I think I've found my favorite name:

Chain Key Bitcoin (ckBTC)
Chain Key Ether (ckETH)

Chain Key Assets are secured by a chain key pair and canister smart contract.

The chain key pair simultaneously functions on the IC and the blockchain of the chain key asset, providing a seamless integration.

https://twitter.com/lastmjs/status/1492263888942948355

I think we need to avoid one letter prefixes (because it will be hard to ensure they are available to be used for the many assets coming to the IC), and choosing a prefix that somewhat describes the underlying technology without tying us to one specific blockchain seems ideal. The prefix should lead to fruitful discussions about how the technology works, why it's different than other "wrapped" technologies.

Thus I vote for ckBTC, and as a runner up icBTC.

-------------------------

diegop | 2022-02-12 17:40:24 UTC | #50

I do like the reminding of readers about chain key, as well.

-------------------------

lastmjs | 2022-02-12 16:25:51 UTC | #51

I also like how the "c" could stand for canister. Could be chain/canister key Bitcoin. I like this thought process here: https://twitter.com/weedpatchtwo/status/1492267302552694784

-------------------------

LightningLad91 | 2022-02-12 17:01:02 UTC | #52

[quote="lastmjs, post:49, topic:10681"]
Thus I vote for ckBTC, and as a runner up icBTC.
[/quote]

I really like using chain key in the name. Thank you for taking the time to engage with the community on this.

Do you have any plans to submit a motion proposal for this naming convention?

-------------------------

flyq | 2022-02-14 06:33:15 UTC | #53



[quote="diegop, post:44, topic:10681"]
* A **proper noun** like iBTC, iCBTC, *BTC, etc… connotes (from a distance) a new chain or new token asset.
[/quote]
It is a new asset in itself, obtained by locking real BTC, but this cross-chain does not require new security assumptions.

So similar to other WBTC, RENBTC in the industry, we can also use *BTC.

integrated btc: IBTC or GBTC

-------------------------

jzxchiang | 2022-02-14 08:07:37 UTC | #54

ckBTC looks cool.

How about CKBTC though (which is how it would look on listings)? I worry it's too many letters... Very few tokens use 5 letters for their ticker symbol. And when they do, it usually spells out a real word like THETA.

-------------------------

lastmjs | 2022-02-14 16:00:03 UTC | #55

I think it's fine, at least in the fact that there are multiple other BTC tokens that are similar: https://defipulse.com/btc

* renBTC
* ibBTC
* imBTC
* acBTC

-------------------------

RatherIcy | 2022-02-15 05:30:39 UTC | #56

From a non-technical point of view, we’re going pretty “internet computer” with the name ckBTC. What I mean by that is a lot of people preferred the name DFINITY (DFN) for the governance token initially. While the name Internet Computer expresses the technicals better, DFINITY just had more spark and was intuitive to the average consumer.

DFN: “It’s decentralized while also being infinitely scalable.” 

iBTC seemed to be the most intuitive name from the ones discussed. I can imagine conversations going like below for each name:

 “What is iBTC” >It’s bitcoin on internet computer 

vs.

“What is ckBTC” >it’s chain key bitcoin 
“What is chain key” > etc etc etc, really they still might not even know what you’re talking about

tl;dr I like iBTC, but I think proposals would be helpful too :)

-------------------------

Manu | 2022-02-15 17:10:46 UTC | #57

I also really like ckBTC, probably my new favorite.

-------------------------

kpeacock | 2022-02-15 17:13:30 UTC | #58

it also has internal rhyme if you pronounce it "chain key B.T.C"

-------------------------

lastmjs | 2022-02-15 17:21:07 UTC | #59

Ooooooooooooooooooooh (I need to add this in order to post)

-------------------------

anonymous | 2022-02-24 22:15:36 UTC | #60

Like Michael Lee mentioned, should just leave it as BTC. Will look and feel more familiar when trading on dexes. Adding c, i, k and all that other stuff in front of the name just seems weird.

-------------------------

anonymous | 2022-03-05 13:02:20 UTC | #61

I just thought of an even better idea. Hear me out:

Why don't we set the ticker to XBT? That's Bitcoin's international standard ticker, which isn't widely used. By using that, we embrace bitcoin as an internationally recognized currency, whilst also distinguishing it from the regular BTC.

-------------------------

skilesare | 2022-03-07 00:04:35 UTC | #62

Given the discussion about naming in this thread, I’d like to get the participants opinion on a pending bounty I have. This one is a bit “out there” and the goal is to support the wrapped BTC project by encouraging the augmentation of tools from an entire replication of the Bitcoin protocol on the IC.  I thought everyone had settled on ckBTC but I just caught up on the thread and realized a decision hadn’t been made.

https://icdevs.org/bounties/2022/02/26/Bitcoin-on-the-IC-Reference-Implementation.html

Tldr: I propose fully implementing two forks of BTC on the IC. One called dirty BTC(dBTC) that let’s block proposers submit blocks with PoW proofs and one called clean BTC(cBTC) that just uses inherent IC consensus. These forks have an experimental DAO that is meant to test out dao concepts on the IC and I’ve tentatively called this the icBTC DAO.  I don’t expect this dao to turn into anything of real value, but it needs a name nonetheless.  Obviously this overlaps a couple of the proposed names so I wanted to run it by folks before I post a top level post.

Any thoughts/criticisms/suggestions?

-------------------------

everhusk | 2022-03-07 04:29:43 UTC | #63

Yes. I would suggest/criticize to not make the assumption like [arakame](https://forum.dfinity.org/t/candy-library-try-2-financing-software-on-the-ic/9861) that launching/growing new tokens/daos is so simple. There is an insane amount of competition for attention in both markets.

If success of the IC ecosystem/BTC adoption is the goal, why not support the team behind earthdao.co/ebtc with development, and let them support you with marketing/branding?

-------------------------

skilesare | 2022-03-07 04:42:06 UTC | #64

This looks very cool. I’m less interested in the dao side and more interested in incentivizing the btc tools so devs can work with the tech when it is ready. I am trying to find the right incentives and daos seem to be all the rage at the moment. Send me a message and tell me more about what you are thinking.

-------------------------

emmaperetti | 2022-03-09 11:59:25 UTC | #65

Team, come and join the community conversation with Mario Pastorelli ([@mariop](https://forum.dfinity.org/u/mariop)), Thomas Locher ([@THLO](https://forum.dfinity.org/u/thlo))

register here: https://dfinity.zoom.us/webinar/register/WN_fwXFU7mbSxiH1F-i20tCcw
overview of all community conversations: https://dfinity.org/conversations/

-------------------------

THLO | 2022-03-15 13:42:11 UTC | #66

Since this is feature is now scoped, allow me to share the current feature design.

Note that the design reflects our current thinking. If the upcoming proposal to build this ledger is accepted and work on this feature is started, it is possible that some parts of the design will change as the project progresses.

# NNS Proposal: Chain Key Bitcoin Ledger

The goal is to introduce a Bitcoin ledger on the Internet Computer based on the Bitcoin integration feature and Chain Key technology.

While the name is not set in stone, we call it the Chain Key Bitcoin (ckBTC) ledger in this design because it is one of the proposed names that received mostly positive feedback.

The ledger will make it possible to trade ckBTC at the speed of the Internet Computer at low cost. Moreover, it will offer mechanisms to convert BTC to ckBTC and vice versa, at a 1:1 rate.

# Design

The ckBTC functionality is introduced in the form of two new canisters:
-  The **ckBTC Ledger** is an instance of a ledger, handling ckBTC transfers and managing account balances.
-  The **ckBTC Minter** holds all Bitcoin of ckBTC holders and is in charge of issuing mint and burn calls to the ckBTC Ledger.

## ckBTC Ledger

The API of the ckBTC Ledger will be specified at a later stage. It will offer functions to query balances and transfer funds.

## ckBTC Minter

The ckBTC Minter will offer the following functions.

```get_btc_address(subaccount: vec nat8) -> (String);```

The function deterministically computes a Bitcoin address based on the ckBTC Minter’s main Bitcoin address and the caller’s principal ID and the provided subaccount.

Specifically, starting from the ckBTC Minter’s default key, BIP-32 key derivation is used to derive a key using the caller’s principal ID and the provided subaccount. The returned address is derived from this key.

Note that it is possible for a user to derive this Bitcoin address herself/himself.

```update_balance(subaccount: vec nat8) -> (UpdateBalanceResult);```

The function instructs the ckBTC Minter to update the ckBTC balance of the caller. Specifically, the ckBTC canister checks if there are new UTXOs associated with the Bitcoin address derived from the caller’s principal ID and the provided subaccount. If there are such UTXOs, the equivalent amount is minted in ckBTC and made available to the caller in the given subaccount.

```retrieve_btc(amount: Bitcoin, fee: opt Bitcoin, address: String) -> (RetrieveBtcResult);```

The function instructs the ckBTC Minter to send the given amount of Bitcoin to the provided Bitcoin address, burning the equivalent amount of ckBTC tokens. Note that at least the given amount must be transferred first, in ckBTC, to the caller’s *withdrawal account*. The withdrawal account is a ckBTC Ledger account under the control of the ckBTC Minter. The subaccount is derived deterministically from the user’s principal ID.

The optional fee parameter defines the fee to be used in the Bitcoin transaction that transfers the Bitcoin to the given Bitcoin address. If no fee is provided, the ckBTC Minter uses a standard fee, obtained through the Bitcoin integration fee API.

The ckBTC tokens are burned *before* the Bitcoin transaction is confirmed. If a transaction does not appear in a block, the user has the option to resubmit the transaction using the `resubmit_retrieve_btc` function below.

```get_minimum_fee() -> (Bitcoin) query;```

The function returns the minimum expected fee when providing a custom fee in the `retrieve_btc` function call.
The ckBTC Minter uses the Bitcoin integration fee API to derive this fee.

```resubmit_retrieve_btc(request_id: nat64, new_fee: Bitcoin) -> (ResubmitRetrieveBtcResult);```

The function instructs the ckBTC Minter to resubmit a Bitcoin transaction for a previous request, updating the fee. This function is intended to be used for transactions that are stuck because the fee was set too low.
The new fee must be higher than the last fee in the transaction associated with this request, increasing the fee according to [BIP-125](https://github.com/bitcoin/bips/blob/master/bip-0125.mediawiki).

-------------------------

everhusk | 2022-03-16 06:26:48 UTC | #67

Great work! The API seems flexible for most use cases. ckBTC is very developer focused and the vast majority of retail end users are not developers, so that may reduce the number of holders.

Anyways, it will likely need to be wrapped with this implementation to be useable with other protocols (DEXs, DAOs, etc) so that should allow for other token names. These cross canister/subnet(?) calls may slow the end user experience but the flexibility is probably worth the trade off.

Any updates on the security guarantees and how the subnet will ensure BTC keys are not stolen by node operators?

-------------------------

THLO | 2022-03-16 08:18:59 UTC | #68

[quote="everhusk, post:67, topic:10681"]
ckBTC is very developer focused and the vast majority of retail end users are not developers, so that may reduce the number of holders.
[/quote]

Correct, the (initial) focus in on developers. We might add a frontend so that casual users can also exchange BTC and ckBTC but we will leave it mostly to the community to build cool products around this.

[quote]
These cross canister/subnet(?) calls may slow the end user experience but the flexibility is probably worth the trade off.
[/quote]

Correct, calls across subnets take a bit longer but it's still only a few seconds until transactions are *finalized*. So it would be a vastly different experience compared to dealing with real Bitcoin.

[quote]
Any updates on the security guarantees and how the subnet will ensure BTC keys are not stolen by node operators?
[/quote]

This feature depends on the underlying Bitcoin integration feature, which in turn depends on the threshold ECDSA feature for "key management".
There will be a single, large subnet with secret shares of a master key, which is used to derive the keys for every canister in every subnet. Since every signature request has to go to this subnet, the security largely depends on the security of this threshold ECDSA subnet. The goal is to make this subnet effectively as secure as the NNS itself.
If you'd like to learn more about the threshold ECDSA work, please ask in the corresponding [channel](https://forum.dfinity.org/t/threshold-ecdsa-signatures/6152)!

-------------------------

bitdivine | 2022-03-16 17:02:51 UTC | #69

Apropos names, these are Proof of Delegation transactions.

Wrapped bitcoin is "trusted to delegate" transactions.  And the entrusted entity often turns out not to be trustworthy.

-------------------------

THLO | 2022-03-18 09:52:37 UTC | #70

[quote="bitdivine, post:69, topic:10681"]
Wrapped bitcoin is “trusted to delegate” transactions. And the entrusted entity often turns out not to be trustworthy.
[/quote]

That's why we want to have both the ledger and minter/custodian on the IC, in which case you only need to trust in the correct functioning of the subnet where these canisters run (and the threshold ECDSA subnet).

-------------------------

bitdivine | 2022-03-18 10:21:17 UTC | #71

Agreed completely, that's the main difference between this and classical wrapped bitcoin.

Point is, though, that not only is this fundamentally more secure, it's also a lot less energy intensive than PoW.  (and faster and many other good things).  PoD is useful for bitcoin owners trying to get away from PoW.  I'm proposing that we make more use of the phrase "Proof of Delegation".

-------------------------

THLO | 2022-03-18 10:39:27 UTC | #72

Thanks to everyone who joined the community conversation on March 16!

For those who haven't seen it yet, the [motion proposal](https://dashboard.internetcomputer.org/proposal/50135) is now live. To all the neuron holders, please cast your vote before the deadline on March 21!

-------------------------

THLO | 2022-03-18 10:52:38 UTC | #73

Regarding the "one Bitcoin address per transaction" question that was raised in the community conversation, we had a discussion about it internally.

From our perspective, the `subaccount` parameter can be used exactly for this purpose: A different subaccount will result in a different Bitcoin address.

If anybody feels that this approach does not meet the requirements for specific use cases, please let me know!

Note that the `subaccount` parameter can also be used for other purposes. For example, a DEX could use a subaccount to identify the owner of ckBTC on the DEX. In this scenario, the owner would transfer bitcoin to an address that will result in the minted ckBTC to be transferred to the owner's subaccount controlled by the DEX.

-------------------------

Iceypee | 2022-06-09 04:01:43 UTC | #74

what happens if a person with x amount of ckbitcoin wants to burn their ckbtc to send to an actual btc address but that x amount is greater than the amount in any single transaction address. Would that require sending from multiple transaction addresses? I'm still trying to wrap my head around this.

-------------------------

THLO | 2022-06-09 07:54:21 UTC | #75

[quote="Iceypee, post:74, topic:10681"]
what happens if a person with x amount of ckbitcoin wants to burn their ckbtc to send to an actual btc address but that x amount is greater than the amount in any single transaction address. Would that require sending from multiple transaction addresses?
[/quote]

Good question!
In order to get bitcoin out, a user has to transfer the desired amount (from any number of accounts) to the user's *withdrawal account*, which is an account controlled by the ckBTC Minter and derived from the user's principal ID.
So, a few ckBTC transfers may be necessary (which are cheap), followed by a single Bitcoin transaction.

-------------------------

Iceypee | 2022-06-09 14:18:57 UTC | #76

Wait just to make sure I'm getting this, when I send bitcoin, lets say from coinbase to this minter, you said it creates an entirely new address each time right? 

I.e. get_btc_address(subaccount: vec nat8) -> (String);

I send my btc to this address.

Then I mint some ckbtc. 

Lets say I do this like 6 times, I'll have 6 different addresses not on ckbtc but on actual l1 right?

Lets say I never touch this btc and theirs no other addresses to draw btc from from a withdrawl that I want to make back to coinbase. In order to aggregate a withdrawl out (i.e. unwrap) this exact amount and send back to my coinbase address wouldnt that essentially be 6 withdrawls over l1 and not ckBTC? So that would be 6 l1 btc transaction fees not over ckBTC as you say in the previous reply?

>So, a few ckBTC transfers may be necessary (which are cheap), followed by a single Bitcoin transaction.

-------------------------

THLO | 2022-06-09 16:42:41 UTC | #77

You *can* create a different address every time by providing a different subaccount. You are free to reuse the same subaccount, which will result in the same Bitcoin address (obviously, as long as the principal ID remains the same).

If you go through this process 6 times with different subaccounts and transfer bitcoin to these addresses, then, yes, your funds will be spread across 6 different addresses on the Bitcoin blockchain.
However, the ckBTC minter controls all of these addresses and associated UTXOs. So, if you want to transfer funds out, all you need to do is send the ckBTC to the withdrawal account and then trigger the retrieval process, which will burn the ckBTC in the withdrawal account and create a *single* Bitcoin transaction. The ckBTC minter is free to use any UTXOs and any number of UTXOs in the transaction to satisfy the request.

Does that answer your question?

-------------------------

Iceypee | 2022-06-09 18:48:00 UTC | #78

Ohh so thats the power of chainkey cryptography? I didnt know you could make one transaction from  multiple utxos of multiple bitcoin addresses that it controls to send to a whole nother bitcoin address. (I did know it was possible the other way if you were sending to multiple addresses  from multiple utxos of a single address) .

But yea that answers it. I'll have to read up more on the whitepaper again

-------------------------

THLO | 2022-06-10 15:05:25 UTC | #79

[quote="Iceypee, post:78, topic:10681"]
Ohh so thats the power of chainkey cryptography? I didnt know you could make one transaction from multiple utxos of multiple bitcoin addresses that it controls to send to a whole nother bitcoin address.
[/quote]

Actually, this is just standard functionality of derived keys (see [BIP-32](https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki)). If you can sign for one key (= address), you can sign for derived keys (= derived addresses).
This rule applies to canisters holding bitcoin, too.   :)

-------------------------

Iceypee | 2022-06-11 18:11:40 UTC | #80

ooh whoops. Thanks, youve been very helpful

-------------------------

passio | 2022-08-19 23:17:12 UTC | #81

The WRAPPED-Bitcoin should be called : 
**(∞BTC)** :infinity:BTC

infinity-Bitcoin or Infinite-Bitcoin

-------------------------

Manu | 2022-12-22 11:17:23 UTC | #82

As this topic was focused on gathering feedback, naming, and the motion proposal, I created a new topic to talk about ckBTC https://forum.dfinity.org/t/chain-key-bitcoin-ckbtc-bitcoin-wrapped-by-a-smart-contract/17606?u=manu.

-------------------------

