lei | 2022-12-08 09:56:19 UTC | #1

(English is not my native language, the following content is written in Chinese and the English part is translated by ChatGPT)

## My Story with ICP

Hey, community, sorry for the title.

I don’t speak much in English on social media (I occasionally speak on Twitter [https://twitter.com/shaoan_ ](https://twitter.com/shaoan_) , and for the first time writing a long post on this forum).

I have been a firm supporter of ICP and DFINITY since 2017 when I volunteered to help DFINITY build the earliest community, ICPL. In 2018, despite the coldest winter of the crypto market and my personal financial difficulties, I still invested 20k ETH (worth over ten of millions of dollars in 2018, much more at today’s ETH price) in DFINITY.

Yes, ICP’s price fell below my private round price (4.5 dollars), but I still have confidence and have been looking forward to the launch of SNS-1 and OpenChat. I absolutely believe in IC’s technical strength and innovation, and I even spent more than one million dollars to run ICPL.app ([http://icpl.app](http://icpl.app/)) not for profit without expecting any return. I want to devote myself to this great endeavor that I believe can change the world in my lifetime, the dream of the internet computer.

**I have no motivation or any reason to FUD ICP.**

After the horrible night of November 30th, I was very disappointed. I entered the crypto market in 2015, but the terrible experience of SNS-1 Decentralization Sale was unprecedented, even worse than the earliest ETH ICOs I participated in. I almost spent the whole night refreshing and logging in repeatedly, but the 500 or 503 error message occupied the screen. I used to believe that ICP was infinitely scalable and that the launch would be smooth and successful, but now it feels like a joke.

SNS-1 Decentralization Sale was chaotic, users could not access, transactions were congested, repetitive fee deductions (without instant refunds), no consideration of robot attacks, confusion about the lock-up mechanism (inconsistent with the previous description of the one-month lock-up time), etc. The fact that so many problems have arisen shows that the team responsible for SNS-1 Decentralization Sale obviously lacks some basic knowledge and operational experience of crypto. What makes me feel helpless and angry is that the careless and sloppy work attitude of the development team has also led to a large number of low-level errors.

This has caused great damage to the brand image of DFINITY and IC: ordinary users do not understand the technical principles of IC, so most users will think that the actual effective performance of the IC chain is too low (even lower than ETH) which has caused congestion, and some people even regard the entire work of IC as a scam.

In short, SNS-1 Decentralization Sale has a huge difference from my expectations. I am not a technology expert, but I have seen every day for more than a year that developers have been struggling to develop due to various reasons of DFINITY. I’m deeply heartbroken.

Here is a list of questions that I have gathered from a number of crypto native/experienced developers in the IC ecosystem, especially in the Asian community.

## 我与 ICP 的故事

嘿，社区，很抱歉我打出了这样的标题。

我在英文社媒很少发言（我偶尔在Twitter说话 [https://twitter.com/shaoan_ ](https://twitter.com/shaoan_) ，在论坛第一次发长文）。

我一直是 ICP 与 DFINITY 最坚定的支持者：在 2017年，我就自愿地帮助 DFINITY 建立了最早的社区ICPL。在 2018年，尽管那是加密市场最深的寒冬，也是我个人财务最困难的时候，我依然向 DFINITY 投资了2万ETH（当时法币价格超过1千万美金，如按今日的ETH价格更高）。

是的，ICP 的价格跌破了我的私募价格（4.5刀），但是我依然充满信心，并一直期待着 SNS-1 与 OpenChat 的 launch。我绝对相信 IC 的技术实力与创新，我甚至花费了 100 多万美金，在不期待任何回报的前提下，出资运行了 [ICPL.app](http://icpl.app/) 这个非营利性组织，我也想在我有生之年推动一件在我认为能改变世界的伟大事情，就是互联网计算机的梦想。

**我没有任何动力与理由去 FUD ICP。**

但在11月30日那个糟糕的晚上之后，我感到非常的失望。我 2015 年就进入了加密市场，但 SNS-1 Decentralization Sale 的糟糕体验是我从未见过的，就连我参与过 ETH 最早的 ICO 都比它更好。我几乎一晚上都在不断的刷新，并重复登录，但是 500 503 的错误提示占据了屏幕。我曾经相信 ICP 是无限扩展性与 web speed，但是现实狠狠地嘲笑了我。

SNS-1 的发售简直是一片混乱，用户无法访问、交易堵塞、多次扣款（且没有即时退款）、没考虑机器人攻击、锁仓机制混乱（与之前描述一个月锁仓时间不符）等等。出现如此多的问题，说明负责 SNS-1 Decentralization Sale 的团队显然不具备 crypto 的一些基本常识与操作经验。让我感到无奈与愤怒是，开发团队粗心、不严谨的工作态度也导致了大量低级错误。

这已经对 DFINITY 与 IC 的品牌形象造成了很大的破坏：普通用户不了解 IC 的技术原理，因此大部分用户会认为是 IC 链的实际有效性能过低（甚至低于 ETH）导致了拥堵，有些人甚至将 IC 的整个工作视为骗局。

总之SNS-1发布与我的预期有着巨大的出入，我并不擅长专业技术，但上线一年多来每天看到专业的技术开发者因为DFINITY的各种原因让开发变的举步维艰，我就感到心痛，以下是我集合了IC生态里特别是亚洲社区多位crypto native/经验丰富的开发者交流后列出的问题。

-------------------------

lei | 2022-12-08 14:22:09 UTC | #2

## 1. Technical issues exposed in this SNS-1 Decentralization Sale

### 1.1 User repeated deductions

The rules for the SNS-1 decentralization sale were simple: total 3141 SNS-1 tokens are for decentralization sale, and up to 1 ICP can be used to purchase 1 SNS-1 token.

But many users report that they have been deducted more than once for 1 ICP. I can’t collect specific numbers of total number of users affected (DFINITY should have that numbers), but here are just three examples of community feedback that I have collected:

![](upload://wG1pG0fdZraCwov0xKL5STXK41o)

![](upload://8ahYscLjdzVgqP3Js4Brr0TQ8Bh)

![](upload://6HV5Vv8UlcF16HLqYzukao2rHSa)

Although after 48 hours the extra ICP deducted has been returned to users, this problem occurred at the launch of the sale, reflecting the serious functional bug in the SNS sale code.

Any computer science major student knows how to develop an e-commerce system that meets basic functional requirements. Products are either traded for the price amount or not traded without deducting more money from the user (no DOUBLE SPENDING). Even if you encounter the traffic of Black Friday online shopping, users may face long delays, service degradation, or even service interruption, but basic functions must also be guaranteed, and users should not pay more than once!

### 1.2. Sybil Attack / Front-run Prevention

NNS/SNS team blamed bots for causing issues and they have acknowledged ([https://twitter.com/dfinity/status/1598399777284427776 ](https://twitter.com/dfinity/status/1598399777284427776)) bots heavily impacted this launch, with over 1/3 of SNS-1 being purchased by robots. This however raises questions about whether the NNS/SNS team responsible for the launch had any experience in product design. Bots are very common in both the web2 and web3/crypto worlds, yet the team seemingly ignored them beforehand and later blamed the robots for the problems with the launch.

The crypto industry already has well-established sybil-attack solutions for airdrops or token launches (of course each with its own advantages and disadvantages). Even within the IC ecosystem, there have been proposals like DOM’s favorite project People Parties([People Parties - Community Proposal](https://forum.dfinity.org/t/people-parties-community-proposal/8635)), as well as community projects like ModClub([http://modclub.app](http://modclub.app/)) , the Supernova-winner project Proof of Personhood(https://devpost.com/software/web3-mkdgh6) , and even there is the cycle faucet anti-robot solution ([DFINITY DEV OFFICIAL ](https://discord.gg/xT2xFJZz)) . It’s clear that the NNS/SNS team was living in their own bubble without sufficient communication with the other DFINITY team members.

Additionally, the presence of bots also raises the issue of front-running. It’s likely that bots or scripts were used to directly invoke the NNS backend to complete front-running. Moreover, NNS initiated the public call for the function through the front end, added orders and notifications to SNS through its own backend, inevitably concentrating all traffic in one place. This easily led to congestion. Regardless of how strong the ledger’s performance was, the traffic was still congested at the NNS frontend and its single Canister. The distributed processing of concurrent issues was not well considered.

### 1.3. The Subnet node outage and congestion issues

Why did 5 of SNS subnet’s 34 nodes go offline during the initial SNS-1 sale? Why did the SNS subnet also crash for several hours after the SNS-1 sale was over?

Some members of the community celebrated ([https://twitter.com/danostrovsky/status/1597637014341357568 ](https://twitter.com/danostrovsky/status/1597637014341357568)) the huge tps achieved during the SNS-1 sale, but we need to be aware that during this 1-2 hour period, only 3141 SNS-1 tokens were finally bought by 3141 NNS wallets. Therefore, most of the transactions are invalid, blocking the network and wasting a lot of computing resources. The number of effective transactions is far lower than the data shown on the panel, which is only close to 1 TPS.

### 1.4. Lack of Rigorous Testing

If SNS-1 decentralization sale had undergone thorough and rigorous testing, particularly stress testing, many of the issues mentioned above could have been discovered and resolved.

While SNS-1 was intended as a test, it was essentially a PUBLIC BETA test in a production environment, with thousands of users investing 1-2 hours and their own real money to participate. Low-level bugs should not have been discovered at this stage. Public beta testing should be used as a last line of defense to discover complex software defects or human economic incentive issues.

I have heard that members of the NNS/SNS team previously worked at well-known big tech companies such as Google/IBM. It is hard to believe that Google/IBM would have such low engineering quality standards.

If the NNS/SNS team’s testing engineering issues are not addressed fundamentally, the community will have no confidence in the immediate release of the OpenChat token.

### 1.5. Lock-up time

Why was the lock-up time for SNS-1 so random, when it was previously announced as 30 days, and why was it adjusted before the launch? This is a big product issue.

### Summary

DFINITY‘s Manu has made a detailed post-incident analysis, which can be found here:[ https://forum.dfinity.org/t/degraded-performance-during-SNS-1-decentralization-sale-incident-retrospective-tuesday-november-29-2022/17005](https://forum.dfinity.org/t/degraded-performance-during-SNS-1-decentralization-sale-incident-retrospective-tuesday-november-29-2022/17005). His analysis identifies the cause of the performance issues mentioned in 1.3 and suggests solutions, but does not provide satisfactory answers for issues such as the problem with repeat charges and other issues. And I hope to see NNS/SNS team come forward to provide their post-mortem.

In summary, NNS, the first usable wallet launched by IC and developed by DFINITY, not only takes on the functions of transfer transactions, neuron pledge and community governance, Canister creation, and top-up. Coin holders and community users had high expectations.

However, since its launch more than 1 year ago, poor loading performance, poor user experience and inability to interact with DApp have been the criticisms of NNS. DFINITY wanted to improve user experience by revamping the front-end, but lacked knowledge and experience in building user-side products and did not achieve good results.

The experimental release of SNS1 Decentralized Sale saw transaction congestion and robotic rush, which DFINITY explained was an experiment to expose the problem. However, as a product for end users and ICP holders, this attitude is quite irresponsible. Participants are not only investing real money but also with a real desire for the performance and performance of the IC. The experiment was not meant to be 100% successful, but the problems and reasons for failure were not officially pinpointed and held accountable.

The biggest reason for SNS1’s big failure in experience is the design of NNS, and the front-end and back-end teams are responsible. Apparently, the team did not have enough knowledge and testing on the completeness of business processes, sybil-attack, and performance guarantees.

The successful completion of the decentralization mechanism to offer is to decentralize while achieving the effect of horizontal scale out, which should allow more builders and users to help tokens sale and circulate. In the design process of SNS, the team did not engage enough with the community. It was only in the public beta testing before the final launch that so many problems were discovered, giving the community a huge surprise.

## 1. 本次SNS-1发行暴露的技术问题

### 1.1 用户重复扣款

SNS decentralization sale 发售的规则很简单：发售3141个SNS-1代币，最多1 ICP购买1个SNS-1，但是有多位用户汇报他们被扣了超过一次SNS-1的ICP。具体数字我无法统计，但以下仅为我收集到社区反馈的三个例子：

![](upload://wG1pG0fdZraCwov0xKL5STXK41o)

![](upload://8ahYscLjdzVgqP3Js4Brr0TQ8Bh)

![](upload://6HV5Vv8UlcF16HLqYzukao2rHSa)

虽然在48小时后多扣的ICP已退回给了用户，但这个问题在发售上线时发生，反映了SNS发售代码存在的严重功能性Bug。

任何一个计算机专业的大学生都清楚如何实现一套电商系统，满足基本功能要求，商品要么按照金额成交，要么没有成交，而不会多扣用户的资金。即使碰到黑色星期五电商的流量，用户可能面临长延迟，服务降级甚至服务中断，但基本的功能也必须会得到保障，而不会重复扣款。

### 1.2 机器人女巫攻击/抢跑

DFINITY事后[承认 ](https://twitter.com/dfinity/status/1598399777284427776)了机器人严重影响了这次发售，超过1/3的SNS-1被机器人抢购。这难免不让人猜测，负责这次发售的NNS/SNS团队是不是完全没有产品设计的经验？机器人无论是在web2还是Web3/crypto世界里，都是广泛存在的，他们竟然完全无视，并事后把发售的问题归咎于机器人。

crypto业界已经有比较成熟的针对机器人的空投或者抢售抗女巫攻击方案（各有不同利弊）。即使在IC生态，Dom提出过People Parties并且DFINITY基金也通过[提案](https://forum.dfinity.org/t/people-parties-community-proposal/8635), 社区里也有像[ModClub](http://modclub.app/)项目，Supernova获奖项目[Proof of Personhood](https://devpost.com/software/web3-mkdgh6), 以及[cycle领取水龙头防机器人 ](https://discord.gg/xT2xFJZz)的方案。显然 NNS/SNS团队活在自己的泡泡里，跟DFINITY内部团队也没有充分的交流。

另外，有机器人就必然有Front-run的问题。大概率有机器人或者有人用脚本直接调用NNS后端完成Front-Run。而且NNS通过前端发起公募的函数的调用，通过它自己的后端来去对SNS进行订单添加和通知，无疑让所有的流量都集中到了一个地方。非常容易造成堵塞。无论ledger本身性能多强，流量依然塞到了NNS前端和它自己的单个Canister上。分布式处理并发问题并没有很好的考虑到。

### 1.3 节点掉线和堵塞问题

为什么在 SNS 初始代币交换其间，SNS 的 34个节点掉线了 5个。为什么同时 SNS-1 售完后 SNS 子网也宕机了几个小时？

有社区成员为SNS-1发售时达到巨量的tps而[欢呼 ](https://twitter.com/danostrovsky/status/1597637014341357568)，但我需要清醒的认识到，在这1-2小时内，只有3141个SNS-1 token，被最终3141个NNS钱包购买成功。所以绝大多数的交易都是无效交易，阻塞网络并浪费了大量计算资源。真正有效交易远低于面板展示的数据，接近1 TPS而已。

### 1.4 缺乏严谨测试

如果SNS-1上线前经过完整严格的测试，特别是压力测试，以上这些问题大部分是能被发现并解决的。虽然SNS-1本身是一次测试，但这是一次在生产环境里的公开BETA测试，有上千的用户投入1-2个小时，而且消耗用户自己真金白银来参与的。低级bug不应该有在这个阶段才发现。公开BETA测试应该作为最后一道防线，用来发现复杂的软件缺陷，或者经济激励问题。

我听说有NNS/SNS的团队成员之前在谷歌/IBM这些知名Web2企业工作，难以相信谷歌/IBM会有如此低的工程质量门槛。

如果NNS/SNS团队的测试工程问题不被根本性解决的话，接下来直接发布OpenChat代币，社区都不会再有信心。

### 1.5 锁仓规则

这是产品设计问题 ，为什么SNS-1的锁仓时间是随机的，之前说过的30天，最后上线前为什么做了调整？

### 总结

DFINITY Manu做了详细的[事后分析](https://forum.dfinity.org/t/degraded-performance-during-sns-1-decentralization-sale-incident-retrospective-tuesday-november-29-2022/17005)。他的分析指出了上面1.3的性能问题的原因和解决方案，但重复扣款的功能问题和其他问题并没有很好的回答。

综上，NNS作为IC推出的第一个可用型钱包，由 DFINITY 开发，不仅承担了转账交易，神经元质押和社区治理，Canister创建和充值等职能。 持币人和社区用户寄予厚望。

然而上线以来，加载性能差，用户体验差，不能和 DApp 互动一直是 NNS 的诟病，DFINITY 想通过改造前端来提升用户体验，但缺乏对用户侧产品打造的认知与经验，没有取得良好的效果。

此次 SNS1 的实验性发行，发生了交易拥堵和机器人抢购，DFINITY 解释这是为了暴露问题做的实验。但作为一个面向持币人的产品，这种态度是极不负责的，参与者不仅是真金白银的在投入，而且是带有对IC的性能和表现的真实愿望。实验并不是要百分百成功，但是失败的问题和原因官方并没有准确定位和进行问责。

SNS1 在体验上的大失败，最大的原因就是 NNS 的设计问题，前端和后端团队要承担责任。显然，团队对业务流程的完备，防刷，以及性能保障都没有足够的认知和测试。

成功的完成去中心化机制来发售，就是要去中心化而达到水平扩容的效果，应该让更多人帮助代币发售和流通。在SNS的设计过程中，官方并没有这个思路，而是所有的环节都默认放在NNS或者SNS自己这里做，导致了能够参与的社区力量无法参与，进一步的无法获得准确有效的反馈。 在最后上线前的公测环节，才发现如此之多的问题，给社区一个巨大的意外。

-------------------------

lei | 2022-12-08 09:47:25 UTC | #3

## 2. Other IC technical issues that plague developers

I have also collected a number of technical problems that plague the developers of IC, which are not directly related to the SNS-1 decentralization sale but reflect the current dilemma of building applications on IC, and I list them below

### 2.1. Question about Canister Output Message Queue Limits

If a user request contains a chain of multiple awaits, when the request is not processed. After other user requests come in, their await will be interspersed, so that the number of output queue will soar and then exceed the limit and finally report an error. If canister doesn’t distinguish between internal await and external await, it’s hard to handle concurrency, and it’s hard to implement DEFI projects.

Link to the post： [Canister Output Message Queue Limits, and IC Management Canister Throttling Limits - #17 by bitbruce](https://forum.dfinity.org/t/canister-output-message-queue-limits-and-ic-management-canister-throttling-limits/15972/17)

### 2.2. Heap out of bounds" error when upgrading canister with Motoko

When canister takes up a little more memory (e.g. 70M), upgrading canister will result in a Heap out of bounds error.

Link to the post：[Heap out of bounds ， use motoko - #11 by bitbruce](https://forum.dfinity.org/t/heap-out-of-bounds-use-motoko/10497/11)

### 2.3. How does the user connect to a properly working node?

When the user gets data from canister, the route is proxied by ic0.app and if the node being routed does not work properly, then the user will get the wrong data. Therefore, the user needs a list of nodes to choose from. and have ic0.app route to the node that works properly.

Link to post： https://forum.dfinity.org/t/how-users-can-connection-a-node-that-work-properly-we-may-be-getting-the-wrong-data/16856

### 2.4. Bug of Trie data structure

Trie has an error in filter, Trie.get()/Trie.find() cannot return data.

Post link： [A Trie.filter() Bug](https://forum.dfinity.org/t/a-trie-filter-bug/12620)

GitHub：[Bug: user reported bug in `Trie.filter` · Issue #369 · dfinity/motoko-base · GitHub](https://github.com/dfinity/motoko-base/issues/369)

[github.com/dfinity/motoko-base](https://github.com/dfinity/motoko-base/issues/427)

#### [Trie.get()/Trie.find() does not return data, but the data is present.](https://github.com/dfinity/motoko-base/issues/427)

opened [date=2022-11-16 time=04:18:06 format="ll" timezone="UTC"]

closed [date=2022-11-24 time=11:14:45 format="ll" timezone="UTC"]

[![iclighthouse|20x20](https://global.discourse-cdn.com/business4/uploads/dfn/original/2X/1/16424601a3b18715861d55a8e41ef5a10d1ed23b.jpeg) iclighthouse](https://github.com/iclighthouse)

We had this issue during a stress test. orders used the Trie module and had a to[…](https://forum.dfinity.org/t/is-my-5-year-dream-of-icp-and-dfinity-shattered-is-there-still-a-future-sns-1-decentralization-sale-questions/17174/6)

### 2.5. Nat serialization problem

Nat, as a base type for Canister development, does not support rust standard serialization other than candid (such as cbor\json\bincode), need to add support to facilitate developers to implement their own serialization optimization.

Or the best serialization and deserialization solution can be given, both the size after serialization and the efficiency of serialization/deserialization should be taken into account.

GitHub：[As a developer, I want to [Nat] support bincode/serde_json/cbor deserialize · Issue #374 · dfinity/candid · GitHub](https://github.com/dfinity/candid/issues/374)

### 2.6. Boundary node load

Since long links cannot be established between icp boundary nodes and the browser, I have to send all requests to boundary nodes at once to ensure performance.

When I send these requests, either to fetch data or to upload data, the feedback from the boundary node becomes very unstable after a certain threshold, and many requests become difficult to guarantee QOS after a certain threshold (about 300M of data fetched in a short time).

Solution: The condition of rejecting POST requests should be changed or websocket should be added as soon as possible.

### 2.7. Adding an optional unique Principal ID for II

Internet Identity (II) is a great way to log in, but Principal inconsistencies make it difficult to interoperate identities between Dapps.

Users should be given more options. IIi should add a parameter to the login screen, or use means that would allow users to choose whether to keep a uniform Principal ID across Dapps.

### 2.8. Optimizing upload and download of large files

When a large file is uploaded and downloaded, to ensure the speed of the upload and download, I need to respectively.

When uploading, I need to slice the file into n 2M size chunks to upload.

When downloading, I can get up to 3M in size each time.

However, if a file is large and I want to get all the data, there are only two options.

Send all update requests or query requests to the edge nodes

Create a long link, and go to http_request, but http_request authentication is very troublesome

Solution:

Establish a long link to the edge node websocket (long-term recommendation)

Increase the load of single-ip post and get requests (short-term recommendation)

### 2.9. Optimizing the motoko-base library

The data structure algorithm of Motoko-base library is crude and inefficient, and the use of RBtree and Trie does not tidy up the structure when deleting data, resulting in growing space.

The unit test of Motoko-base library is not comprehensive, it is not tested extensively, boundary test, and there are many bugs.

![|32x32](https://github.githubassets.com/favicons/favicon.svg)[GitHub](https://github.com/dfinity/motoko-base/issues)

![|690x345](upload://euOSJCZmVapm6kSyMa4pRzkzyF4.png)

### [Issues · dfinity/motoko-base](https://github.com/dfinity/motoko-base/issues)

The Motoko base library. Contribute to dfinity/motoko-base development by creating an account on GitHub.

https://github.com/dfinity/motoko-base/pulls

### #Summary

These problems above are commonly reported by developers that DFINITY Foundation doesn’t pay enough attention to them, which seriously affects their development progress.

Just imagine that one or more of the following issues will keep causing developers’ applications (say a DEX) to fail or even lose user assets, which will result in users losing confidence in the application, the DEX project will get shut down, developers will have to leave IC, and eventually, IC will become no man’s land.

## 2. 其他困扰开发者的IC技术问题

我也收集到不少困扰社区开发者工作的技术问题，虽然跟SNS-1发售没有直接关系，但也反映目前在IC上搭建应用的困境，我一并列在下面。

### 2.1. 关于Canister Output Message Queue Limits问题

一个用户请求如果包含多个await的链条，当这个请求没有处理完的情况下。其他用户请求进来之后，他们 await 会相互穿插，这样的话 output queue 的数量就会飙升然后超出限制最后报错。一般正常大型项目，都会代码重构内部调用的，如果 canister 不区分内部 await 和外部 await 的话，那就很难处理并发，像 DeFi 这种项目就很难去实现。

帖子链接：[Canister Output Message Queue Limits, and IC Management Canister Throttling Limits - #17 by bitbruce](https://forum.dfinity.org/t/canister-output-message-queue-limits-and-ic-management-canister-throttling-limits/15972/17)

### 2.2. 使用 Motoko时候，升级 canister遇到“Heap out of bounds”错误

当 canister 占用内存稍微大一点时候（例如70M），升级 canister 就会出现 Heap out of bounds 错误。

帖子链接：[Heap out of bounds ， use motoko - #11 by bitbruce](https://forum.dfinity.org/t/heap-out-of-bounds-use-motoko/10497/11)

### 2.3. 用户如何连接到正常工作的节点？

当用户从 canister 获取数据时，路由由 ic0.app 代理，如果被路由的节点不能正常工作，那么用户将获取到错误的数据。因此，用户需要一个可以选择的节点列表。并让 ic0.app 路由到正常工作的节点。

帖子链接：https://forum.dfinity.org/t/how-users-can-connection-a-node-that-work-properly-we-may-be-getting-the-wrong-data/16856

### 2.4. Trie 数据结构 的 bug

Trie在filter时存在错误，Trie.get()/Trie.find() 无法返回数据。

帖子链接：[A Trie.filter() Bug](https://forum.dfinity.org/t/a-trie-filter-bug/12620)

GitHub：[Bug: user reported bug in `Trie.filter` · Issue #369 · dfinity/motoko-base · GitHub](https://github.com/dfinity/motoko-base/issues/369)

[github.com/dfinity/motoko-base](https://github.com/dfinity/motoko-base/issues/427)

#### [Trie.get()/Trie.find() does not return data, but the data is present.](https://github.com/dfinity/motoko-base/issues/427)

opened [date=2022-11-16 time=04:18:06 format="ll" timezone="UTC"]

closed [date=2022-11-24 time=11:14:45 format="ll" timezone="UTC"]

[![iclighthouse|20x20](https://global.discourse-cdn.com/business4/uploads/dfn/original/2X/1/16424601a3b18715861d55a8e41ef5a10d1ed23b.jpeg) iclighthouse](https://github.com/iclighthouse)

We had this issue during a stress test. orders used the Trie module and had a to[…](https://forum.dfinity.org/t/is-my-5-year-dream-of-icp-and-dfinity-shattered-is-there-still-a-future-sns-1-decentralization-sale-questions/17174/6)

### 2.5. Nat 序列化问题

Nat 作为一个 Canister 开发的基础类型，不支持除 candid 之外的 rust 标准序列化（如cbor\json\bincode），需要添加支持来方便开发者自行实现序列化优化。

或者可以给出最佳的序列化、反序列化解决方案 ，序列化之后的大小和序列化/反序列化效率两者都要兼顾。

GitHub：[As a developer, I want to [Nat] support bincode/serde_json/cbor deserialize · Issue #374 · dfinity/candid · GitHub](https://github.com/dfinity/candid/issues/374)

### 2.6. 边缘节点负载

因为icp边缘节点和browser之间不能建立长链接，因此为了保证性能，我不得不一次将所有的请求发给边缘节点。

当我发送这些请求，无论是获取数据还是上传数据，在超过一定阈值后边缘节点的反馈都将变得非常不稳定，很多请求在超过一定阈值（大概短时间获取300M左右数据）就会变得难以保证 QOS。

解决方案：拒绝 POST 请求的条件应该更改或者尽快增加 websocket。

### 2.7. 为 II 添加可选的唯一 Principal ID

II是一个非常好的登录方式，但是Principal的不一致让Dapp之间难以互通身份。

应该给用户更多选择。II 在登录界面应该加一个参数，或者用的手段，可以让用户选择是否在不同的 Dapp 之间保持统一的 Principal ID。

### 2.8. 优化大文件的上传与下载

当一个大文件上传和下载的时候，为了保证上传和下载的速度，我需要分别：

* 上传时，我需要将文件切成 n 个 2M 大小的文件块，才能上传。
* 下载时， 我每次可以 get 到 3M 大的数据。

但是，如果一个文件很大，我要获取到所有的数据，只有两个方案：

* 把所有的update请求或者query请求发给边缘节点
* 建立长链接,走http_request，但是http_request的鉴权十分麻烦

解决方案：

* 建立边缘节点websocket长链接（长期建议）
* 增加单ip 发post和get请求的负载（短期建议）

### 2.9. 优化 motoko-base 库

Motoko-base库的数据结构算法比较粗糙，效率较低，使用 RBtree 和 Trie 在删除数据时不整理结构，导致空间不断增长。

Motoko-base库的单元测试不全面，没有经过大量测试、边界测试，存在不少 BUG。

![|32x32](https://github.githubassets.com/favicons/favicon.svg)[GitHub](https://github.com/dfinity/motoko-base/issues)

![|690x345](upload://euOSJCZmVapm6kSyMa4pRzkzyF4.png)

### [Issues · dfinity/motoko-base](https://github.com/dfinity/motoko-base/issues)

The Motoko base library. Contribute to dfinity/motoko-base development by creating an account on GitHub.

https://github.com/dfinity/motoko-base/pulls

### 总结

上面的这些问题，开发者普遍反映DFINITY基金会重视程度不高，严重影响他们的开发进展。试想一下，以下一个或多个问题会导致开发者的DEX应用失效，甚至丢失用户资产，这会导致用户对应用失去信心，DEX项目将关闭，应用开发者流失，最终IC变成无人之地。

-------------------------

lei | 2022-12-08 09:57:50 UTC | #4

## 3. Questions about the Foundation’s engineering culture

It seems that with these specific examples above, we should think about whether there is an endogenous problem with the DFINITY Foundation engineering culture.

### 3.1. Lack of crypto Mindset

IC, as a decentralized public blockchain network, should maintain the crypto philosophy of thinking **(Decentralization, Permissionless, Composabliltiy)** and embraces the crypto experience and habits that are central to continued innovation, fostering a healthy eco-system, and ultimately winning. Clearly, IC hasn’t been doing a very good job of this.

DFINITY’s ignorance of the crypto user experience and development experience is exposed in the design of II, NNS, Infrastructure, and most recently SNS-1 sale. For example, SNS-1 does not take into account the most basic resistance to sybil-attacks, and the experience of using II, for example, is very different from crypto wallets such as Metamask. This directly led to difficulties in migrating the core users, assets, and developers of the existing crypto world to IC.

DFINITY’s R&D team clearly does not know enough about crypto. The infrastructure and architecture of DFINITY’s development on IC is excellent and solid, but many of the anti-crypto designs are inconvenient for developers.

This gives the community the impression that IC seems to care nothing about crypto users and developers, and the community has a hard time imagining and identifying with a team that lacks a crypto philosophical mindset and is building an infrastructure that will lead the crypto world.

To this end, my recommendations are to

* Raise awareness of crypto mindset among the R&D team and conduct crypto onboarding for new employees;
* Streamline the team, change the composition of the R&D team, and recruit more crypto-native employees, especially for product manager positions;
* Invite teams from other mature crypto ecosystems to peer audit the product design and code;
* Increase collaboration and communication with the crypto industry.

### 3.2. On the Foundation’s accountability mechanisms and transparency

At the end of 2021, NNS passed 25 roadmap proposals at once through governance, and almost all of the milestones are currently undelivered on time. The community and developers have been notified of delays time and time again, many projects have died while waiting, and the IC network looks to be at a standstill.

Since the DFINITY Foundation has taken the initiative to propose and undertake the work, what is the accountability if the related work is postponed or the code quality is not up to par? How to be accountable to the developers and users of the whole IC? If a feature cannot be delivered, does it need to be handed over to another team for development?

The governance of the code is also worrisome. The unit testing of the base library is not comprehensive and the community is allowed to use it without extensive testing and boundary testing. Some bugs that could have been found in testing existed in the codebase for a year until they were discovered by community developers reading the source code. This made the community start to worry about the Foundation’s capabilities.

At the same time, the community had no idea of the progress of the Foundation’s internal R&D team, and there was a serious lack of transparency. While much of this is an internal Foundation matter, proposals for the roadmap are voted on collectively by the community NNS, and the community has a right to know the details.

To that end, my recommendation is this.

* Allow the community to pass work on to another DFINITY team or community team through NNS governance if milestones are not reached on time
* Expand the size of the working group and invite community developers to monitor the development progress

### 3.3. Long-term neglect of the real demands of community developers

No response to the needs and questions from the community developers. No accurate roadmap and timeline for the community’s requests such as “decentralized boundary node”, “multi-replication subnet”, “DeFi subnet”, etc. the frustrated developers even had to rely on me, as a non-technical investor, to get the word out to DFINITY for bug submission.

Many dapp developers had to stop working because they had to wait for official changes to the core protocol. As a result, demand has not been met and some community developers have given up on the IC network, even for some of the best developers who won awards at the Supernove hackathon.

### 3.4. The DFINITY Foundation does too much of the application layer itself

Psychedelic/Fleek, once one of the most important developers in the IC community, sparked a big IC community discussion six months ago, in which one of their core ideas was that DFINITY should focus on the underlying protocol rather than the upper application services. The most recent development I’ve seen is that Psychedelic/Fleek has left the IC ecosystem for good.

Indeed DFINITY does not only provide the underlying capabilities but always tries to guide developers’ thinking at the application level and has developed some user-oriented products into the market by itself.

This is not fair to eco-developers, which not only squeezes the living space of community developers and puts them at a non-branded competitive disadvantage, but also greatly stifles the possibility of new applications and paradigms emerging.

In contrast, IC is not well documented and there is a serious lack of infrastructure and toolkits. Clearly, there is a serious lack of work here.

As an infrastructure, it should maintain its purity, i.e., allow developers to explore any type of application on it, without discriminating against any one application. Diversity is the foundation of a thriving ecosystem and the secret to the success of the ETH ecosystem. A thriving application within the ecosystem is a truly thriving one. No public chain makes the ecosystem prosperous by making its own applications.

For this reason, my advice is this.

* DFINITY’s R&D team should focus on the protocol layer and toolkit；
* Improve developer documentation；
* Stop guiding developers at the application level and stop launching new dapp in the name of DFINITY；
* Stop actively using NNS to add privileges to official DAPPs；
* If DFINITY has to develop a demo, follow the principle of modularity and replaceability。

In a nutshell, I hope DFINITY learns from this gentleman
https://www.youtube.com/watch?v=1VgVJpVx9bc 

## 3. 对基金会工程文化的问题

看来上面的这些具体例子，我们应该思考一下，是不是DFINITY基金会工程文化有内生性的问题。

### 3.1. 缺乏 crypto 土壤

IC 作为一个去中心化的公共区块链网络，保持 crypto 的哲学思维（无准入、可组合、去中心化），接纳 crypto 的经验与习惯是必须的，这也是持续创新、吸引生态，并最终获胜的核心。显然，IC 在这方面做的不好。

在 II、NNS、基础设施，以及最近的 SNS-1 的设计中，DFINITY 对 crypto 用户体验、开发体验的无知都暴露了出来，比如 SNS-1 没有考虑到最基本的抗女巫攻击，比如 II 的使用体验与 Metamask 等 crypto 钱包有很大的不同。这直接导致了加密的核心用户、资产与开发者很难迁移到 IC 上来。

DFINITY 的 R&D 团队显然对 crypto 的认识不够。 R&D 团队的大部分雇员都来自 IBM 与谷歌等传统科技公司，对 crypto 并不熟悉，很多设计与思路甚至与社区背道而驰。DFINITY 在 IC 上的开发的基础设施与架构非常优秀，但是很多反 crypto 的设计却给开发者带来很多不便。

这给社区的感觉是 IC 似乎完全不在乎 crypto 的用户与开发者，社区也很难想象和认同一个缺少crypto哲学思维的团队，正在构建一个引领crypto世界的基础设施。

为此，我的建议是：

* 提高 R&D 团队对 crypto 的认识，开展 crypto 的入职培训
* 精简团队，改变 R&D 团队组成结构，招募更多 crypto Native 员工，特别是产品经理岗位
* 邀请其他成熟 crypto 生态系统的团队对产品设计与代码进行同行审计
* 与 crypto 行业加强合作与交流

### 3.2. 关于基金会的问责机制与透明度

在2021年底，NNS 通过治理一次性通过了 25 个路线图提案，目前几乎所有的里程碑都未按时交付。社区与开发者一次次被通知延期，很多项目在等待中死亡，IC 网络看起来陷入了停滞。既然 DFINITY 基金会主动提出了相关提案，并承担了工作，如果相关的工作被延期后，或者代码质量不达标，该如何问责？如何向整个 IC 的开发者与用户负责？如果无法交付功能，是否需要交给其他团队开发？

代码的治理也令人堪忧，base 库的单元测试不全面，没有经过大量测试、边界测试就让社区使用。一些在测试中就可以发现的 BUG，却在代码库中存在了一年之久，直到被阅读源码的社区开发者发现。这不由得让社区开始担心基金会的能力。

同时，社区对基金会 R&D 团队内部的工作进度一无所知，严重缺乏透明度。虽然很多都是基金会内部事务，但是关于路线图的提案都是由社区 NNS 集体表决，社区有权利知晓细节。

为此，我的建议是：

* 如过里程碑未按时达成，允许社区通过 NNS 治理将工作转交社区团队接手
* 扩大 working group 规模，邀请社区开发者，对开发进度进行监督

### 3.3. 长期忽视社区开发者的真实诉求

社区开发者普遍反映的需求、问题未得到回复。对社区提出的“去中心化边缘节点”、“多复制子网”、“DeFi 子网”等诉求，没有给出任何准确的路线图与时间表。甚至连 BUG 的提交，还得依靠我这个投资人来向 DFINITY 传话。

因为不得不等待官方对核心协议进行修改，很多 dapp 开发者只能停止工作。因此需求一直得不到满足，一些社区开发者已经放弃了 IC 网络，甚至不乏在 Supernove 黑客松上获奖的优秀开发者。

### 3.4. 基金会亲自做太多的应用层

曾经是IC社区最重要的开发者之一Psychedelic/Fleek，半年前引发过一次IC社区大讨论，其中他们一项核心观点是，DFINITY应该专注在底层协议而不是上层应用服务。我看到最近进展是，Psychedelic/Fleek已经离开了IC生态。

的确DFINITY 并不止于提供底层能力，而是总是试图在应用层面上引导开发者的思路，并自行研发了一些面向用户的产品投入市场。

这对生态开发者来说并不公平，这不仅挤压了社区开发者的生存空间，让其处于非品牌的竞争劣势中，还极大的扼杀了新应用、新范式出现的可能。

与之相对的是，IC 的文档并不齐全，基础设施与工具包严重缺乏。显然，这里的工作是严重不足的。

作为一个基础设施，应该保持其纯粹性，即允许开发者在其上探索任何类型的应用，而不应该歧视任何一种应用。多样性是一个生态系统繁荣的基础，也是 ETH 生态成功的秘诀。生态内的应用繁荣，才是真正的繁荣。没有哪个公链是靠自己做应用让生态繁荣的。

为此，我的建议是：

* DFINITY 的 R&D 团队应该专注于基础和工具包的开发
* 完善开发者文档
* 停止在应用层面引导开发者，不再以 DFINITY 的名义推出新的 dapp
* 禁止主动利用 NNS 为官方 DAPP 添加特权

一句话总结，我希望DFINITY向这位先生学习：https://www.youtube.com/watch?v=1VgVJpVx9bc

-------------------------

lei | 2022-12-08 09:42:47 UTC | #5

## Final Words

Internet computer is a dream that we all look forward to and is gradually approaching. However, I’m deeply concerned with the NNS/SNS team, part of the DFINITY R&D team that should be leading us toward the dream instead of away from the dream with their slacking and irresponsibility.

It takes great courage for IC developers and entrepreneurs to invest their time and money in research and development products on a brand-new blockchain infrastructure. As we all know about the IC eco-system, there is not a mature business model to make a profit yet, every moment for them has become a huge pressure.

But the current response from DFINITY is a variety of blame shifting and clear responsibility, and this phenomenon has been happening more than once or twice. DFINITY operating like a company should have been effective and efficient.

I believe it is the common responsibility of not only the employees but also the enthusiasts, IC developers, and investors like me to step out and restore the reputation of DFINITY. If the real mistakes are not corrected in time, how can we build an efficient and dynamic community? How can we realize the dream of the internet computer if we do not correct the real mistakes before it’s too late?

From the heart of a person who insists on five years of dreaming of the deepest love of IC

## 最后的话

互联网计算机是一个我和大家都期待的梦想，而且现实也是逐渐朝着这个梦想一步步接近，可我观察到做为这个梦想主导方之一的的NNS/SNS团队各种的怠工与不负责任后，感到由衷的担忧。

公司化运营本应是高效的，创业者当初雄心勃勃的在一个全新生态敢于投入资金研发产品，是一种很大的勇气，ic的现状大家都知道，还没有一个成熟的盈利方式，每时每刻对于他们来说都成了一种巨大的压力，可目前反应出来的是各种的推诿与撇清责任，这个现像并不是一次两次，维护DFINITY声誉不光是企业员工的责任，也是像我这样的爱好者及IC生态从业者和投资者的责任，可如果面对各种真正的困难还不及时改正，又如何打造一支高效的，活力的，有梦想的精锐之师，我又如何实现世界计算机梦想。

来自一个坚持五年梦想最深爱IC之人的肺腑之言。

-------------------------

Manu | 2022-12-08 10:32:09 UTC | #8

Thank you very much @lei for taking the time to write down your thoughts in so much detail, and I personally think there's a lot of valuable feedback in there. 

Some initial responses: 

[quote="lei, post:2, topic:17178"]
His analysis identifies the cause of the performance issues mentioned in 1.3 and suggests solutions, but does not provide satisfactory answers for issues such as the problem with repeat charges and other issues. And I hope to see NNS/SNS team come forward to provide their post-mortem.
[/quote]
I expect more post mortems to be shared on those parts very soon. 

[quote="lei, post:2, topic:17178"]
Why did 5 of NNS subnet’s 34 nodes go offline during the initial SNS-1 sale?
[/quote]
Can you clarify this point? I am not aware that NNS nodes went offline during the SNS1 sale. (also minor detail, the NNS subnet is 40 nodes now). 

[quote="lei, post:4, topic:17178"]
No response to the needs and questions from the community developers. No accurate roadmap and timeline for the community’s requests such as “decentralized boundary node”, “multi-replication subnet”, “DeFi subnet”, etc. the frustrated developers even had to rely on me, as a non-technical investor, to get the word out to DFINITY for bug submission.
[/quote]
I think this is not entirely accurate. For example for boundary nodes, this is being worked on, see https://forum.dfinity.org/t/boundary-node-roadmap/15562 for the roadmap. The high replication subnet for eg defi is on our [public roadmap](https://internetcomputer.org/roadmap) and I expect it to be launched next week. 


I will share this post more widely in dfinity so more people can comment on some of your other feedback.

-------------------------

Astrapolis-peasant | 2022-12-08 10:40:56 UTC | #9

Some ideas to add, what's the timeline for allowing community run full nodes and rpc support for blocks data? It's been talked since the beginning of the year

-------------------------

MillionMiles | 2022-12-08 10:57:44 UTC | #10

I do think this is the call from ICP hardcore fans. Dfinity should have a lessons learn from SNS launch.

-------------------------

daijianlin | 2022-12-08 11:07:52 UTC | #11

First of all, I want to say I love Internet Computer very much since I think I see the blockchain future from the concept of Internet Computer. 

But from the performance of SNS-1 sale, I really don't understand what are the declared 270+ ppl doing everyday? Maybe should learn from Elon Musk that fired 80% of Twitter employees?

-------------------------

NickM | 2022-12-08 11:10:30 UTC | #12

This is a great piece of work. I hope the Foundation get their highlighter pens out and allocate each section to the appropriate team for action. 

Thank you!

-------------------------

tdammy64 | 2022-12-08 11:17:30 UTC | #13

They have a problem of following their tokenomics.

Half of the public sale token was supposed to be unlocked, but they locked both for alot of people. And they refused to unlock it.

-------------------------

A9icp | 2022-12-08 11:18:32 UTC | #14

Regarding the long post feedback from the host, I think it reflects the aspirations of the community in a more comprehensive way. The foundation should really listen to the voice of the community instead of closing itself in its own circle and building a car behind closed doors.

-------------------------

Astrapolis-peasant | 2022-12-08 11:26:11 UTC | #15

It’s the SNS subnets. During the sns1 sales, 5 of 34 nodes were offline and right after the sale, the sns subnet went offline completely. Here is the screenshot from the dashboard
![image|690x248](upload://7OtNyXvYuzvond3ar7BIyb4WiLQ.jpeg)

-------------------------

C-B-Elite | 2022-12-08 11:27:19 UTC | #16

During the SNS Sale Time, we saw:
![WeChat24f3953f8702fc1fc5f233336a88f458|690x41](upload://yUvaFQPRfIpU2fArMhx7NwbCl9N.jpeg)

![WeChatd739163b5e10c9cf3e0f3d21b25f79c5|690x248](upload://eUZrzhlRFvOXsfh6xDfkGARSmkk.jpeg)

-------------------------

emiss | 2022-12-08 11:50:56 UTC | #22

You spend 1million on a website? Bro you got cheated man.

On a more serious note.. SNS-1 is a test so mistakes made can be forgiven (for me at least). Give IC one last chance to make things right.

-------------------------

Manu | 2022-12-08 11:59:17 UTC | #26

I see, so you think @lei meant the SNS subnet, not the NNS. Makes sense, thanks!

-------------------------

cryptodriver | 2022-12-08 12:03:07 UTC | #27

This is the voice of community. So, dom, stop talking about the rival blablabla…nobody cares about dfinity, not mention to taking dfinity as rival.

-------------------------

cyaolong | 2022-12-08 12:10:41 UTC | #30

One EXAMPLE: 
https://twitter.com/dominic_w/status/1600525952798310405
Something like this just make me more worried about what they focus on right now. If they want to help developers to build wallet apps, shouldn't they pay more attention to build the infrastructures for wallet app rather than imagine how to develop different DApps? Here DOM even want to bind all wallet apps with Internet Identity. You call this crypto? I can't disagree more.

-------------------------

Manu | 2022-12-08 12:10:41 UTC | #31

[quote="Astrapolis-peasant, post:9, topic:17178, full:true"]
Some ideas to add, what’s the timeline for allowing community run full nodes and rpc support for blocks data? It’s been talked since the beginning of the year
[/quote]

You can already register yourself as node provider, see https://wiki.internetcomputer.org/wiki/Node_Provider_Onboarding. Making it easier to become a node provider is being worked on and you can follow the progress here https://forum.dfinity.org/t/the-state-and-direction-of-decentralization-nodes-on-the-internet-computer/9170. 

Wrt making blocks publicly available, there is a forum discussion https://forum.dfinity.org/t/discussion-public-subnets/16503?u=manu, but there isn't clear agreement yet on this topic.

-------------------------

xiaonansheng | 2022-12-08 12:12:36 UTC | #32

Dfinity真的需要好好自我反省，别再让全球的IC家人伤心了

-------------------------

Manu | 2022-12-08 12:25:30 UTC | #33

[quote="daijianlin, post:11, topic:17178"]
But from the performance of SNS-1 sale, I really don’t understand what are the declared 270+ ppl doing everyday? Maybe should learn from Elon Musk that fired 80% of Twitter employees?
[/quote]

[quote="cyaolong, post:30, topic:17178"]
Something like this just make me more worried about what they focus on right now.
[/quote]

SNS is just one of the many topics that DFINITY works on, and only a small fraction of the resources are spent on this. I see multiple people saying that they wish DFINITY would spent less effort on the application layer and focus more on the protocol layer, so they should be happy to hear that we spend the majority of our efforts on the core protocol.

I think we can reasonably say that the core protocol has made a lot of progress and is improving rapidly. In 2022 we released all of these features in the core protocol (and I'm probably forgetting some):
- HTTP outcalls
- Bitcoin integration & Threshold ECDSA
- Canisters can have 32GiB of memory & stable structures to support that
- allow for installing gzipped canisters
- deterministic time slicing (allowing for longer running messages)
- node key rotation
- allow subnets to hold more replicated state
- canister timers
- a performance counter for profiling canisters

-------------------------

Astrapolis-peasant | 2022-12-08 12:33:00 UTC | #34

I mean community full nodes not consensus nodes.

-------------------------

Manu | 2022-12-08 12:41:56 UTC | #35

Ah i see, thanks for clarifying. So that would rely on https://forum.dfinity.org/t/discussion-public-subnets/16503. I would personally really like to see this move forward as well.

-------------------------

charm | 2022-12-08 12:43:29 UTC | #36

dfinity should really think about it, the community is really tired

-------------------------

dsarlis | 2022-12-08 12:48:23 UTC | #37

Further to Manu's point, I'd really encourage people to read [this](https://forum.dfinity.org/t/update-on-the-ic-roadmap-july-2022-summary/14615?u=dsarlis) post. It contains the breakdown of R&D members on different parts (core protocol, NNS/SNS etc). As you can see from that, 43% of R&D is working on core protocol and we have shipped many (complex) features this year as Manu said. So, I'm not sure this criticism was very fair.

-------------------------

daijianlin | 2022-12-08 12:56:06 UTC | #41

[quote="dsarlis, post:37, topic:17178"]
Further to Manu’s point, I’d really encourage people to read [this ](https://forum.dfinity.org/t/update-on-the-ic-roadmap-july-2022-summary/14615) post.
[/quote]

More than four months have passed, I was wondering why there is not any update? It seems that the R&D need the community to push up for providing this planned things as always.

-------------------------

blockpunk | 2022-12-08 12:55:06 UTC | #43

Sadly, when our developers submit bugs and requests, they are told that the foundation is working on SNS and that other work may be set to non-urgent. It's disappointing that SNS-1 gave us this result.

-------------------------

charm | 2022-12-08 13:01:28 UTC | #47

[quote="Manu, post:33, topic:17178"]
花
[/quote]

dfinity should really think about it, the community is really tired

-------------------------

claudio | 2022-12-08 13:03:20 UTC | #48

> 2.1. Question about Canister Output Message Queue Limits

2.1 the new `async*`/`await*` in [Motoko 0.7.4](https://github.com/dfinity/motoko/releases/tag/0.7.4) addresses one half of this (producing fewer self sends with a modest rewrite of code that uses local asynchronous functions). 

For Motoko, we are actively working on fixing the other half - allowing the user to recover from queue full errors instead of trapping -  but that's turning out to be trickier than we thought and will take time.

I also know that the replica team have been considering the possibility of raising the queue limits, though this is harder since some back-pressure must be applied.

> 2.2 Heap out of bounds" error when upgrading canister with Motoko

It's still not clear what is causing the error.  We have a suspicion and  suggested a workaround. I have also been thinking about how we could arrange to reduce memory consumption of serialized `Blob`s and have a solution in mind.

Ideally, we would need a smaller repro for that issue to diagnose the root cause, although I appreciate that might be hard to produce.

> 2.4. Bug of Trie data structure

This is fixed in Motoko 0.7.4 (Motoko base tag moc-0.7.4). Thanks for reporting and  helping us track down the bug. I still think that data structure needs further improvement though.

> 2.9. Optimizing the motoko-base library

This is valid but we are working on improving the correctness, performance and test coverage and have already pushed tests of some old functionality and tested new improvements. Covering the entire base library will take time.

I agree that base needs more testing (especially of older libraries) and development in some areas and that this should be ideally be prioritized over any other non-critical work.

-------------------------

daijianlin | 2022-12-08 13:04:35 UTC | #49

[quote="blockpunk, post:43, topic:17178, full:true"]
Sadly, when our developers submit bugs and requests, they are told that the foundation is working on SNS and that other work may be set to non-urgent. It’s disappointing that SNS-1 gave us this result.
[/quote]

Then @Manu how to explain this kind of things? I believe @blockpunk is a key developer from the IC community that contribute a lot to the community especially to the Chinese community.

-------------------------

caolw | 2022-12-08 13:07:16 UTC | #50

Don't think a bear market ecological malaise is normal. Listen to the community developers. ic is helping them. They're not working for ic.

-------------------------

cyaolong | 2022-12-08 13:16:35 UTC | #51

It is true that the official team has developed a lot of basic work, but the result? It has been a year and a half since its launch so far, how many ecological applications are running well or give full play to the advantages of IC? 
Yes, you may say Distrikt and Entrepot. As for Distrikt, how many users would like to use it instead of web2 social products? And Entrepot, the NFT standard is terrible for every new users to onboard. Compared with the Ethereum projects, these two projects have no obvious advantages, and their user experience is not much greater than web2 products. Why do users come and play?
Recently, even many projects including hackathon award-winning projects have left IC. I believe they will not make this decision without encountering insurmountable difficulties. As Peter Drucker said, start with the end. If the result is bad, it only means that most of the work is useless or it's not the point you guys should focus on right now.

-------------------------

lixx | 2022-12-08 13:15:00 UTC | #53

The third part is the most important

-------------------------

cyaolong | 2022-12-08 13:19:19 UTC | #54

Without a fast growing ecosystem DApps and the users they bring, IC is meaningless to anyone, only the Dfinity dev team think they have made something great but no one recognizes it.

-------------------------

Zane | 2022-12-08 13:25:06 UTC | #55

Some important NNS upgrades such as periodic confirmation got postponed too cause the team was busy working on the SNS. Maturity modulation somehow managed to slip through tho, despite being approved at a later date and with less approvals.
That makes it look like internal pressures are more effective than community's feedback to shift priorities around.

-------------------------

cyaolong | 2022-12-08 14:32:49 UTC | #56

And one more example to illustrate: The Principal ID. Dfinity thinks that users need security and privacy protection so they design delegation identity mechanism. But what the team didn't see is that users just want a unified address/ID across different DApps.
For now, different wallets can't import from each other because they use different algorithm. Users will only get different wallet address in different DApps if they use Internet Identity. Are you telling users to make more transactions when they switch DApps? Users say "No, it's inconvinient. The user experience of wallets on Ethereum are much easier. Goodbye".
Listen and observe more on users' demand please, rather than doing what you think it's great.

-------------------------

peterparker | 2022-12-08 13:30:43 UTC | #57

[quote="cyaolong, post:56, topic:17178"]
But what the team didn’t see is that users just want a unified address/ID across different DApps.
[/quote]

Like I answered in the other [thread](https://forum.dfinity.org/t/backlog-of-developer-claims-hope-to-be-resolved-soon/17175/5?u=peterparker), this is already totally supported and feasable - it's up to the developer.

-------------------------

daijianlin | 2022-12-08 13:33:57 UTC | #58

Thanks for sharing, I think so, it is really inconvenient to use Internet Identity in different platforms since they generate different addresses.

-------------------------

timo | 2022-12-08 13:40:43 UTC | #59

I am trying to understand the expectation here. You don't have to use Internet Identity at all. You can just write a frontend or browser extension that takes in a private key or seed phrase or connects to a hardware token and uses the same key for everything (i.e. same principal everywhere). Why does nobody do that? Is the expectation that the foundation writes the "Metamask for IC"? I ask because I hear in other places that the foundation should not work on things on that level. Hence the question, what is the expectation?

-------------------------

Manu | 2022-12-08 13:43:58 UTC | #60

That does not sound good. Could you maybe share some examples so I can follow up?

-------------------------

samuelburri | 2022-12-08 13:49:26 UTC | #62

@lei I truly appreciate your extensive feedback. As @Manu  writes above, we plan to have a first response/summary about the lessons learned from the SNS-1 launch posted later today, addressing most of your SNS concerns. But your feedback goes beyond that. We will not be able to answer all questions within a day but I will make sure we answer them as well in the next days.

-------------------------

bouen | 2022-12-08 14:31:35 UTC | #63

In this matter and what we have experienced last few days with the SNS-1, I posted my worries about the SNS-1 and BTC integration on Discover, 8 days ago. 

https://dscvr.one/post/6443417/sns1-questions-answered

The ease 'bots' could make use of the contract before launch, It made me question the BTC integration:

- Are we fully certain this is attack-proof in any way?
- Has it been audited by any external party? 

Especially when it comes to something big as the BTC integration, we as a community cannot handle any failure. The way the Dfinity-team has evaluated the SNS-1 product upon launch, makes me question the safety of all products... Sadly (and probably not even fair), but present.

-------------------------

lei | 2022-12-08 14:27:37 UTC | #64

I think I have summarized the community's technical requests, in the second part above, some of which have been backlogged for a long time.

-------------------------

THLO | 2022-12-08 14:57:27 UTC | #65

[quote="bouen, post:63, topic:17178"]
It made me question the BTC integration:

* Are we fully certain this is attack-proof in any way?
* Has it been audited by any external party?
[/quote]

Obviously, there is no such thing as 100% security but the Bitcoin integration has undergone a significant amount of testing and verification, on the theoretical as well as the implementation level, both internally and using an external party.

-------------------------

Sormarler | 2022-12-08 15:04:01 UTC | #66

Why do we call the botting of SNS 1an attack when the "attacker"  played within the rules?

-------------------------

weedpatch2 | 2022-12-08 15:05:23 UTC | #67

I think this is a comprehensive summation of community feedback and smart investor diligence. Kudos, @lei! I appreciate the responses from each of the respective DF team members.

Due to the broad reach of the feedback, I think this post would be a great one for Dom to respond to. I'd like to know his responses, from his top-down perspective. I respect him as a world class cryptographer, but I'd like to respect him more as a CEO of the most innovative application of blockchain technology on the internet. If that is not the role he is MORE interested in filling, maybe he should hire a dedicated helmsman, and stick to the crypto?

-------------------------

Sormarler | 2022-12-08 15:15:55 UTC | #68

I suggested that Dfinity create a CEO position a few months ago but the community didn't want to entertain a  discussion. Some Even threaten to quit ICP if that were to happen. It was seen as a move to kick Dom out of his project, which is far from the truth.

-------------------------

Steven | 2022-12-08 16:09:05 UTC | #69

Great post, we need more voice like these from comunity

-------------------------

d3sign | 2022-12-08 16:35:41 UTC | #70

I believe they used Trail of Bits for the BTC integration audit and another unnamed auditor (potentially independent).

-------------------------

dominicwilliams | 2022-12-08 17:18:07 UTC | #71

[quote="lei, post:3, topic:17178"]
2.7. Adding an optional unique Principal ID for II
[/quote]

It's not so much a challenge with II, as a challenge with missing functionality. The Internet Identity system is designed to prevent a user being tracked across dapps in default usage. Each dapp sees a different pseudonym, not the original II anchor. The way to solve this is with II "capabilities," which also solve for smart contracts that run at different security levels. For example, imagine a Web3 gaming smart contract tagged "Game" that is being run on a single node subnet (i.e. at the mercy of the operator, with no security, but running with high efficiency). How could that be trusted to send an instruction to the game's "bank" smart contract that has been tagged "Fiduciary" (i.e. that is running on a 34X or higher subnet, which also has a bunch of features to make it very secure, but which increases cost beyond which would be acceptable for in-game action). The answer is that it would ask the user to sign a capability using II, which would be human readable (e.g. "Scope: Game XYZ Bank\n Action: Transfer\n What: BTC\n Amount: 100,000 satoshis\n From: Shoan\n To: Dom"). The game smart contract would call the bank smart contract instructing it to make the transfer, passing the capability in a parameter, and the bank smart contract would validate the capability before executing the transfer. There are a number of advantages with capabilities, including that when user interacts with Service A, and Service A instructs Service B, they do not have to trust that Service A will properly instruct Service B. There are a huge number of problems with the fixed principal model used on Ethereum and other blockchains, and they extend far beyond privacy into security (Googling security capabilities will go through them in depth). Adding the capability signing feature to II should not be difficult and is urgently underway on my instruction

-------------------------

dominicwilliams | 2022-12-08 17:29:43 UTC | #72

[quote="lei, post:2, topic:17178"]
The crypto industry already has well-established sybil-attack solutions for airdrops or token launches (of course each with its own advantages and disadvantages). Even within the IC ecosystem, there have been proposals like DOM’s favorite project People Parties
[/quote]

Proof of Personhood via People Parties is the ultimate solution for secure airdrops (or for boosting neuron voting power on a per-anonymous-human basis, and things like that), and people could even prove personhood specifically to participate in something like an airdrop, albeit there may be other solutions that trade security for less friction. It's a shame that People Parties kinda got deprioritized, and there's a lesson there. One of the reasons this happened is that in some quarters of the community there were a lot of loud voices that said we shouldn't work on Internet Identity, the SNS framework, or the People Parties framework, among other things, and that only the community should work on such infrastructure. People Parties were partly deprioritized for that reason as a concession. In hindsight, I think we can all see that was a mistake. Lots of projects really need that functionality, and it hasn't just magically appeared. We need the DFINITY Foundation to develop and contribute these foundational components, to guarantee that they are available for use by everyone. If people want to build alternative systems, or extend what DFINITY contributes, fine, but DFINITY should not step back because the ecosystem is still nascent. Also, I hear you that there ARE community solutions out there, and I think that if they are working and sound, they should have been used in the SNS-1 launch. There needs to be an evaluation of whether they can be incorporated into the next SNS launch and decentralization sale (worth remembering that SNS-1 was *conceived a test* that would reveal problems, which it certainly has, so the next will be different...)

-------------------------

dominicwilliams | 2022-12-08 17:36:49 UTC | #73

[quote="lei, post:2, topic:17178"]
Even if you encounter the traffic of Black Friday online shopping, users may face long delays, service degradation, or even service interruption, but basic functions must also be guaranteed, and users should not pay more than once!
[/quote]

We need to wait for the forthcoming postmortem to understand what happened here. This shouldn't happen in any system of exchange, let alone in a crypto one. My guess is that it relates to smart contract asynchrony, and requests being made more than once. For example, the user sends a transfer, and then sends another transfer before the first has been received/processed. This results in the first transfer resulting in an exchange for governance tokens, and the others being returned to the sender. If this is the case, we need to look into design patterns that can prevent this. But I will wait until the postmortem before assuming what the cause is.

-------------------------

bryant824-kb | 2022-12-08 17:42:41 UTC | #74

a question: if the game smart contract is controlled by a single node, how to prevent from censorship attack, namely how to make sure the game smart contract will send the signed capacity to bank smart contract?

-------------------------

Zane | 2022-12-08 18:06:14 UTC | #75

[quote="dominicwilliams, post:72, topic:17178"]
We need the DFINITY Foundation to develop and contribute these foundational components, to guarantee that they are available for use by everyone. If people want to build alternative systems, or extend what DFINITY contributes, fine, but DFINITY should not step back because the ecosystem is still nascent.
[/quote]

As someone who liked the people party idea a lot I'd like to share my point of view:

The idea was proposed at a time when there seemed to be a lot of feature creep on Dfinity's mind: People parties, Badlands, Endorphin plus all the proposed protocol improvements.
This gave many the impression Dfinity was spreading its resources too thin across multiple projects, People Parties in particular were criticized cause:

- The proposed design had and still has some flaws, some that could be used to game the system and are fixable and others which have to do with usability and can't be mitigated due to how PPs work, e.g people have to do a tedious action every once in a while at a scheduled time.

- Exception made for the NNS integration for governance rewards, they can be implemented by the community.

So why hasn't someone built them? I think there are multiple reasons: some are skeptical about their design, others don't like the idea and others thought Dfinity was already building them. 

You gotta admit communication has been quite lacking on this front. Up until May/January they were on the roadmap and scheduled to release in summer. I had planned to participate in Supernova with a dApp based on the PP PoP thinking it would have been released in proximity of the hackaton's end! It was never communicated they had been dropped until I asked on Twitter!

Not many have the resources to compete with Dfinity, so if we know you guys are already working on something it doesn't make sense to waste resources and time to be outpaced by a better team. As of recently I've been working on a variation of your PP design in my free time and the recent talks on the subject and uncertainty on whether they'll be reprioritized or not on Dfinity's own roadmap got me thinking about switching project. 

The same probably happened to other teams which have decided to focus on other use cases, e.g @modclub 

Maybe it's not that if you don't work on it nothing gets done, but if you announce you'll work on something it's less likely the community will start working on it, simple as.

-------------------------

Astrapolis-peasant | 2022-12-08 18:00:39 UTC | #76

Curious if SNS1 is a test run, why there is no public testnet for end users to participate

-------------------------

dominicwilliams | 2022-12-09 17:28:37 UTC | #77

[quote="lei, post:2, topic:17178"]
1.3. The Subnet node outage and congestion issues
[/quote]

Regarding transactions, we should recognize that a single transaction on the Internet Computer usually involves thousands of times more compute than a transaction on, say, Ethereum. Nonetheless, we need to understand what caused the congestion. Unfortunately other commitments have prevented me deeply digging in to what happened yet, but here is my initial understanding.

1. The subnet was actually processing vast numbers of Update TX. The problem was that the SNS website uses Update TX to pull the data into its pages for security reasons. As congestion grew, and people were refreshing their pages, more and more Update TX were being created! Now, obviously, every Update TX has to pass through consensus, and involves a lot of cryptography, which is why the user experience should primarily rely on Query TX to obtain data (more on why that wasn't done in a moment). Therefore, if we want to stick with the current SNS design, which is security optimized, then we need to make the processing of Update TX much more efficient. Since this is a good thing, and some of the other fixes will take longer, this is what we plan on doing...

2. As it turns out, the bottleneck with Update TX was inefficient cryptography under load. Specifically, when there are large numbers of Update TX, the node machines are verifying the signatures on the TX individually. This is completely unnecessary. There is now work underway to do batch verification of the signatures on Update TX, and perform other optimizations, which will reduce the expense 100X or something (ask Jan C for exact..). We will have this in place before future SNS launches, albeit, given continuing ecosystem growth, I think it is credible that the load on future SNS launches and decentralization sales will be even greater. Therefore once we have optimized Update TX efficiency, we will move on to adding new Query TX functionality, so they are used rather than Update TX in creating a web page (this was always what as intended)...

3. Currently, all canister smart contracts export a Merkle root, which represents internal data that they might wish to return to those issuing Query TX. The smart contract developer only has to add the data structures inside their smart contract's persistent memory pages to an internal Merkle tree, whose root is exported, and their data and objects will be automatically "certified". This is because every 1-2 seconds, the blockchain signs the root of a Merkle tree over the roots of the canister roots, using a subnet chain key that itself is signed by the ICP master (NNS) chain key. This allows data to be returned to those making a Query TX has has a cryptographic certification inside an HTTP header, which certification is essentially a Merkle path to a chain key signature. This can then be transparently validated by a service worker running in the web browser (current), or better, a browser that is modified and does the validation itself because it knows the master chain key. The beautiful thing about this system is that it scales without limit. Certified Query TX responses can be multiplied by caching on boundary nodes processing Query TX, say. The developer is pre-finalizing the results of query call transactions with predicable results, or results that have some temporal stability, allowing for vast transaction scaling. However.. while this works great for things like HTML, JS, WASM, images etc that are served into the browser to create the user experience – and typically developers use an asset canister that does all of this Merkle stuff for them – it is more of a pain to do with dynamic data, which is why the SNS developers were using Update TX to securely pull dynamic data into web pages. Here are some exciting solutions being worked on:
**3.1 Special Data Construct That Makes Query TX Certification Easy.** To certify data such as user account balances, which websites wish to display, the developer has to certify nearly everything by placing it into a Merkle tree whose root is exported for signing. That's a pain to code up - which, again, is why the SNS developers chose to pull dynamic data into the web pages using Update TX. One of the solutions being worked on is a special kind of ICP-native data construct, which allows any data structure to be formed, and any data set to be maintained, which automatically does the Merklization on behalf of the developer. Developers who do not want the work of messing with Merklization, can then just build all their data structures using this special construct, and everything will be done for them. Someone is already working on that (shout out Johan).
**3.2 Transparent Network Certification Of Arbitrary Query TX.** Even the solution above does solve for certifying/pre-finalizing all types of Query TX. For example, what if a query call asks for the hash of a submitted value! There is no way to predict the values that users will ask to be hashed, so there is no way to pre-certify/pre-finalize such results, even using the special aforementioned data construct. Moreover, many developers don't want to be forced to use a special construct to build their data structures. They want absolute freedom!! So what to do!? The solution again is fairly simple, and will arrive next year. Essentially, when a Query TX is made, the boundary node that receives it, will first submit it to one replica, and obtain the threshold signed result, which will also specify the block height at which the request was processed. The boundary node will then submit the hash of the result, and ask other replicas, which are randomly selected (not by the boundary node), to threshold sign that they obtain the same result when they run the query call at the same block height (this is possible because the Internet Computer can cache recently finalized versions of the persistent memory pages belonging to canister smart contracts). If enough replicas sign in agreement, the threshold signature shares are combined to sign the query call result. Obviously, if a subnet replica is faulty/cheats, a proof can be constructed and it can be slashed too, providing them with an incentive not to do that. In practice, most people will be happy with the security obtained by having the boundary node only query 2-3 subnet replicas, rather than a deterministically secure quorum of f+1 (which will contain at least one correct node, guaranteeing detection of faulty results), reducing the latency added to the query. This method has the wonderful benefit of allowing the results of completely arbitrary Query TX to be securely signed/certified, including even a query call that asks for the hash of a random value, while also freeing the developer from the need to do anything special in their code at all (no need to Merklize, no need to use a special library etc etc just complete freedom).  The latency added would be minimal, but the existing method of certifying/pre-finalizing query calls that return web assets like HTML and JS would still be typically used as its adds no latency at all to results.

-------------------------

Sabr | 2022-12-08 18:49:05 UTC | #78

What an epic string of posts, @lei. Your passion and painful pleas for the success of the IC are undeniable. No one can possibly accuse you and your criticisms of just spreading FUD. 

At a high level, I think you would probably agree that most of your sections 1 and 2 regarding technical issues can probably be ironed out eventually, and there seem to be some positive reactions from Dom and others on those points. However, like me, I think what you are most deeply concerned about are the systemic issues in section 3 and in your Final Words post. 

These issues are not only part of the root cause regarding the delays and critical fixes in sections 1 and 2, but they are also likely at the heart of why you see your dream being unavoidably shattered. In my view, all of these issues reflect a huge disconnect and power conflict over prioritization. Perhaps the biggest indicator of this conflict is how community-led priorities already approved by the NNS have been consistently delayed and put on the backburner in favor of DFINITY-led priorities.

The root cause of all this conflict comes back once again to what I have been calling the "collective prioritization chasm", which is derived from a longstanding problem in social choice theory. It ultimately reflects the complete inability of the NNS to aggregate many competing priorities into a consistently rational list of collective priorities. To be fair, this is not just a problem for the NNS or DFINITY. It is a problem that every DAO faces and no large organization (let alone DAO) has ever solved to date. 

I have offered to dedicate my time to experiment with solutions to this decentralization problem as part of my upcoming PhD, but DFINITY has declined to accept my assistance. This does not make me hopeful that this systemic conflict between the community and DFINITY will ever be solved or sufficiently reduced. In fact, it will likely only get far worse as the stakes become higher with sizable SNS token economies running on the IC. See my post here for some additional elaboration (and then perhaps we should talk further offline):

https://forum.dfinity.org/t/dfinity-foundation-s-vote-on-governance-proposal-80970-spam-proposal-and-86639-temperature-check/16156/232?u=sabr

-------------------------

InsaneClownPosse | 2022-12-08 18:56:22 UTC | #79

Is there a way for the community to solve this issue or is it a core protocol problem?

-------------------------

dominicwilliams | 2022-12-08 19:29:38 UTC | #80

[quote="lei, post:4, topic:17178"]
IC, as a decentralized public blockchain network, should maintain the crypto philosophy of thinking **(Decentralization, Permissionless, Composabliltiy)** and embraces the crypto experience and habits that are central to continued innovation, fostering a healthy eco-system, and ultimately winning. Clearly, IC hasn’t been doing a very good job of this.
[/quote]

What you say about DFINITY employees not being crypto natives, is true and not true. DFINITY employs a lot of researchers with backgrounds in places like Google Research, and from academic backgrounds. Sometimes they lack some blockchain thinking. However, there are lots of other advantages. For example, they can apply more sophisticated engineering techniques that they draw from e.g. Google, which has allowed DFINITY to operate R&D at scale. It is a simple fact that no other crypto project on earth could deliver the kind of complicated blockchain technology that DFINITY has. Moreover, there are people within the organization who have deep crypto expertise, including me! Ethereum 2.0 looks very similar to one of my 2015 DFINITY designs, which were meant for Ethereum, with a few mods. Everyone now uses BLS, but while I used BLS to generate random numbers from early 2015, and DFINITY employed one of its creators from early 2017, while other blockchain projects took years to start using it. Everyone now is finally looking at using the WASM virtual machine to create their smart contract execution environments, but DFINITY employed its co-creator from early 2017 and has been using it forever. Everybody is now looking at using random numbers to drive blockchains, which was something I pioneered in 2014/15. Aptos is now using a design that runs transactions in parallel, which was something the Internet Computer was doing in 2018. In summary, a lot of cutting-edge blockchain thinking and tech actually comes from the DFINITY Foundation, and the Internet Computer is one of the oldest projects in the crypto industry. Any analysis of the technical history of blockchain shows that we are one of its most important innovators, pioneers and leaders. Albeit there are sometimes gaps in crypto knowledge amongst those working on the project, overall, in terms of our general design philosophy, we know exactly what we are doing.

You also mention decentralization and being permissionless, which is something we also care about, and where we have achieved an enormous amount relative to other blockchain projects. Because this is what we care about, the Internet Computer blockchain runs under the full control of a permissionless governance DAO/the Network Nervous System, which is unique in the industry (every other blockchain relies on a company that orchestrates network configurations and node upgrades behind the scenes). That's why we created a Proof-of-Useful-Work blockchain that runs on a sovereign network of dedicated hardware/node machines, rather than a Proof-of-Stake network hosted by "validators" that are often just software instances running on Big Tech's cloud, which are created at zero cost by running a script, and can be switched off by Big Tech at any moment (as per Solana losing 40% of its network when Hetzner switched off its validators only a couple of weeks ago) and are therefore *not decentralized*. That's why we built a blockchain that can hosts Web3 and DeFi services that run *end-to-end on the blockchain*. In every other blockchain ecosystem, the web experience, and nearly all the data and data processing, lives on Big Tech's cloud, or other centralized traditional tech. The Internet Computer pioneers unprecedented levels of decentralization and permissionless governance. So I think your view there is not fair either.

Regarding the idea that we don't understand "composability," I think idea derives from thinking that arose in parts of the community some months ago. The thinking was that each user needs to have a single principal, so that when they are interacting with a service composed of lots of other services, then all component parts can see who the user is (i.e. that the whole thing can be linked up). This approach unfortunately leads to the same issue that currently exists on other blockchains, namely that all a user's activity can be attributed to them. For example, if I get Bob's EA (Ethereum account) principal, I can see everything that Bob has done on Ethereum. The people propounding this idea claimed that because Ethereum works this way, this was the "crypto way" of doing it. But this belief is entirely mistaken. Crypto does not want to make it easy for users to be tracked to the extent everything they ever do can be attributed to them. Crypto *is concerned* about privacy. Ethereum only works this way because there was no time to do anything different while it was being architected 2014-15 i.e. it's a flaw, not a feature! The solution to composability on the Internet Computer is to use Internet Identity security capabilities, which I have described in an earlier reply in this thread. This allows for composability, while preventing a user's activity across different Web3 and DeFi services to be doxxed.

-------------------------

Sabr | 2022-12-08 19:30:34 UTC | #81

[quote="InsaneClownPosse, post:79, topic:17178, full:true"]
Is there a way for the community to solve this issue or is it a core protocol problem?
[/quote]

If I didn't strongly believe there is a solution to this seemingly intractable problem, or at least a way to reduce its negative impact dramatically, I wouldn't be dedicating the next five years of my life to exploring it more formally. I have already been exploring it less formally for many years, so my confidence is not unfounded.

I'm not even suggesting that we bake collective prioritization capabilities into the core protocol anytime soon, if ever. An offline experimental process could simply be used to inform and guide DFINITY (and the community) towards the path of highest collective welfare when making its own prioritization decisions, or in prioritizing proposals already approved by the NNS. Ultimately, DFINITY could simply choose to ignore this guidance, which is their prerogative as an independent organization. Only if the collective priorities from this process consistently resonate with the community and dramatically reduce prioritization conflicts would it ever make sense to incorporate it more formally into the NNS. It would likely take years to run this experiment sufficiently and to build the necessary community confidence, which is why we should start experimenting with solutions now.

-------------------------

dominicwilliams | 2022-12-08 19:31:24 UTC | #82

[quote="lei, post:4, topic:17178"]
To this end, my recommendations are to

* Raise awareness of crypto mindset among the R&D team and conduct crypto onboarding for new employees;
* Streamline the team, change the composition of the R&D team, and recruit more crypto-native employees, especially for product manager positions;
* Invite teams from other mature crypto ecosystems to peer audit the product design and code;
* Increase collaboration and communication with the crypto industry.
[/quote]

These are things we are already doing. But remember, oftentimes, if you want the most experienced developers, or people who have been working in cryptography research for years, they may take some time to become crypto natives. This is a tradeoff

-------------------------

dominicwilliams | 2022-12-08 19:39:48 UTC | #83

[quote="lei, post:4, topic:17178"]
3.2. On the Foundation’s accountability mechanisms and transparency
[/quote]

The DFINITY Foundation is an independent contributor to the Internet Computer ecosystem. It is not the Internet Computer itself. I addressed my views in earlier posts in this thread (https://forum.dfinity.org/t/transparency-within-the-dfinity-foundation/14872). TLDR; our job is hard enough without getting involved in witch hunts, decentralizing the organization with committees, and so on. The fact is that the DFINITY Foundation team has achieved, and continues to achieve, far more than other organizations in the crypto space. Developing technology for a network like the Internet Computer is very hard. Period. Running multi-national R&D and crypto research operations at scale is very hard. Period. Therefore it's no wonder things can take a long time and sometimes take longer to deliver than expected. Analysis of our GitHub repo clearly shows that we are consistently the top performer in the industry. I don't think this line of attack is helpful

-------------------------

esquivada | 2022-12-08 19:40:38 UTC | #84

Dom great explanation, thanks. IC has a great future 🔥🔥🔥

-------------------------

dominicwilliams | 2022-12-08 19:44:44 UTC | #85

[quote="lei, post:4, topic:17178"]
3.3. Long-term neglect of the real demands of community developers
[/quote]

We are constantly talking to developers. We offer things like IC.Lab to help developers that need to collaborate with our developers. However, we have limited resources internally, and have to triage by focusing on the most important priorities, which change as the ecosystem develops. For example, in my earlier reply, I discussed how we are currently optimizing the cryptography relating to Update TX, as the result of bottlenecks occurring with the SNS-1 launch, so future SNS launches will run more smoothly. It's certainly the case that the delivery of some promised frameworks has slipped, and priorities have changed according to developments on the ground, but this is not because we are neglecting anyone's needs, only because we are resource constrained. We are constantly optimizing DFINITY and trying to focus and expand our capabilities, but we also need the community's help as contributors.

-------------------------

Zane | 2022-12-08 20:07:08 UTC | #86

[quote="dominicwilliams, post:80, topic:17178"]
That’s why we created a Proof-of-Useful-Work blockchain that runs on a sovereign network of dedicated hardware/node machines, rather than a Proof-of-Stake network hosted by “validators” that are often just software instances running on Big Tech’s cloud
[/quote]

I've seen you make this claim for a while now and imho it's not completely true, per Dfinity's own admission ICP uses Threshold Relay.
In Proof of work a single node can prove it executed calculations correctly and others can cheaply verify his claim WITHOUT running the calculations and comparing results, the problem is this is restricted to a specific type of calculation which doesn't do anything useful other than provide security guarantees to the network. On ICP on the other hand all nodes must run the same calculation and reach consensus on the outcome, it is much closer to ETH 2.0 than to a Proof of useful work one, isn't it? Main difference is how much each party contributes to reaching consensus isn't weighted by amount of tokens owned. ZK based solutions are closer to what I'd define as Proof of useful work.

[quote="dominicwilliams, post:80, topic:17178"]
which are created at zero cost by running a script, and can be switched off by Big Tech at any moment (as per Solana losing 40% of its network when Hetzner switched off its validators only a couple of weeks ago) and are therefore *not decentralized*. That’s why we built a blockchain that can hosts Web3 and DeFi services that run *end-to-end on the blockchain*. In every other blockchain ecosystem, the web experience, and nearly all the data and data processing, lives on Big Tech’s cloud, or other centralized traditional tech. The Internet Computer pioneers unprecedented levels of decentralization and permissionless governance.
[/quote]

I don't agree with the conclusion that only cause a node can be hosted on a rented server it is not decentralized, that is what happens when a network is permissionless and lets the free market decide how to run their nodes as long as they meet the network's needs. You mentioned hertzner banning Sol nodes and while yes it cause temporary issues, the chain is back up and running again. That is cause it doesn't rely on particular assumptions on where nodes must be hosted to run, what would happen instead if future regulations caused ICP nodes to shut down in all major jurisdictions? Would the network be able to oulive such a scenario? 

KYC and  NNS permission requirements aside, many are concerned about the low replication factor most subnets have: 13 is low when compared most chains and increasing it negatively impacts latency and throughput, furthermore there seems to be softcaps which makes running a 100 nodes subnet not possible at the moment. Once the network starts holding enough TVL the safety assumptions provided by deterministic decentralization with a 13 nodes subnet might not be enough in the eyes of many. 

I think you understand the appeal of high repl and permissionless chains as they were both a part of the initial Dfinity whitepaper and Badlands proposal (of which I was a big fan) and it'd be great to see them implemented someday.

-------------------------

Sabr | 2022-12-08 20:21:47 UTC | #87

[quote="dominicwilliams, post:83, topic:17178"]
our job is hard enough without getting involved in witch hunts, decentralizing the organization with committees, and so on.
[/quote]

I 100% agree, @dominicwilliams. I've tried to defend DFINITY against those unproductive witch hunts several times in my short tenure here, and I'm a big believer in both the IC and the smart people behind it. I don't think there is any better team in the industry. I also don't believe in committees to decentralize power, since those inevitably just result in a forced reduction in diversity of perspectives and a tense power struggle to artificially come to a collective prioritization. Like cryptographers, I believe that this problem can mostly be solved by math. I actually want to make your life easier, not more difficult!

[quote="dominicwilliams, post:85, topic:17178"]
It’s certainly the case that the delivery of some promised frameworks has slipped, and priorities have changed according to developments on the ground, but this is not because we are neglecting anyone’s needs, only because we are resource constrained. We are constantly optimizing DFINITY and trying to focus and expand our capabilities, but we also need the community’s help as contributors.
[/quote]
But how do you even know if you are optimizing priorities given your perpetual scarcity of resources to fulfill those priorities? You would first need to know how far off DFINITY's priorities are from the community's priorities. This implies that a collective prioritization process is in place to measure this gap on a regular basis, which is not the case. I recognize that DFINITY is an independent organization that has the right to have different priorities from the community in allocating its scarce resources. However, if you can't see how far off you are from the community's priorities, then you will only see more painful threads from passionate IC champions like @lei in the future.

-------------------------

Sabr | 2022-12-08 20:39:19 UTC | #88

@zane, I'm not an expert on this topic, but I think a healthy compromise on replication can be achieved via different canister (or subnet?) types. I think there are at least three types already: system, application and storage, which decreasing levels of replication for those three. There is also a "fiduciary" distinction, which obviously increases the replication requirements for decentralization purposes. Clearly, it is not possible for someone to host an enterprise dApp on a legion of mobile phones, so the Badlands idea could not be a generalized solution. However, for the most sensitive data or hackproof consensus requirements, that might be a great optional solution to have in the future.

-------------------------

skilesare | 2022-12-08 20:47:17 UTC | #89

[quote="timo, post:59, topic:17178"]
a private key or seed phrase or connects to a hardware token
[/quote]

My understanding of the delay here is the ledger approval process. We've repeatedly requested that cbor-based requests be added to the ICP Ledger App, but it seems to still only support the limited set of protobuff functions on the NNS.  You can't use it to just sign a transaction to regular canisters(and if this not the case it would be great to have some understanding of how to pull it of with the native APIs).

-------------------------

dominicwilliams | 2022-12-08 23:41:25 UTC | #90

[quote="lei, post:4, topic:17178"]
### 3.4. The DFINITY Foundation does too much of the application layer itself

Psychedelic/Fleek, once one of the most important developers in the IC community, sparked a big IC community discussion six months ago, in which one of their core ideas was that DFINITY should focus on the underlying protocol rather than the upper application services. The most recent development I’ve seen is that Psychedelic/Fleek has left the IC ecosystem for good.
[/quote]

Firstly, Psychedelic and some others wanted DFINITY work on People Parties deprioritized since it was "application layer". But we can now see, that while the functionality is sorely needed, no complete alternative was created by the community. We need anonymous Proof of Personhood (via People Parties) to a) prevent Sybil attacks on SNS decentralization sales, and b) boost the voting power of individual human beings inside the Network Nervous System DAO, so the network is not governed by capital alone. Both of these things are hot topics right now, and People Parties work will have to be restarted. I can tell you, unequivocally, that there are many community members who did not make so much noise during those discussions, who are now upset that the People Parties framework is not available for them to use.

Secondly, Psychedelic propounded the idea that systems like the SNS, and Internet Identity were "application layer". I think they are more than that, and are essential parts of the decentralized compute platform that the Internet Computer provides – albeit, I think it's great if people want to create alternatives, or extend them. There can be more than one idea. However, the SNS plays key roles in the 20 Year Roadmap I once described https://medium.com/dfinity/announcing-internet-computer-mainnet-and-a-20-year-roadmap-790e56cbe04a, and which people invested into, and Internet Identity makes Web3 accessible to the masses and solves for things like privacy, which are previously described objectives of the project. There was loud criticism regarding e.g. the design of the SNS from this quarter. However, what people don't see is the quiet majority from the community asking that we not be diverted because they need the SNS and are committed to the accompanying design and philosophy.

Thirdly, it should be noted that while Psychedelic was developing a large number of pieces of infrastructure, only a few have entered production. Had we listened to the arguments they made, the developer community would now be depending on their unreleased Daowabunga framework, because we would not have developed the SNS framework. That would mean no full end-to-end decentralization of Web3 and DeFi services, and no decentralization sales that the community can now use to fund their projects. Meanwhile, those who rely on the Plug Wallet (which is great, btw, I don't want to criticize it) are now very worried that Psychedelic may not continue to maintain it. These are the reasons that the DFINITY Foundation, as a not-for-profit organization that is focused on contributing to the Internet Computer ecosystem in perpetuity, should continue contributing core infrastructure components in critical areas like identity and DAO frameworks – even though, again, we would still encourage others to extend the work we contribute or create alternatives. 

In the end, Psychedelic changed their focus because they found it much easier to raise venture capital funding to develop a decentralized CDN (content distribution network) for accelerating access to Web3 content. That's partly because what they are doing is a great idea, and I wish Harrison and his team all the luck in the world with that, and it's also partly because traditional VCs are very heavily already invested in the Solana, Avalanche and NEAR ecosystems, for reasons of timing, and the kinds of attacks our ecosystem suffered at launch described by https://CryptoLeaks.info, and they rightly see the Internet Computer and ICP as potential disruptor of those investments.

Our answer to centralized investment cartels and other industry participants hoping to steer the evolution of the blockchain ecosystem towards themselves, and profit by creating alternatives to the Ethereum ecosystem through force of capital, control of the crypto press, and many other things, is the SNS and decentralization sales i.e the power of crypto. The SNS framework will democratize access to the Tech economy by allowing a much boarder range of Web3 and DeFi projects to raise funds from all over the world, and this approach is already drawing enormous talent into the ecosystem. I believe that in the end, decentralized systems ("algorithms and protocols") will out-compete centralized funding cartels, and that as the Internet Computer ecosystem continues to take off – and there are already many fully on-chain Internet Computer projects around the world that I can see going to the moon – more and more traditional venture capital will find its way into our ecosystem anyway.

We need to stay focused on the fully decentralized future that truly defines our grand crypto and blockchain endeavor, and the amazing projects  building fully on-chain decentralized Web3 and DeFi services, which will run under the control of their communities through DAOs, and which can only be built on the Internet Computer blockchain today. ICP alone can play the role of a World Computer, and ICP alone hosts smart contracts that can directly interoperate with other chains through chain key cryptography. This is the future that I and DFINITY are focused on delivering. Projects will come, and some will go, because this is inevitable in a large ecosystem. What is clear for anyone following events, is that the number of amazing new Internet Computer projects appearing daily greatly outweighs any losses. We are the only blockchain ecosystem experiencing rapid growth during the Crypto Winter. Network usage on other major chains has literally cratered, while ours is up 550% in the past 4 months. We must be doing something right.

-------------------------

theguy | 2022-12-08 21:04:02 UTC | #91

I have my concerns with SNS and NNS but this was very moving and confidence inspiring

I will go to sleep happy tonight - WAGMI

-------------------------

Sabr | 2022-12-08 21:10:31 UTC | #92

[quote="dominicwilliams, post:90, topic:17178"]
We need to stay focused on the fully decentralized future that truly defines our grand crypto and blockchain endeavor, and the amazing projects building fully on-chain decentralized Web3 and DeFi services, which will run under the control of their communities through DAOs, and which can only be built on the Internet Computer blockchain today. ICP alone can play the role of a World Computer, and ICP alone hosts smart contracts that can directly interoperate with other chains through chain key cryptography. This is the future that I and DFINITY are focused on delivering.
[/quote]

Well said, @dominicwilliams. I can honestly say that I agree with every word of your last post, and not just this excerpt. In particular, I believe that the II (including Proof of Personhood) and the SNS framework are absolutely critical to the foundation of the IC. If you surveyed the community's collective priorities right now, I think they would essentially agree too. But unfortunately we don't have that data...yet.

-------------------------

Johnchiby | 2022-12-08 21:20:14 UTC | #93

@dominicwilliams let the world see more of this side of you. You can be very inspiring. This post was very digestible, I think you should continue with this vibe going forward. I think you should post this on other forums for more visibility.

-------------------------

InsaneClownPosse | 2022-12-08 21:40:35 UTC | #94

Agree so much. That single post has changed my outlook back to bullish after becoming very demoralised. Would love to see more of Dom in other media as well, maybe even on Joe Rogans podcast kek

-------------------------

cyberowl | 2022-12-08 21:44:06 UTC | #95

Your ideas on proof of personhood were what sold me on the Internet Computer. I was blown away by the idea of people parties as an anonymous way of claiming human verification. Thank you, and everyone at Dfinity, for this.

-------------------------

Sormarler | 2022-12-08 21:51:46 UTC | #96

[quote="Zane, post:86, topic:17178"]
I don’t agree with the conclusion that only cause a node can be hosted on a rented server it is not decentralized, that is what happens when a network is permissionless and lets the free market decide how to run their nodes as long as they meet the network’s needs. You mentioned hertzner banning Sol nodes and while yes it cause temporary issues, the chain is back up and running again. That is cause it doesn’t rely on particular assumptions on where nodes must be hosted to run, what would happen instead if future regulations caused ICP nodes to shut down in all major jurisdictions? Would the network be able to oulive such a scenario?
[/quote]

Running on big clouds makes the network infrastructure centralized as Dom said. Instead of Hertzner, imagine 3 or 4 of the top providers banning crypto nodes. That would like being the network down for days if not weeks before they can run a secure network again. I can easily see big cloud providers shut down these blockchains if they ever become a competitive threats to their business. The likelihood of Western governments banning data centers from running nodes without due process is far lower than corporations taking measures to protect their bottom line. We have already seen it happen. If all major countries ban crypto then it becomes irrelevant who can run a node or not. It would have very little use cases. Very few people would risk being criminal. No institutions would touch it. I find the idea that crypto can be untouchable from all governments, especially those from big democratic ones like the US and other western countries is unrealistic. A more realistic goal for decentralization security and censorship resistance from corporations and undemocratic countries imo. The United States by itself could probably kill crypto dream of ever being mass adopted by simply labeling everything a security without even banning a single node.

-------------------------

samuelburri | 2022-12-08 22:20:19 UTC | #97

@lei  we started a separate thread listing our [SNS-1 Lessons Learned](https://forum.dfinity.org/t/sns-1-lessons-learned/17230). I believe we cover all the findings you list in section 1:

> 1.1 User repeated deductions

Explained in [Repeated ICP transfers](https://forum.dfinity.org/t/sns-1-lessons-learned/17230).

> 1.2. Sybil Attack / Front-run Prevention

See [Bots participating in the SNS decentralization sale](https://forum.dfinity.org/t/sns-1-lessons-learned/17230) and [Use of airdrops](https://forum.dfinity.org/t/sns-1-lessons-learned/17230). You point to various existing solutions to protect against bots. Indeed, we have also started discussing how we could build on existing community solutions and create a less manual and platform-specific airdrop functionality.

> 1.3. The Subnet node outage and congestion issues

We reported on the [degraded performance of the NNS subnet during the SNS launch in a separate post mortem](https://forum.dfinity.org/t/degraded-performance-during-sns-1-decentralization-sale-incident-retrospective-tuesday-november-29-2022/17005). This coincided with the [SNS subnet got stuck](https://forum.dfinity.org/t/sns-1-lessons-learned/17230) bug explained in the lessons learned post. Of course SNS launches must sustain much more participants than what we have seen with SNS-1. However, I disagree with your TPS argument. If you only consider ledger transactions that were part of the SNS sale then your calculation is correct. However, transactions have a much more general meaning on the IC.

> 1.4. Lack of Rigorous Testing

You are right, a “public beta”, or maybe “alpha” is a good description of the SNS-1. We should have anticipated some of the limitations we hit before launching. We have identified various test scenarios that we have to run before opening up to further SNS launches.

> 1.5. Lock-up time

Yes, that was an oversight as explained in [Neurons with randomized dissolve delays](https://forum.dfinity.org/t/sns-1-lessons-learned/17230).

I hope that our explanations and transparent communication reassures the community that we learn from the SNS-1 launch and implement adequate improvements.

-------------------------

Zane | 2022-12-08 22:22:26 UTC | #98

[quote="Sormarler, post:96, topic:17178"]
Instead of Hertzner, imagine 3 or 4 of the top providers banning crypto nodes
[/quote]

There would still be hundreds of ways to run a node VS the only one IC offers.

[quote="Sormarler, post:96, topic:17178"]
The likelihood of Western governments banning data centers from running nodes without due process is far lower than corporations taking measures to protect their bottom line.
[/quote]
Not so sure about this. I'd say it's more likely governments will want to shut down cryptos if it starts becoming a systemic issue, see Tornado cash, than all big tech turning down paying customers.

[quote="Sormarler, post:96, topic:17178"]
If all major countries ban crypto then it becomes irrelevant who can run a node or not. It would have very little use cases. Very few people would risk being criminal. No institutions would touch it. I find the idea that crypto can be untouchable from all governments, especially those from big democratic ones like the US and other western countries is unrealistic
[/quote]
Crypto started out with the idea all of that would have been made irrelevant. A cryptocurrency like BTC might suffer in terms of price action if that were to happen, but an unstoppable and decentralized world computer? That is really valuable to a lot of people and would keep its value no matter how many roadblocks are put in place. It might not have the same efficiency and latency as your average web2 app, but the point of crypto is to be decentralized FIRST and efficient second.

[quote="Sormarler, post:96, topic:17178"]
A more realistic goal for decentralization security and censorship resistance from corporations and undemocratic countries imo
[/quote]
The US does and has done lots of undemocratic stuff in the past decades, they are just better at marketing than others and slighly less bad than absolute dystopian countries.

[quote="Sormarler, post:96, topic:17178"]
The United States by itself could probably kill crypto dream of ever being mass adopted by simply labeling everything a security without even banning a single node.
[/quote]
The crypto dream was never supposed to be become rich buying internet money, but to create an alternative system that could survive any kind of attack.

-------------------------

Zane | 2022-12-08 22:29:12 UTC | #99

[quote="Sabr, post:88, topic:17178"]
There is also a “fiduciary” distinction, which obviously increases the replication requirements for decentralization purposes
[/quote]
Yeah but even the subnets with highest node count pale in comparison with other chains.

[quote="Sabr, post:88, topic:17178"]
it is not possible for someone to host an enterprise dApp on a legion of mobile phones, so the Badlands idea could not be a generalized solution. However, for the most sensitive data or hackproof consensus requirements, that might be a great optional solution to have in the future.
[/quote]
True, the idea is one should be able to choose based on its needs where to be on the decentralization spectrum, but at the moment Dfinity is building the network and optimizing the protocol with a specific set of assumptions: KYCed and permissioned nodes, powerful hardware, low repl count, fixed rewards, no staking/slashing, etc...

So for those who need less throughput and more decentralization there might never be an alternative on the IC, infact Badlands was kind of proposed as an alternative network, but I think it'd be nice if Dfinity kept in mind there is a need for more decentralized subnets too and didn't corner themselves in a position that doesn't make it possible to encompass those uses cases without forking the network.

-------------------------

Sal_Paradise | 2022-12-08 23:22:26 UTC | #100

In Dom and Dfinity we trust. I have the upmost faith, truely.

Having said that, I was highly disappointed by the SNS launch. This could of been a great way of showcasing the IC capabilities and I can't help but feel, it was missed a opportunity. 

Launches like this are rare occasions and I'm sure there could of been better ways of testing the technology, instead of doing it such a public and if im honest, such a disorganised manner.

-------------------------

LightningLad91 | 2022-12-08 23:01:15 UTC | #101

[quote="Zane, post:99, topic:17178"]
infact Badlands was kind of proposed as an alternative network
[/quote]

I think Badlands is another example of a great idea that wasn’t given enough consideration before the public rejected it. The timing of the article’s publication didn’t help that.

-------------------------

Sormarler | 2022-12-09 00:18:43 UTC | #102

I remember the evisceral reaction to it when Dominic announced it. Most people thought it was another way to fleece investors. To be fair, information was hard to get back then.

-------------------------

Robert_Hon | 2022-12-09 02:23:34 UTC | #105

Thank you, @lei  for representing the ICP community and ICP investors with such a lengthy summary. It is much appreciated.

As we all know, ICP loyal fans are all over the world, on OpenChat, on discord, on Twitter, on WeChat groups, there are ICP's most ardent fans all over the world. Most of us are not technical developers and have very limited computer knowledge. We only have the most primitive consensus and dreams, hoping that computer technology will still maintain the values of freedom, decentralization, and anti-censorship, to maintain our freedom of speech and data privacy. That's why we have been investing and holding ICP for a long time.

Thank you also to the Dfinity's technical team and @dominicwilliams for their patient and meticulous replies. Although most of us still don't understand what you are saying, it is undoubtedly a great encouragement to see the leaders of the developers appear modestly in the community center.

Guys, please give the Dfinity and developers more time and patience. Please think about where you invest and buy a stock in the world,  can u see the core developers and the boss come out to answer your doubts modestly and patiently, and appease your dissatisfaction. Not at all,all right? Only the blockchain and encryption community can see this.

So I ask everyone to give the Dfinity more patience and confidence. We will definitely see the ICP roadmap. Hold!

-------------------------

Maxfinity | 2022-12-09 03:38:36 UTC | #107

The problems around composability are not limited to principals. As far as I can see it, there are 3 separate issues that prevent the composability of services on the IC.

(1) II Principals generate separate IDs for different websites (as mentioned), which means an identity is not transferrable across different websites.

(2) Inter-canister calls to third-party untrusted canisters can prevent your canister from being upgraded, without inter-canister calls to untrusted canisters there really cannot be said to be any composability. 

(3) Only the first canister in a chain of inter-canister calls has knowledge of the user agent that initiated the chain of calls. In Ethereum we have the tx.sender metadata included in the tx as well as msg.sender. In the IC, we only know of the canister that made a call to another service and not the end user, which prevents many composable services from being developed. 

Ideally, all 3 issues would be resolved to enable composable services on the IC.

-------------------------

Maxfinity | 2022-12-09 04:01:50 UTC | #108

[quote="InsaneClownPosse, post:94, topic:17178, full:true"]
Agree so much. That single post has changed my outlook back to bullish after becoming very demoralised. Would love to see more of Dom in other media as well, maybe even on Joe Rogans podcast kek
[/quote]

Psychedelic's attempts to get Dfinity to back away from developing crucial infrastructure at the application layer were misguided, and were in part self-interested attempts to control DeFi and token issuance on the IC. That was a threat to decentralisation, and even for a 40 person team Psychedelic were a bit over-extended. 
I think having dedicated teams work on single areas of focus would result in more interesting projects on the IC, and ultimately more competition between services.

Having said that, Psychedelic was right wrt the fact Dfinity should be laser-focused on the protocol layer. The fact of the matter is that other blockchain companies out there will be razor-focused on infrastructure and developer experience. Recent trends in blockchain have even specialised blockchain development into three components: data availability, execution and consensus, which can be optimised as independent modules. With so many other well-funded teams, and many other blockchain companies focused on sometimes just one "module" in the blockchain stack, there will be a heavy price to pay for not focusing on core infrastructure and developer ease-of-use. 

Having said that, to me SNS/ICRC-1 and People Parties,  which intend to bring us a common token standard, a way to bootstrap projects and mitigate spam on the IC, were good things and enhanced the developer experience and were IMO good for the community.

-------------------------

wpb | 2022-12-09 04:15:15 UTC | #109

Hey @dominicwilliams thank you for taking so much time today to respond to this forum topic.  It is very inspiring to read your explanations and vision.  It would be great to see you interact on the forum like this more in the future.  I know you are very busy, but engaging in a civilized debate when concerns are expressed by important community leaders like @lei is very smart and helpful.  I've been inspired by your responses.

I also want to voice strong support for DFINITY picking up the People Parties functionality again.  This is one of the roadmap initiatives that I have always believed is critical to decentralization for the reasons you outlined.  Please pursue it full speed ahead, including asking for input from the community, but not letting the community persuade you to deprioritize it again.  It might even be a good opportunity to offer contract with community members and/or organizations who have the expertise to participate on the team(s) that develops the solution.

-------------------------

MillionMiles | 2022-12-09 04:18:44 UTC | #110

I think that Dfinity is trying to create an end-to-end blockchain-based cloud computing solution, so the IC is destined to be a closed-loop ecosystem like Apple. This explains why Dfinity is developing SNS, II, and the People's Party, which seem to be applications at the application layer.  Am i right?

-------------------------

nlh | 2022-12-09 04:38:52 UTC | #111

One of the best discussions and debates in the forum.
From a layman point of view, maybe not a popular opinion, but I do think that it is a mistake from Dfinity when trying to promote decentralization and letting the community be involved too much in this early stage of their network development.
In high tech, sometimes doing our own way and getting things done without listening too much from outsiders' noises and opinions is not a bad idea.

-------------------------

Zilla | 2022-12-09 04:41:51 UTC | #112

To be fair, a 51% attack is also within the rules, doesn't make it correct to attempt.

-------------------------

Sabr | 2022-12-09 05:34:26 UTC | #113

[quote="nlh, post:111, topic:17178"]
From a layman point of view, maybe not a popular opinion, but I do think that it is a mistake from Dfinity when trying to promote decentralization and letting the community be involved too much in this early stage of their network development.
In high tech, sometimes doing our own way and getting things done without listening too much from outsiders’ noises and opinions is not a bad idea.
[/quote]

I agree to a certain extent, and I've already said that a benevolent dictatorship model can be quite effective during the highly iterative start-up period. However, once the community stakes become dramatically higher, there needs to be a transition plan towards more collective prioritization. Also, even under a benevolent dictatorship model, it would be very unwise not to keep a constant finger on the pulse of the community's collective priorities, as I've argued above in this post:

https://forum.dfinity.org/t/is-my-5-year-dream-of-icp-and-dfinity-shattered-is-there-still-a-future-sns-1-decentralization-sale-questions/17178/87?u=sabr

-------------------------

JaMarco | 2022-12-09 07:04:43 UTC | #115

[quote="Maxfinity, post:107, topic:17178"]
In Ethereum we have the tx.sender metadata included in the tx as well as msg.sender.
[/quote]

Will that still be the case when ETH introduces sharding?

-------------------------

Maxfinity | 2022-12-09 07:33:54 UTC | #116

Yes, I believe that will be the case...

-------------------------

singularity | 2022-12-09 08:56:29 UTC | #117

I like that suggestion from Dom. It is a capability that will help tools like Digital Time Capsule upgrade canisters controlled by user principles.

-------------------------

CatPirate | 2022-12-09 09:18:43 UTC | #118

This is a good post. Thank you for Posting. Bump.

-------------------------

timo | 2022-12-09 09:34:31 UTC | #119

[quote="Maxfinity, post:107, topic:17178"]
(3) Only the first canister in a chain of inter-canister calls has knowledge of the user agent that initiated the chain of calls. In Ethereum we have the tx.sender metadata included in the tx as well as msg.sender. In the IC, we only know of the canister that made a call to another service and not the end user, which prevents many composable services from being developed.
[/quote]

The first canister A can just pass along the `msg.caller` information along in its call to the second canister B in the chain, and so on.

Yes, here A could forge the principal that is passes along to B while in Ethereum the `tx.origin` seen by B cannot be forged. But even in Ethereum B has to trust A's code because the "origin" could have called A with a different intent, e.g. the "origin" could have not wanted A to call B at all and A being malicious could have done it anyway. So I think the forgeability is not argument against simply passing the information `msg.caller` along.

-------------------------

timo | 2022-12-09 10:38:29 UTC | #120

[quote="Maxfinity, post:107, topic:17178"]
(2) Inter-canister calls to third-party untrusted canisters can prevent your canister from being upgraded, without inter-canister calls to untrusted canisters there really cannot be said to be any composability.
[/quote]

That is only if you make inter-canister calls that rely on system-guaranteed responses. There is a different style of asynchronous programming based on one-way calls. That style does not have the problem you describe.

In the pub-sub example https://github.com/dfinity/examples/tree/master/motoko/pub-sub a subscriber can subscribe to a publisher to receive notifications (callbacks) on events. The publisher does not have to trust the subscriber in any way even though the publisher calls the subscriber on each event. The reason is that the notification calls used are one-way calls.

You can design any asynchronous communication around one-way calls. And you should if you call untrusted canisters.

-------------------------

Maxfinity | 2022-12-09 11:00:59 UTC | #121

[quote="timo, post:119, topic:17178"]
Yes, here A could forge the principal that is passes along to B while in Ethereum the `tx.origin` seen by B cannot be forged. But even in Ethereum B has to trust A’s code because the “origin” could have called A with a different intent, e.g. the “origin” could have not wanted A to call B at all and A being malicious could have done it anyway. So I think the forgeability is not argument against simply passing the information `msg.caller` along.
[/quote]

"Yes, here A could forge the principal that is passes along to B" .. you have answered why this is not possible in the IC. The canister A may lie about who the user is. If B is managing canister funds, this is not acceptable as any caller can trick canister B into updating balances of arbitrary users under this design. 

Your counter-argument is also unfortunately built from the wrong assumptions: as with all smart-contract code that handles money, the assumption is that you know what the code you are calling is doing. If A calls B with a different intent that is of no material concern to B, the responsibility is on the user to not call A if A's code is malicious. 

The fact is Ethereum has canister interoperability for the reason that it knows who the user calling is in a chain of smart-contract calls, and on the IC this is not the case. 

On the IC, the assumption is that the downstream canister, canister B knows the code of canister A, which is a bad assumption in a world of interoperable finance. It means there can only be communication with a known set of canisters that have been deployed prior to canister B being deployed and whose code is immutable.

-------------------------

Maxfinity | 2022-12-09 11:18:30 UTC | #122

M understanding is that one way calls are also undesirable because of network errors, which mean that they may never be delivered. And if they are never delivered, the only way to really know about this without getting into a ping-pong match of one-way calls is to have request-response inter-canister calls working as they should.

-------------------------

timo | 2022-12-09 11:24:05 UTC | #123

[quote="Maxfinity, post:121, topic:17178"]
If A calls B with a different intent that is of no material concern to B, the responsibility is on the user to not call A if A’s code is malicious.
[/quote]

Ok, I see what you mean. Thanks! I agree. We badly need capabilities on the IC which would solve this problem.

-------------------------

esquivada | 2022-12-09 13:01:40 UTC | #125

I am not a developer but I have followed the thread.  Do you think that this problem can be solved in a coherent way without seriously impairing security or network speed?

-------------------------

rifass | 2022-12-09 13:27:35 UTC | #126

I also feel funny about this. I know this ICPL and I don't feel they have delivered any work that worth 1 million USD.

-------------------------

