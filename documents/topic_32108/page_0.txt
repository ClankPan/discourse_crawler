toliuyi | 2024-06-18 15:04:21 UTC | #1

Dear IC community, I hope you support the [proposal](https://dashboard.internetcomputer.org/proposal/130405) to add OCT as a new ckERC20 token. This motion is valuable for Omnity and will also benefit other IC eco projects.

Some of you may have known that Omnity was rebranded from Octopus Network, a multi-chain network supported by NEAR Foundation, DCG, Electric Capital, and other crypto funds. The team has been working on the blockchain interoperability domain since 2019. As a grantee of Cosmos Interchain Foundation, we were credited with implementing the trustless interoperability protocol IBC in a heterogeneous context, including NEAR and Substrate. Last year, the team started building on ICP and found that Chain Fusion is exactly the tech stack we were looking for. With ICP, we can resolve some headaches that have bothered the cross-chain domain for years. This recognition eventually led to the birth of Omnity, a fully on-chain interoperability protocol with great UX and a sound level of decentralization. Please refer to the [Omnity light paper](https://omnity.gitbook.io/litepaper) for more information, or you can try [the protocol](https://bridge.omnity.network/) directly. 

In Q1 this year, the team decided to concentrate on Omnity and join the IC eco. So, Omnity is not only a protocol name but also the project's new name. 

Octopus Network's utility and government token was OCT, an ERC20 token issued on Ethereum but mostly used on NEAR for share-security staking and governance. OCT has a 100M fixed supply and around 95% circulation rate. Please refer to [CMC](https://coinmarketcap.com/currencies/octopus-network/) for more information about OCT.

We plan to issue the Omnity SNS token OT in Q4 of this year and convert all OCT into OT. OCT currently has $300K in liquidity on NEAR (Ref Finance) and $400K on Ethereum (Uniswap V2). Some IC ecosystem investors want to establish OCT holdings to obtain OT conversion rights. Transferring trading liquidity from NEAR to ICP can meet these needs and help Omnity build a closer economic connection with the IC community. Additionally, this liquidity migration plan will directly increase the TVL and trading volume of ICP DeFi protocols, benefiting the IC ecosystem in multiple ways.

Omnity is dedicated to establishing the safest, most convenient, and widely used cross-chain protocol on ICP. However, we are newcomers to the IC ecosystem, and our understanding of IC governance is still limited. If any shortcomings or aspects of our proposal do not align with community practices, we welcome your feedback and will strive to improve accordingly. I appreciate your support!

Louis
Founder of Omnity

-------------------------

wpb | 2024-06-19 01:07:45 UTC | #2

Hey Louis.  Thanks for posting this on the forum.  We’ve been looking for a place to communicate our vote on your proposal 130405.  The CodeGov team decided to vote NO on this proposal for several reasons.  Please see our post in our OpenChat community to learn the details that lead us to this decision.  You are welcome to reply in this linked thread if you have questions or comments to share, but you’ll need to join the community to comment.  It would be nice to hear from your team if you want to discuss the proposal further.

https://oc.app/community/32l35-yaaaa-aaaar-aw57q-cai/channel/168083459961697538699863191526193241390/84

-------------------------

Ajki | 2024-06-18 18:09:07 UTC | #3

[quote="wpb, post:2, topic:32108"]
The CodeGov team decided to vote NO on this proposal for several reasons.
[/quote]

Are these the only reasons, or is there something more?

> Rejected because the `git_commit_hash` looks like it was copy pasted from the ckUSDC proposal.

> Rejected. Build is successful, but the proposer provided the wrong `git_commit_hash` in the upgrade args.

> this proposal needs more discussion from the community before having any legitimacy.

I support the project, but I agree that the proposal needs to be ironed out. 

@toliuyi In general, it's better to post a topic before making a proposal, especially to catch and correct any minor mistakes beforehand.

-------------------------

juliansun | 2024-06-18 20:32:49 UTC | #4

Hi wpb!

I am the proposer of proposal 130405. I appreciate CodeGov team for carefully reviewing this proposal.

The `git_commit_hash` in the upgrade args refers to the commit hash used when compiling `ic-icrc1-ledger-u256.wasm` and `ic-icrc1-index-ng-u256.wasm`.

The upgrade operation will directly use these two compiled WASMs to deploy the new ckERC20 canister. Before the ledger suite orchestrator canister uses new ledger WASMs, any newly deployed canisters should ideally use the same `git_commit_hash` as ckUSDC(as in proposal 130405). I have confirmed this parameter with member of the Dfinity team.

However, the source code for the ledger WASMs is in the IC repo, so as long as there are no changes to the ledger-related code in the IC repo, any subsequent commit should successfully validate the WASMs(as in proposal 130395).

I believe that the approach in proposal 130405 is better, and future ckERC20 proposals should follow this rule. The advantage is that we can clearly know the ckERC20 canisters deployed within a certain period are all using the same ledger WASMs, rather than comparing various different `git_commit_hash` and diffing the source code to know they are using the same code.

I would appreciate knowing if the CodeGov team agrees with my approach.

-------------------------

juliansun | 2024-06-18 20:37:28 UTC | #5

[quote="Ajki, post:3, topic:32108"]
I support the project, but I agree that the proposal needs to be ironed out.
[/quote]

Thank you for your support!

-------------------------

cristian-zam | 2024-06-19 00:11:54 UTC | #6

Incredible, I had the opportunity to work with the Octopus team in LATAM, welcome to the ecosystem :muscle:

-------------------------

toliuyi | 2024-06-19 00:13:29 UTC | #7

Yes, we need to learn more about the IC gov best practices and follow them.

-------------------------

toliuyi | 2024-06-19 01:34:56 UTC | #8

Hi, thanks for the feedback. I'm glad to see that CodeGov is acting like a gatekeeper to protect the IC community, especially to serve the interests of the non-tech people.

As my teammate Julian has explained, the git_commit_hash issue is not a mistake but a new practice, and we discussed it with the Dfinity team before submission. 

But we should post here before or simultaneously with the proposal. Then we can exchange opinions before your casting. Lesson learned; surely we will do better next time.

-------------------------

wpb | 2024-06-19 02:01:27 UTC | #9

Hey @juliansun and @toliuyi.  Thanks for posting additional details about the proposal.  I admit I was in a rush from meeting to meeting earlier when I posted and didn't have time to give more explanation.  I also gave the wrong link to our reviews initially.  [Here](https://oc.app/community/32l35-yaaaa-aaaar-aw57q-cai/channel/168083459961697538699863191526193241390/84) is the correct link.  My apologies.

I believe we voted to reject out of an abundance of caution.  The technical reason used by most of the reviewers was that the wrong 'git_commit_hash' was provided in the upgrade args.  It appears to be a copy/paste from the ckUSDC proposal.  I recognize in your comments above that this was not a mistake and it was confirmed with DFINITY.  Perhaps you are right.  I need our reviewers to comment further on this detail, but it would also be nice to hear from DFINITY.

Less technical reasons to reject were that the proposal came out of the blue without notice and there were too many unknowns to be comfortable voting to adopt.  We noticed that the proposer ID had never made a proposal previously, which implies it came from the community.  There was no announcement anywhere that we could find (until this forum thread posted by @toliuyi earlier today).  Personally, I didn't realize that DFINITY has already intended for the community to submit these proposals.  Last I heard is was supposed to be a slow roll out with DFINITY still guiding the public discussions about what to release via the forum.

Hence, given our policy of reviewing and voting within 48 hours of proposal submission and erring on the side of caution, each of our reviewers felt the best answer was to reject the proposal.  If it turns out that we are wrong and DFINITY finds nothing wrong with the proposal, then they will vote to adopt and it will execute by absolute majority.  In that case, hopefully we can agree no harm, no foul.  If it is rejected, then I encourage you to address any deficiencies that are discovered and try again.  The CodeGov team is not trying to stand in your way on this proposal.  We are just trying to make the decisions we believe are best for the network with the information we have at the time.

Thank you for understanding and thank you for providing further explanation about the proposal and your prior consultations with DFINITY about the proper parameters to use in the proposal payload.

-------------------------

ZackDS | 2024-06-19 03:22:17 UTC | #10

[quote="juliansun, post:4, topic:32108"]
I have confirmed this parameter with member of the Dfinity team.
[/quote]

Care to share who more exactly ? Thank you.

-------------------------

Zane | 2024-06-19 05:09:31 UTC | #11

Hi @juliansun ! Firstly welcome to the IC community.

I personally voted to reject cause I assumed DFINITY preferred if `git_commit_hash` provided was also the one used for the LSO, judging by the ckLINK proposal. 
Upon further inspection, I see the spec has no requirements for that and considering what the hash is used for I agree what you propose makes more sense.

I'm sorry for the inconvenience, we've just recently started reviewing system canister management proposals and ledger instantiations with the LSO are a new development, so there is a bit of uncertainty on how to validate them.

Anyway congrats for being the first one from the community to go through this process.

-------------------------

Manu | 2024-06-19 10:04:55 UTC | #12

I worked with @toliuyi to review their proposal, and the `git_commit_hash` being different in the ckLINK proposal was our fault: we advised Omnity to use the old commit hash, and later realized that it would be better to use the newer commit hash, but did not inform Omnity.

What does this `git_commit_hash` in the args do exactly? The ledger suite orchestrator wasm contains wasms for the ledger and index canisters. Whenever the LSO is upgraded, it stores those contained wasms in stable memory, and uses `git_commit_hash` as a "name" for them, which you can see on the [LSO dashboard](https://vxkom-oyaaa-aaaar-qafda-cai.raw.icp0.io/dashboard). The fact that these wasms are stored allows exactly what the ckLINK proposal did, namely use an older index/ledger than the version contained in the LSO itself. This was proposed that way to make sure that the ckLINK ledger/index run at the same version as the ckUSDC ledger/index. 

So the proposal as submitted would work, but it would lead to a confusing wasm store of the LSO, where some canisters are having an incorrect git commit hash attached to them. 

Clearly how this proposal uses git commit hash is quite confusing, so one takeaway for dfinity is to improve this and perhaps getting rid of that `git_commit_hash` arg altogether. 

For this proposal, I think the best path forward is to 
1. reject this proposal due to the limited time the community had to review and the suboptimal use of git_commit_hash (which again, was dfinity's fault) 
2. update the proposal, share a draft here asap, give some days in which codegov and others can hopefully already review, and then submit an updated proposal which will hopefully be adopted. 

Thanks Omnity for being the first (outside dfinity) to submit a proposal for adding a ckERC20, and to codegov for carefully reviewing!

-------------------------

juliansun | 2024-06-19 14:15:44 UTC | #13

Thank you for explaining the reasons for rejecting the proposal in detail.
I fully understand the CodeGov team's decision.

-------------------------

juliansun | 2024-06-19 14:17:29 UTC | #14

We submitted a draft in the DFINITY - Omnity slack channel, where Manu reviewed it and identified several errors in the proposal.

-------------------------

juliansun | 2024-06-19 14:19:36 UTC | #15

Thank you for agreeing with my reasons, but please see Manu's post below for the latest guidance.

-------------------------

juliansun | 2024-06-19 14:23:44 UTC | #16

Thank you for your explanation.

I think that knowing different people/teams have different opinions about this parameter is not a bad thing at all. This indicates that this parameter indeed has some ambiguities, and by reaching a consensus, future proposals won't have this issue.

The Omnity team agrees to reject the proposal for now. I will soon submit a draft following the approach used in the ckLINK proposal for the community to review.

-------------------------

tiago89 | 2024-06-19 15:27:36 UTC | #17

Yes,

Thanks for this explanation of the git_commit_hash Manu.

I understand the desire to "control versions", but indeed this system needs some polish, because on ckLINK a new commit hash was given, but the wasm versions were same as the previous commit. And what if someone desires a more advanced Ledger with an older Index, should it be allowed?

If yes to all, then I suggest a simple composable_key is best, like {#ledgerWasm_#indexWasm}. The commit hash is confusing, because it's also possible that a new git commit (like a ReadMe change) exists without actually changing the wasms of either. The wasm hashes should be the best possible key.

But the "criteria" I missed the most was, on the future who chooses how "relevant" a coin is to be worth added to the tracker? If someone (let's say a DEX operator) wanted to spam 1000 ERC-20 tokens, how could this be decided? 
Currently IC Token holders trust Dfinity and CodeGov for the System Canister Management topic, and it's difficult for us to be "governance" judges (we prefer more the technical correctness). 

What I miss (and am suggesting) is the requirement that for every new ERC-20 tracked by the NNS, should be pre-approved on a Motion proposal, or else I confess that I would still reject a non-top 20 coin (whose bridge is more obvious).

Could this be considered as a good practice for future proposals of new "ck" orchestrated by an NNS canister?

-------------------------

MIGA | 2024-06-19 16:22:29 UTC | #18

We support this proposal. Let's get more liquidity into IC! Keep up the good work @toliuyi and the Omnity team!

https://x.com/miga_icp/status/1802739524977467678

-------------------------

toliuyi | 2024-06-20 00:48:32 UTC | #19

Why top 20 and not top 100 or 1000? When you can verify the contract addresses, symbols, and other data for all these tokens on CoinMarketCap, what's the difference? If you believe you can only judge the technical correctness, that's fine. Leave the business value judgment to others. There are plenty of perspectives and knowledge within the IC community.

-------------------------

cyberowl | 2024-06-20 01:15:30 UTC | #20

I think the reviewers of these type of proposals also need guidance on the possible attack vectors we should be looking at when reviewing. We need to know the extent of the damage that can be caused if a wasm is upgraded with malicious code. I am not saying this because of OCT but because we are opening up to the community and the auditing shouldn't be done just by Dfinity, since you all have a lot on your plate as it is.

-------------------------

juliansun | 2024-06-20 14:21:14 UTC | #21

Hello, community!

Attached is the new proposal to add ckOCT, which we are preparing to resubmit.
Please review and provide your comments.

Compared to the rejected proposal, the following modifications have been made:
1. The `git_commit_hash` parameter in the upgrade args has been modified to be consistent with the ckLINK proposal.
2. Added some explanations from Manu about verifying the ledger and index wasm in the verification section.

We hope to receive feedback from the CodeGov team and the community. If there are no objections to this draft, I plan to formally submit it on Friday evening.


# --- Proposal to be submitted ---

# Proposal to upgrade the ckERC20 ledger suite orchestrator canister to add ckOCT

Git hash: `7fbb84aad7188d1d5b3e17b170997c29d1598cb8`

New compressed Wasm hash: `9bd512661aba6bd7895d09685f625beca014304b7c1e073e029794d601a86709`

Target canister: `vxkom-oyaaa-aaaar-qafda-cai`

Previous ledger suite orchestrator proposal: https://dashboard.internetcomputer.org/proposal/130395

---

## Motivation

This proposal upgrades the ckERC20 ledger suite orchestrator to support the [OCT token](https://coinmarketcap.com/currencies/octopus-network/). OCT, an ERC20 token, serves as the utility and governance token for the Octopus Network, now rebranded as [Omnity Network](https://www.omnity.network/). Since Omnity Network is an ICP ecosystem project, migrating the trading liquidity of OCT to ICP from other blockchains makes sense. Moreover, the Omnity core team plans to launch the Omnity SNS token later this year. After that, ckOCT tokens are eligible to be swapped into Omnity tokens.

## Upgrade args

```

git fetch

git checkout 7fbb84aad7188d1d5b3e17b170997c29d1598cb8

cd rs/ethereum/ledger-suite-orchestrator

didc encode -d ledger_suite_orchestrator.did -t '(OrchestratorArg)' '(variant { AddErc20Arg = record { contract = record { chain_id = 1; address = "0xF5cFBC74057C610c8EF151A439252680AC68c6DC" }; ledger_init_arg = record { minting_account = record { owner = principal "sv3dd-oaaaa-aaaar-qacoa-cai" }; fee_collector_account = opt record { owner = principal "sv3dd-oaaaa-aaaar-qacoa-cai"; subaccount = opt blob "\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0f\ee"; }; feature_flags = opt record { icrc2 = true }; decimals = opt 18; max_memo_length = opt 80; transfer_fee = 10_000_000_000_000_000; token_symbol = "ckOCT"; token_name = "ckOCT"; token_logo = "data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPScxLjEnIGlkPSdPJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB4PScwcHgnIHk9JzBweCcgdmlld0JveD0nMCAwIDExMy4zOSAxMTMuMzknIHN0eWxlPSdlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDExMy4zOSAxMTMuMzk7JyB4bWw6c3BhY2U9J3ByZXNlcnZlJz48c3R5bGUgdHlwZT0ndGV4dC9jc3MnPiAuc3Qwe2ZpbGw6IzAxNDI5OTt9IC5zdDF7ZmlsbDojRkZGRkZGO30gPC9zdHlsZT48Y2lyY2xlIGNsYXNzPSdzdDAnIGN4PSc1Ni42OScgY3k9JzU2LjY5JyByPSc1Ni42OScvPjxnPjxwYXRoIGNsYXNzPSdzdDEnIGQ9J000NC4yNSw1OS40MWMtMS40MywwLTIuNTksMS4xNi0yLjU5LDIuNTl2MjAuMjhjMCwxLjQzLDEuMTYsMi41OSwyLjU5LDIuNTljMS40MywwLDIuNTktMS4xNiwyLjU5LTIuNTlWNjIgQzQ2Ljg0LDYwLjU3LDQ1LjY4LDU5LjQxLDQ0LjI1LDU5LjQxeicvPjxwYXRoIGNsYXNzPSdzdDEnIGQ9J001Ni42OSw1OS40MWMtMS40NSwwLTIuNjIsMS4xNy0yLjYyLDIuNjJ2MjYuNDdjMCwxLjQ1LDEuMTcsMi42MiwyLjYyLDIuNjJzMi42Mi0xLjE3LDIuNjItMi42MlY2Mi4wMiBDNTkuMzEsNjAuNTgsNTguMTQsNTkuNDEsNTYuNjksNTkuNDF6Jy8+PHBhdGggY2xhc3M9J3N0MScgZD0nTTc5LjI2LDc4Ljg3Yy0wLjMzLDAuMTUtMC42NCwwLjI4LTAuOTUsMC4zOGMwLDAtMC4wMSwwLTAuMDEsMGMtMC41OSwwLjE5LTEuMTMsMC4yOS0xLjYzLDAuMzFoLTAuMDYgYy0xLDAuMDMtMS44NC0wLjI3LTIuNTktMC43NWMtMC40OS0wLjMyLTAuOTEtMC43My0xLjI1LTEuMjNjLTAuMy0wLjQzLTAuNTMtMC45My0wLjcxLTEuNTFjMC0wLjAxLTAuMDEtMC4wMi0wLjAxLTAuMDMgYy0wLjIyLTAuNzQtMC4zNC0xLjYxLTAuMzQtMi41OVY2Mi4wMmMwLTEuNDUtMS4xNy0yLjYyLTIuNjItMi42MmMtMS40NSwwLTIuNjIsMS4xNy0yLjYyLDIuNjJ2MTEuNDNjMCw0LjUsMS42NCw4LjAzLDQuNjMsOS45NiBjMS41LDAuOTcsMy4yMSwxLjQ1LDUuMDQsMS40NWMxLjY4LDAsMy40NS0wLjQxLDUuMjUtMS4yMmMxLjMyLTAuNTksMS45LTIuMTQsMS4zMS0zLjQ2QzgyLjEzLDc4Ljg2LDgwLjU3LDc4LjI3LDc5LjI2LDc4Ljg3eicvPjxwYXRoIGNsYXNzPSdzdDEnIGQ9J002OC4zMyw0NS45YzAtMi4xNS0xLjc1LTMuOS0zLjktMy45Yy0yLjE1LDAtMy45LDEuNzUtMy45LDMuOXMxLjc1LDMuOSwzLjksMy45IEM2Ni41OCw0OS44LDY4LjMzLDQ4LjA1LDY4LjMzLDQ1Ljl6Jy8+PHBhdGggY2xhc3M9J3N0MScgZD0nTTQ4Ljk2LDQxLjk5Yy0yLjE1LDAtMy45LDEuNzUtMy45LDMuOXMxLjc1LDMuOSwzLjksMy45czMuOS0xLjc1LDMuOS0zLjlTNTEuMTEsNDEuOTksNDguOTYsNDEuOTl6Jy8+PHBhdGggY2xhc3M9J3N0MScgZD0nTTU2LjY5LDIyLjI4Yy0xNS4xNywwLTI3LjUyLDEyLjM0LTI3LjUyLDI3LjUydjE1LjA5YzAsMS40NiwxLjE4LDIuNjQsMi42NCwyLjY0czIuNjQtMS4xOCwyLjY0LTIuNjRWNDkuOCBjMC0xMi4yNiw5Ljk4LTIyLjI0LDIyLjI0LTIyLjI0YzEyLjI2LDAsMjIuMjQsOS45OCwyMi4yNCwyMi4yNHYxNS4wOWMwLDEuNDYsMS4xOCwyLjY0LDIuNjQsMi42NHMyLjY0LTEuMTgsMi42NC0yLjY0VjQ5LjggQzg0LjIxLDM0LjYyLDcxLjg3LDIyLjI4LDU2LjY5LDIyLjI4eicvPjwvZz48L3N2Zz4K"; initial_balances = vec {}; maximum_number_of_accounts = null; accounts_overflow_trim_quantity = null }; git_commit_hash = "7fbb84aad7188d1d5b3e17b170997c29d1598cb8"; ledger_compressed_wasm_hash = "4ca82938d223c77909dcf594a49ea72c07fd513726cfa7a367dd0be0d6abc679"; index_compressed_wasm_hash = "55dd5ea22b65adf877cea893765561ae290b52e7fdfdc043b5c18ffbaaa78f33"; }})'

```

* 0xF5cFBC74057C610c8EF151A439252680AC68c6DC is the address of the OCT smart contract on Ethereum Mainnet which can be verified on [Etherscan](https://etherscan.io/token/0xf5cfbc74057c610c8ef151a439252680ac68c6dc#code).

* sv3dd-oaaaa-aaaar-qacoa-cai is the ckETH minter canister.

* The fee collector is the 0000000000000000000000000000000000000000000000000000000000000fee subaccount of the minter canister.

* The transfer fee is 10_000_000_000_000_000, which is equivalent to 0.01 OCT. Based on the moving average over the past year, this amounts to approximately 0.003 USD.

* The ledger compressed wasm hash 4ca82938d223c77909dcf594a49ea72c07fd513726cfa7a367dd0be0d6abc679 and the index compressed wasm hash 55dd5ea22b65adf877cea893765561ae290b52e7fdfdc043b5c18ffbaaa78f33 are the version that will be used by the orchestrator to spawn off the ckOCT ledger and index, respectively.

## Wasm Verification

Verify that the hash of the gzipped WASM matches the proposed hash.

```

git fetch

git checkout 7fbb84aad7188d1d5b3e17b170997c29d1598cb8

./gitlab-ci/container/build-ic.sh -c

sha256sum ./artifacts/canisters/ic-ledger-suite-orchestrator-canister.wasm.gz

```

Verify that the hash of the gzipped WASM for the ledger and index matches the proposed hash. Note that the git commit hash is different because it reuses the same version for the ledger and the index as for ckUSDC, which were recorded by the ledger suite orchestrator with the proposal 129750 at commit 4472b0064d347a88649beb526214fde204f906fb when ckUSDC was added.

```

git fetch

git checkout 4472b0064d347a88649beb526214fde204f906fb

./gitlab-ci/container/build-ic.sh -c

sha256sum ./artifacts/canisters/ic-icrc1-ledger-u256.wasm.gz

sha256sum ./artifacts/canisters/ic-icrc1-index-ng-u256.wasm.gz

```

-------------------------

tiago89 | 2024-06-20 15:55:13 UTC | #22

Thanks Julian,

Almost all look good. Only have one last reservation, the transfer fee.

You claim it's worth 0.003$, but the current price of OCT has decreased from last months high, and is currently trading at 0.15$. That would put the fee at 0.0015$, this could be a problem, as we don't want maintenance costs of the canister to be under any form of risk.

As a comparison at today's prices:
- ckBTC, 0.0000001 ~0.0065 USD
- ckETH, 0.000002 ~0.0070 USD
- ckUSDT, 0.010 ~0.0100 USD
- ckLINK, ? ~0.0015 USD (!) 

All of the fees I was able to cross / confirm, but ckLink wasn't able to, my source is just the description. Could it be a typo / fat finger on the amount of zeros? It does seem that already ckLINK proposal was wrong. @Manu can you kindly confirm this? 

I suspect both ckLINK and this draft are at less than desired fees (~5x to 10x less than desired).

Thanks,
Tiago

-------------------------

juliansun | 2024-06-20 19:25:05 UTC | #23

Hi tiago89,

Good catch!

I have read that the guidance range for the transfer fee should be $0.005~$0.01. This value is very easy to determine for stablecoins, but for other tokens, we need to eliminate short-term price fluctuations. Therefore, I used the average price over the past year as the baseline value. Additionally, our team believes that the price of OCT is undervalued, so we manually adjusted it by approximately 60% to get the final value.

We believe that the cycle consumption of the ledger is very low, and the main purpose of the transfer fee is to prevent dusting attacks. Moreover, we do not want the OCT price, when it returns to our expected price (although this is very subjective), to result in users incurring a lot of fees for each transfer. This would reduce users’ willingness to make transfers.

I am personally open to adjusting this value and look forward to hearing everyone’s opinions.

-------------------------

juliansun | 2024-06-21 20:47:57 UTC | #24

I will wait for a conclusion from the above discussion before submitting the proposal.

Regarding the issue of the ckOCT ledger transfer fee, I have thought of another solution. I am confident that I can convince the Omnity team to deposit a large amount of cycles into the ledger to cover the cycles consumption for a long period of time in the future, so setting the transfer fee slightly lower will not be a problem in this case.

However, it seems that it would be better if this value were adjustable, although it would add some burden to governance.

-------------------------

tiago89 | 2024-06-22 07:01:12 UTC | #25

Hi Julian,

Thanks for the effort, I would prefer to wait for a bit more on Manu to reply. I have sent him a message on slack.

I would suspect that if the standard is a minimum of 0.005$, it would be hard for us to approve it. Or else all other coins would request for lower and lower transfer fees.

One of the issues mentioned in the Readme is to dissuade any DoS attack, if the fee is too small, it's cheaper for an attacker to release so many self transfer (~10k a second) that it would slow / stop others from being able to transfer.

If the transfer fee was 40_ instead of 10_ that would put the cost at around 0.006. I know its much better than ETH, but not so sure how much better compared to L2s. Would this transfer fee still be interesting enough for the bridge? Or you feel it's too close to other L2s?

Thanks for the feedback.

-------------------------

juliansun | 2024-06-22 13:30:58 UTC | #26

If the token price stays the same, $0.005 is a very reasonable fee, similar to Base and Arbitrum One. If the token price doubles, the fee would be $0.01. From a fee-only perspective, this would make transfers on ICP less competitive (based on my quick look at [L2beat](https://l2beat.com/scaling/costs?sort-by=l2-tx-count&sort-order=desc)).

-------------------------

christian | 2024-06-25 14:34:00 UTC | #27

Hey folks, some heads up from DFINITY. 

We discussed internally and we see the range of 0.5-1.5 cents as being both aligned with any technical concerns and UX-wise. Hence, we would support any fee within this range. 

Also please note, the fee can be changed at any point in time later via an additional proposal (e.g. if the token price goes up so much that transfers will be considered as too expensive).

-------------------------

juliansun | 2024-06-26 11:27:00 UTC | #28

Thank you for your response.

Compared to the previous draft, I made the following changes:

	1.	Increased the transfer fee from 10_000_000_000_000_000 to 34_000_000_000_000_000, which is approximately $0.005 at the current price.
	2.	Updated the previous proposal to https://dashboard.internetcomputer.org/proposal/130755 (ckPEPE).
	3.	Explained the hashes in the same way as the ckPEPE proposal.

Please review again.
@Manu @tiago89 FYI
```
diff --git a/orchestrator_add_ckoct_summary.md b/orchestrator_add_ckoct_summary.md
index 7d0aa69..54c3bb7 100644
--- a/orchestrator_add_ckoct_summary.md
+++ b/orchestrator_add_ckoct_summary.md
@@ -6,7 +6,7 @@ New compressed Wasm hash: `9bd512661aba6bd7895d09685f625beca014304b7c1e073e02979
 
 Target canister: `vxkom-oyaaa-aaaar-qafda-cai`
 
-Previous ledger suite orchestrator proposal: https://dashboard.internetcomputer.org/proposal/130395
+Previous ledger suite orchestrator proposal: https://dashboard.internetcomputer.org/proposal/130755
 
 ---
 
@@ -20,15 +20,19 @@ This proposal upgrades the ckERC20 ledger suite orchestrator to support the [OCT
 git fetch
 git checkout 7fbb84aad7188d1d5b3e17b170997c29d1598cb8
 cd rs/ethereum/ledger-suite-orchestrator
-didc encode -d ledger_suite_orchestrator.did -t '(OrchestratorArg)' '(variant { AddErc20Arg = record { contract = record { chain_id = 1; address = "0xF5cFBC74057C610c8EF151A439252680AC68c6DC" }; ledger_init_arg = record { minting_account = record { owner = principal "sv3dd-oaaaa-aaaar-qacoa-cai" }; fee_collector_account = opt record { owner = principal "sv3dd-oaaaa-aaaar-qacoa-cai"; subaccount = opt blob "\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0f\ee"; }; feature_flags  = opt record { icrc2 = true }; decimals = opt 18; max_memo_length = opt 80; transfer_fee = 10_000_000_000_000_000; token_symbol = "ckOCT"; token_name = "ckOCT"; token_logo = "data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPScxLjEnIGlkPSdPJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB4PScwcHgnIHk9JzBweCcgdmlld0JveD0nMCAwIDExMy4zOSAxMTMuMzknIHN0eWxlPSdlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDExMy4zOSAxMTMuMzk7JyB4bWw6c3BhY2U9J3ByZXNlcnZlJz48c3R5bGUgdHlwZT0ndGV4dC9jc3MnPiAuc3Qwe2ZpbGw6IzAxNDI5OTt9IC5zdDF7ZmlsbDojRkZGRkZGO30gPC9zdHlsZT48Y2lyY2xlIGNsYXNzPSdzdDAnIGN4PSc1Ni42OScgY3k9JzU2LjY5JyByPSc1Ni42OScvPjxnPjxwYXRoIGNsYXNzPSdzdDEnIGQ9J000NC4yNSw1OS40MWMtMS40MywwLTIuNTksMS4xNi0yLjU5LDIuNTl2MjAuMjhjMCwxLjQzLDEuMTYsMi41OSwyLjU5LDIuNTljMS40MywwLDIuNTktMS4xNiwyLjU5LTIuNTlWNjIgQzQ2Ljg0LDYwLjU3LDQ1LjY4LDU5LjQxLDQ0LjI1LDU5LjQxeicvPjxwYXRoIGNsYXNzPSdzdDEnIGQ9J001Ni42OSw1OS40MWMtMS40NSwwLTIuNjIsMS4xNy0yLjYyLDIuNjJ2MjYuNDdjMCwxLjQ1LDEuMTcsMi42MiwyLjYyLDIuNjJzMi42Mi0xLjE3LDIuNjItMi42MlY2Mi4wMiBDNTkuMzEsNjAuNTgsNTguMTQsNTkuNDEsNTYuNjksNTkuNDF6Jy8+PHBhdGggY2xhc3M9J3N0MScgZD0nTTc5LjI2LDc4Ljg3Yy0wLjMzLDAuMTUtMC42NCwwLjI4LTAuOTUsMC4zOGMwLDAtMC4wMSwwLTAuMDEsMGMtMC41OSwwLjE5LTEuMTMsMC4yOS0xLjYzLDAuMzFoLTAuMDYgYy0xLDAuMDMtMS44NC0wLjI3LTIuNTktMC43NWMtMC40OS0wLjMyLTAuOTEtMC43My0xLjI1LTEuMjNjLTAuMy0wLjQzLTAuNTMtMC45My0wLjcxLTEuNTFjMC0wLjAxLTAuMDEtMC4wMi0wLjAxLTAuMDMgYy0wLjIyLTAuNzQtMC4zNC0xLjYxLTAuMzQtMi41OVY2Mi4wMmMwLTEuNDUtMS4xNy0yLjYyLTIuNjItMi42MmMtMS40NSwwLTIuNjIsMS4xNy0yLjYyLDIuNjJ2MTEuNDNjMCw0LjUsMS42NCw4LjAzLDQuNjMsOS45NiBjMS41LDAuOTcsMy4yMSwxLjQ1LDUuMDQsMS40NWMxLjY4LDAsMy40NS0wLjQxLDUuMjUtMS4yMmMxLjMyLTAuNTksMS45LTIuMTQsMS4zMS0zLjQ2QzgyLjEzLDc4Ljg2LDgwLjU3LDc4LjI3LDc5LjI2LDc4Ljg3eicvPjxwYXRoIGNsYXNzPSdzdDEnIGQ9J002OC4zMyw0NS45YzAtMi4xNS0xLjc1LTMuOS0zLjktMy45Yy0yLjE1LDAtMy45LDEuNzUtMy45LDMuOXMxLjc1LDMuOSwzLjksMy45IEM2Ni41OCw0OS44LDY4LjMzLDQ4LjA1LDY4LjMzLDQ1Ljl6Jy8+PHBhdGggY2xhc3M9J3N0MScgZD0nTTQ4Ljk2LDQxLjk5Yy0yLjE1LDAtMy45LDEuNzUtMy45LDMuOXMxLjc1LDMuOSwzLjksMy45czMuOS0xLjc1LDMuOS0zLjlTNTEuMTEsNDEuOTksNDguOTYsNDEuOTl6Jy8+PHBhdGggY2xhc3M9J3N0MScgZD0nTTU2LjY5LDIyLjI4Yy0xNS4xNywwLTI3LjUyLDEyLjM0LTI3LjUyLDI3LjUydjE1LjA5YzAsMS40NiwxLjE4LDIuNjQsMi42NCwyLjY0czIuNjQtMS4xOCwyLjY0LTIuNjRWNDkuOCBjMC0xMi4yNiw5Ljk4LTIyLjI0LDIyLjI0LTIyLjI0YzEyLjI2LDAsMjIuMjQsOS45OCwyMi4yNCwyMi4yNHYxNS4wOWMwLDEuNDYsMS4xOCwyLjY0LDIuNjQsMi42NHMyLjY0LTEuMTgsMi42NC0yLjY0VjQ5LjggQzg0LjIxLDM0LjYyLDcxLjg3LDIyLjI4LDU2LjY5LDIyLjI4eicvPjwvZz48L3N2Zz4K"; initial_balances = vec {}; maximum_number_of_accounts = null; accounts_overflow_trim_quantity = null }; git_commit_hash = "7fbb84aad7188d1d5b3e17b170997c29d1598cb8";  ledger_compressed_wasm_hash = "4ca82938d223c77909dcf594a49ea72c07fd513726cfa7a367dd0be0d6abc679"; index_compressed_wasm_hash = "55dd5ea22b65adf877cea893765561ae290b52e7fdfdc043b5c18ffbaaa78f33"; }})'
+didc encode -d ledger_suite_orchestrator.did -t '(OrchestratorArg)' '(variant { AddErc20Arg = record { contract = record { chain_id = 1; address = "0xF5cFBC74057C610c8EF151A439252680AC68c6DC" }; ledger_init_arg = record { minting_account = record { owner = principal "sv3dd-oaaaa-aaaar-qacoa-cai" }; fee_collector_account = opt record { owner = principal "sv3dd-oaaaa-aaaar-qacoa-cai"; subaccount = opt blob "\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0f\ee"; }; feature_flags  = opt record { icrc2 = true }; decimals = opt 18; max_memo_length = opt 80; transfer_fee = 34_000_000_000_000_000; token_symbol = "ckOCT"; token_name = "ckOCT"; token_logo = "data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPScxLjEnIGlkPSdPJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB4PScwcHgnIHk9JzBweCcgdmlld0JveD0nMCAwIDExMy4zOSAxMTMuMzknIHN0eWxlPSdlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDExMy4zOSAxMTMuMzk7JyB4bWw6c3BhY2U9J3ByZXNlcnZlJz48c3R5bGUgdHlwZT0ndGV4dC9jc3MnPiAuc3Qwe2ZpbGw6IzAxNDI5OTt9IC5zdDF7ZmlsbDojRkZGRkZGO30gPC9zdHlsZT48Y2lyY2xlIGNsYXNzPSdzdDAnIGN4PSc1Ni42OScgY3k9JzU2LjY5JyByPSc1Ni42OScvPjxnPjxwYXRoIGNsYXNzPSdzdDEnIGQ9J000NC4yNSw1OS40MWMtMS40MywwLTIuNTksMS4xNi0yLjU5LDIuNTl2MjAuMjhjMCwxLjQzLDEuMTYsMi41OSwyLjU5LDIuNTljMS40MywwLDIuNTktMS4xNiwyLjU5LTIuNTlWNjIgQzQ2Ljg0LDYwLjU3LDQ1LjY4LDU5LjQxLDQ0LjI1LDU5LjQxeicvPjxwYXRoIGNsYXNzPSdzdDEnIGQ9J001Ni42OSw1OS40MWMtMS40NSwwLTIuNjIsMS4xNy0yLjYyLDIuNjJ2MjYuNDdjMCwxLjQ1LDEuMTcsMi42MiwyLjYyLDIuNjJzMi42Mi0xLjE3LDIuNjItMi42MlY2Mi4wMiBDNTkuMzEsNjAuNTgsNTguMTQsNTkuNDEsNTYuNjksNTkuNDF6Jy8+PHBhdGggY2xhc3M9J3N0MScgZD0nTTc5LjI2LDc4Ljg3Yy0wLjMzLDAuMTUtMC42NCwwLjI4LTAuOTUsMC4zOGMwLDAtMC4wMSwwLTAuMDEsMGMtMC41OSwwLjE5LTEuMTMsMC4yOS0xLjYzLDAuMzFoLTAuMDYgYy0xLDAuMDMtMS44NC0wLjI3LTIuNTktMC43NWMtMC40OS0wLjMyLTAuOTEtMC43My0xLjI1LTEuMjNjLTAuMy0wLjQzLTAuNTMtMC45My0wLjcxLTEuNTFjMC0wLjAxLTAuMDEtMC4wMi0wLjAxLTAuMDMgYy0wLjIyLTAuNzQtMC4zNC0xLjYxLTAuMzQtMi41OVY2Mi4wMmMwLTEuNDUtMS4xNy0yLjYyLTIuNjItMi42MmMtMS40NSwwLTIuNjIsMS4xNy0yLjYyLDIuNjJ2MTEuNDNjMCw0LjUsMS42NCw4LjAzLDQuNjMsOS45NiBjMS41LDAuOTcsMy4yMSwxLjQ1LDUuMDQsMS40NWMxLjY4LDAsMy40NS0wLjQxLDUuMjUtMS4yMmMxLjMyLTAuNTksMS45LTIuMTQsMS4zMS0zLjQ2QzgyLjEzLDc4Ljg2LDgwLjU3LDc4LjI3LDc5LjI2LDc4Ljg3eicvPjxwYXRoIGNsYXNzPSdzdDEnIGQ9J002OC4zMyw0NS45YzAtMi4xNS0xLjc1LTMuOS0zLjktMy45Yy0yLjE1LDAtMy45LDEuNzUtMy45LDMuOXMxLjc1LDMuOSwzLjksMy45IEM2Ni41OCw0OS44LDY4LjMzLDQ4LjA1LDY4LjMzLDQ1Ljl6Jy8+PHBhdGggY2xhc3M9J3N0MScgZD0nTTQ4Ljk2LDQxLjk5Yy0yLjE1LDAtMy45LDEuNzUtMy45LDMuOXMxLjc1LDMuOSwzLjksMy45czMuOS0xLjc1LDMuOS0zLjlTNTEuMTEsNDEuOTksNDguOTYsNDEuOTl6Jy8+PHBhdGggY2xhc3M9J3N0MScgZD0nTTU2LjY5LDIyLjI4Yy0xNS4xNywwLTI3LjUyLDEyLjM0LTI3LjUyLDI3LjUydjE1LjA5YzAsMS40NiwxLjE4LDIuNjQsMi42NCwyLjY0czIuNjQtMS4xOCwyLjY0LTIuNjRWNDkuOCBjMC0xMi4yNiw5Ljk4LTIyLjI0LDIyLjI0LTIyLjI0YzEyLjI2LDAsMjIuMjQsOS45OCwyMi4yNCwyMi4yNHYxNS4wOWMwLDEuNDYsMS4xOCwyLjY0LDIuNjQsMi42NHMyLjY0LTEuMTgsMi42NC0yLjY0VjQ5LjggQzg0LjIxLDM0LjYyLDcxLjg3LDIyLjI4LDU2LjY5LDIyLjI4eicvPjwvZz48L3N2Zz4K"; initial_balances = vec {}; maximum_number_of_accounts = null; accounts_overflow_trim_quantity = null }; git_commit_hash = "7fbb84aad7188d1d5b3e17b170997c29d1598cb8";  ledger_compressed_wasm_hash = "4ca82938d223c77909dcf594a49ea72c07fd513726cfa7a367dd0be0d6abc679"; index_compressed_wasm_hash = "55dd5ea22b65adf877cea893765561ae290b52e7fdfdc043b5c18ffbaaa78f33"; }})'

 * 0xF5cFBC74057C610c8EF151A439252680AC68c6DC is the address of the OCT smart contract on Ethereum Mainnet which can be verified on [Etherscan](https://etherscan.io/token/0xf5cfbc74057c610c8ef151a439252680ac68c6dc#code).
 * sv3dd-oaaaa-aaaar-qacoa-cai is the ckETH minter canister.
 * The fee collector is the 0000000000000000000000000000000000000000000000000000000000000fee subaccount of the minter canister.
-* The transfer fee is 10_000_000_000_000_000, which is equivalent to 0.01 OCT. Based on the moving average over the past year, this amounts to approximately 0.003 USD.
-* The ledger compressed wasm hash 4ca82938d223c77909dcf594a49ea72c07fd513726cfa7a367dd0be0d6abc679 and the index compressed wasm hash 55dd5ea22b65adf877cea893765561ae290b52e7fdfdc043b5c18ffbaaa78f33 are the version that will be used by the orchestrator to spawn off the ckOCT ledger and index, respectively.
+* The transfer fee is 34_000_000_000_000_000, corresponding approximately to 0.005 USD at the time of submitting the proposal.
+* The ledger compressed wasm hash 4ca82938d223c77909dcf594a49ea72c07fd513726cfa7a367dd0be0d6abc679 and the index compressed wasm hash 55dd5ea22b65adf877cea893765561ae290b52e7fdfdc043b5c18ffbaaa78f33 are the version that will be used by the orchestrator to spawn off the ckOCT ledger and index, respectively. This is exactly the same version as used by the ckUSDC ledger and index that were created with the proposal [129750](https://dashboard.internetcomputer.org/proposal/129750) at commit 4472b0064d347a88649beb526214fde204f906fb.
 
 
+## Release Notes
+
+No changes to the ckERC20 ledger suite orchestrator canister codebase, since this proposal uses the same version 7fbb84aad7188d1d5b3e17b170997c29d1598cb8 as the previous proposal ([130755](https://dashboard.internetcomputer.org/proposal/130755)).
+
 ## Wasm Verification
 
 
@@ -41,7 +45,7 @@ git checkout 7fbb84aad7188d1d5b3e17b170997c29d1598cb8
 sha256sum ./artifacts/canisters/ic-ledger-suite-orchestrator-canister.wasm.gz

 
-Verify that the hash of the gzipped WASM for the ledger and index matches the proposed hash. Note that the git commit hash is different because it reuses the same version for the ledger and the index as for ckUSDC, which were recorded by the ledger suite orchestrator with the proposal 129750 at commit 4472b0064d347a88649beb526214fde204f906fb when ckUSDC was added.
+Verify that the hash of the gzipped WASM for the ledger and index match the proposed hash.
 
```

-------------------------

gregory-demay | 2024-06-27 09:30:33 UTC | #29

Hi @juliansun 

Could you please provide the updated full proposal? Applying a patch file to a previous forum post, which is not the exact original file (`a/orchestrator_add_ckoct_summary.md` in your diff), would require some manual work.

-------------------------

juliansun | 2024-06-27 10:57:44 UTC | #30

Hi @gregory-demay 

Sorry, I thought using a patch would make it easier to compare.

Here is the full proposal:
It seems that everyone has no objections regarding the transfer fee issue. I plan to submit the proposal in 12 hours.

# — Proposal to be submitted —

# Proposal to upgrade the ckERC20 ledger suite orchestrator canister to add ckOCT

Git hash: `7fbb84aad7188d1d5b3e17b170997c29d1598cb8`

New compressed Wasm hash: `9bd512661aba6bd7895d09685f625beca014304b7c1e073e029794d601a86709`

Target canister: `vxkom-oyaaa-aaaar-qafda-cai`

Previous ledger suite orchestrator proposal: https://dashboard.internetcomputer.org/proposal/130755

---

## Motivation

This proposal upgrades the ckERC20 ledger suite orchestrator to support the [OCT token](https://coinmarketcap.com/currencies/octopus-network/). OCT, an ERC20 token, serves as the utility and governance token for the Octopus Network, now rebranded as [Omnity Network](https://www.omnity.network/). Since Omnity Network is an ICP ecosystem project, migrating the trading liquidity of OCT to ICP from other blockchains makes sense. Moreover, the Omnity core team plans to launch the Omnity SNS token later this year. After that, ckOCT tokens are eligible to be swapped into Omnity tokens.

## Upgrade args

```

git fetch

git checkout 7fbb84aad7188d1d5b3e17b170997c29d1598cb8

cd rs/ethereum/ledger-suite-orchestrator

didc encode -d ledger_suite_orchestrator.did -t '(OrchestratorArg)' '(variant { AddErc20Arg = record { contract = record { chain_id = 1; address = "0xF5cFBC74057C610c8EF151A439252680AC68c6DC" }; ledger_init_arg = record { minting_account = record { owner = principal "sv3dd-oaaaa-aaaar-qacoa-cai" }; fee_collector_account = opt record { owner = principal "sv3dd-oaaaa-aaaar-qacoa-cai"; subaccount = opt blob "\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\0f\ee"; }; feature_flags = opt record { icrc2 = true }; decimals = opt 18; max_memo_length = opt 80; transfer_fee = 34_000_000_000_000_000; token_symbol = "ckOCT"; token_name = "ckOCT"; token_logo = "data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPScxLjEnIGlkPSdPJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB4PScwcHgnIHk9JzBweCcgdmlld0JveD0nMCAwIDExMy4zOSAxMTMuMzknIHN0eWxlPSdlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDExMy4zOSAxMTMuMzk7JyB4bWw6c3BhY2U9J3ByZXNlcnZlJz48c3R5bGUgdHlwZT0ndGV4dC9jc3MnPiAuc3Qwe2ZpbGw6IzAxNDI5OTt9IC5zdDF7ZmlsbDojRkZGRkZGO30gPC9zdHlsZT48Y2lyY2xlIGNsYXNzPSdzdDAnIGN4PSc1Ni42OScgY3k9JzU2LjY5JyByPSc1Ni42OScvPjxnPjxwYXRoIGNsYXNzPSdzdDEnIGQ9J000NC4yNSw1OS40MWMtMS40MywwLTIuNTksMS4xNi0yLjU5LDIuNTl2MjAuMjhjMCwxLjQzLDEuMTYsMi41OSwyLjU5LDIuNTljMS40MywwLDIuNTktMS4xNiwyLjU5LTIuNTlWNjIgQzQ2Ljg0LDYwLjU3LDQ1LjY4LDU5LjQxLDQ0LjI1LDU5LjQxeicvPjxwYXRoIGNsYXNzPSdzdDEnIGQ9J001Ni42OSw1OS40MWMtMS40NSwwLTIuNjIsMS4xNy0yLjYyLDIuNjJ2MjYuNDdjMCwxLjQ1LDEuMTcsMi42MiwyLjYyLDIuNjJzMi42Mi0xLjE3LDIuNjItMi42MlY2Mi4wMiBDNTkuMzEsNjAuNTgsNTguMTQsNTkuNDEsNTYuNjksNTkuNDF6Jy8+PHBhdGggY2xhc3M9J3N0MScgZD0nTTc5LjI2LDc4Ljg3Yy0wLjMzLDAuMTUtMC42NCwwLjI4LTAuOTUsMC4zOGMwLDAtMC4wMSwwLTAuMDEsMGMtMC41OSwwLjE5LTEuMTMsMC4yOS0xLjYzLDAuMzFoLTAuMDYgYy0xLDAuMDMtMS44NC0wLjI3LTIuNTktMC43NWMtMC40OS0wLjMyLTAuOTEtMC43My0xLjI1LTEuMjNjLTAuMy0wLjQzLTAuNTMtMC45My0wLjcxLTEuNTFjMC0wLjAxLTAuMDEtMC4wMi0wLjAxLTAuMDMgYy0wLjIyLTAuNzQtMC4zNC0xLjYxLTAuMzQtMi41OVY2Mi4wMmMwLTEuNDUtMS4xNy0yLjYyLTIuNjItMi42MmMtMS40NSwwLTIuNjIsMS4xNy0yLjYyLDIuNjJ2MTEuNDNjMCw0LjUsMS42NCw4LjAzLDQuNjMsOS45NiBjMS41LDAuOTcsMy4yMSwxLjQ1LDUuMDQsMS40NWMxLjY4LDAsMy40NS0wLjQxLDUuMjUtMS4yMmMxLjMyLTAuNTksMS45LTIuMTQsMS4zMS0zLjQ2QzgyLjEzLDc4Ljg2LDgwLjU3LDc4LjI3LDc5LjI2LDc4Ljg3eicvPjxwYXRoIGNsYXNzPSdzdDEnIGQ9J002OC4zMyw0NS45YzAtMi4xNS0xLjc1LTMuOS0zLjktMy45Yy0yLjE1LDAtMy45LDEuNzUtMy45LDMuOXMxLjc1LDMuOSwzLjksMy45IEM2Ni41OCw0OS44LDY4LjMzLDQ4LjA1LDY4LjMzLDQ1Ljl6Jy8+PHBhdGggY2xhc3M9J3N0MScgZD0nTTQ4Ljk2LDQxLjk5Yy0yLjE1LDAtMy45LDEuNzUtMy45LDMuOXMxLjc1LDMuOSwzLjksMy45czMuOS0xLjc1LDMuOS0zLjlTNTEuMTEsNDEuOTksNDguOTYsNDEuOTl6Jy8+PHBhdGggY2xhc3M9J3N0MScgZD0nTTU2LjY5LDIyLjI4Yy0xNS4xNywwLTI3LjUyLDEyLjM0LTI3LjUyLDI3LjUydjE1LjA5YzAsMS40NiwxLjE4LDIuNjQsMi42NCwyLjY0czIuNjQtMS4xOCwyLjY0LTIuNjRWNDkuOCBjMC0xMi4yNiw5Ljk4LTIyLjI0LDIyLjI0LTIyLjI0YzEyLjI2LDAsMjIuMjQsOS45OCwyMi4yNCwyMi4yNHYxNS4wOWMwLDEuNDYsMS4xOCwyLjY0LDIuNjQsMi42NHMyLjY0LTEuMTgsMi42NC0yLjY0VjQ5LjggQzg0LjIxLDM0LjYyLDcxLjg3LDIyLjI4LDU2LjY5LDIyLjI4eicvPjwvZz48L3N2Zz4K"; initial_balances = vec {}; maximum_number_of_accounts = null; accounts_overflow_trim_quantity = null }; git_commit_hash = "7fbb84aad7188d1d5b3e17b170997c29d1598cb8"; ledger_compressed_wasm_hash = "4ca82938d223c77909dcf594a49ea72c07fd513726cfa7a367dd0be0d6abc679"; index_compressed_wasm_hash = "55dd5ea22b65adf877cea893765561ae290b52e7fdfdc043b5c18ffbaaa78f33"; }})'

```

* 0xF5cFBC74057C610c8EF151A439252680AC68c6DC is the address of the OCT smart contract on Ethereum Mainnet which can be verified on [Etherscan](https://etherscan.io/token/0xf5cfbc74057c610c8ef151a439252680ac68c6dc#code).

* sv3dd-oaaaa-aaaar-qacoa-cai is the ckETH minter canister.

* The fee collector is the 0000000000000000000000000000000000000000000000000000000000000fee subaccount of the minter canister.

* The transfer fee is 34_000_000_000_000_000, corresponding approximately to 0.005 USD at the time of submitting the proposal.

* The ledger compressed wasm hash 4ca82938d223c77909dcf594a49ea72c07fd513726cfa7a367dd0be0d6abc679 and the index compressed wasm hash 55dd5ea22b65adf877cea893765561ae290b52e7fdfdc043b5c18ffbaaa78f33 are the version that will be used by the orchestrator to spawn off the ckOCT ledger and index, respectively. This is exactly the same version as used by the ckUSDC ledger and index that were created with the proposal [129750](https://dashboard.internetcomputer.org/proposal/129750) at commit 4472b0064d347a88649beb526214fde204f906fb.

## Release Notes

No changes to the ckERC20 ledger suite orchestrator canister codebase, since this proposal uses the same version 7fbb84aad7188d1d5b3e17b170997c29d1598cb8 as the previous proposal ([130755](https://dashboard.internetcomputer.org/proposal/130755)).

## Wasm Verification

Verify that the hash of the gzipped WASM matches the proposed hash.

```

git fetch

git checkout 7fbb84aad7188d1d5b3e17b170997c29d1598cb8

./gitlab-ci/container/build-ic.sh -c

sha256sum ./artifacts/canisters/ic-ledger-suite-orchestrator-canister.wasm.gz

```

Verify that the hash of the gzipped WASM for the ledger and index match the proposed hash.

```

git fetch

git checkout 4472b0064d347a88649beb526214fde204f906fb

./gitlab-ci/container/build-ic.sh -c

sha256sum ./artifacts/canisters/ic-icrc1-ledger-u256.wasm.gz

sha256sum ./artifacts/canisters/ic-icrc1-index-ng-u256.wasm.gz

```

-------------------------

gregory-demay | 2024-06-27 11:28:16 UTC | #31

Thanks @juliansun for providing the full proposal!

The proposal looks correct to me! Good luck with the submission!

-------------------------

wpb | 2024-06-27 12:27:12 UTC | #32

[quote="christian, post:27, topic:32108"]
We discussed internally and we see the range of 0.5-1.5 cents as being both aligned with any technical concerns and UX-wise. Hence, we would support any fee within this range.
[/quote]

It’s nice to see the range opened up a little, especially for tokens that are not intended to be stable coins.  Is there any guidance on whether this fee should be set based on current price or historical price (e.g. 1 month, 3 month, or 6 month daily average)?



[quote="christian, post:27, topic:32108"]
Also please note, the fee can be changed at any point in time later via an additional proposal (e.g. if the token price goes up so much that transfers will be considered as too expensive).
[/quote]

Is there any guidance on who should submit the proposal to reset the fee if token price swings?  Are there any threshold values that should trigger concerns that the fee will a too far outside the desired range?  Is there anyone who should be expected to monitor the fee to make sure it is within the preferred range?

I’m just trying to better understand the importance of this fee range and how it should be managed beyond the initial proposal.

Thanks @christian and @Manu for your input on this topic.

-------------------------

juliansun | 2024-06-27 14:31:06 UTC | #33

I have resubmitted the proposal, please support us.
https://dashboard.internetcomputer.org/proposal/130806

I also want to know the answer to the questions raised by wpb. It seems that we will definitely need to make a fee adjustment within a few months.

-------------------------

timk11 | 2024-06-30 13:30:39 UTC | #34

I looked into this question a bit further. From my understanding of the process around ckERC20 tokens (gleaned mainly from [here](https://github.com/dfinity/ic/blob/master/rs/ethereum/ledger-suite-orchestrator/README.adoc) and [here](https://github.com/dfinity/ic/blob/master/rs/ethereum/cketh/docs/ckerc20.adoc)), no new code as such is created by a new token proposal, but rather a new wasm module is created based on the parameters shown within the proposal, which need to follow very specific guidelines as outlined in the first of those two links. The only one with any significant discretion allowed appears to be `transfer_fee`, which has been discussed at length above. Nonetheless, the parameters all need checking for compliance.

As far as attacks that could be coded within a smart contract on the Ethereum chain (or other EVM-based chain), the [honeypot](https://www.coinbase.com/en-au/blog/detecting-the-undetectable-coinbase-erc-20-scam-token-detection-system) - whereby selling the token is made exceedingly difficult - and the [internal fee](https://www.coinbase.com/en-au/blog/detecting-the-undetectable-coinbase-erc-20-scam-token-detection-system) scam - in which unusually high transfer fees are coded in - came up as frequently mentioned examples. Outside of the actual coding, [liquidity scams](https://help.1inch.io/en/articles/5363502-6-tools-to-identify-a-defi-scam-token#h_25d1423ea9) - whereby the coin-creator is able to pull liquidity from a pool in bulk - and [fake stablecoins](https://www.bvnk.com/blog/cryptocurrency-payment-scams-how-to-stay-safe) are further examples. [Various other vulnerabilities](http://dx.doi.org/10.54097/hset.v39i.6713) can result from unintended shortcomings in the smart contract code.

Given that the functionality of ckERC20 tokens on the IC appears to be limited to transfers in, out and internally, these attack types would not be part of the wasm code, but it certainly behoves us to verify the integrity of the original token through standard due diligence.

Note that this is just my own understanding based on seeking out a handful of sources, and others here would be much more well-versed in smart contract security than I am, so do let me know if I seem to be on track with this or if I'm missing something significant.

-------------------------

Manu | 2024-07-01 08:43:44 UTC | #35

The proposal was executed! We now have ckOCT: https://dashboard.internetcomputer.org/ethereum/ebo5g-cyaaa-aaaar-qagla-cai. 

Great job driving this proposal @juliansun @toliuyi

-------------------------

toliuyi | 2024-07-01 09:39:10 UTC | #36

Thank you. Your support is deeply appreciated.

-------------------------

wpb | 2024-07-01 10:28:01 UTC | #37

[quote="Manu, post:35, topic:32108"]
The proposal was executed! We now have ckOCT:
[/quote]

This is really cool.  Congratulations on being the first community initiated ckERC20 token.  Well done @toliuyi and @juliansun!

-------------------------

Pete | 2024-07-05 16:26:57 UTC | #38

We've been discussing the topic of ledger fees further within the DFINITY team and refined our thoughts a little. Apologies in advance for our thinking changing a little, but we felt it was better to be open about this now and suggest a change in tack earlier rather than later.

Where our thinking has evolved to;
- Fees should be set at a level which enables the ledger (and the subnet) to cover the cost of running the ledger canisters i.e. ledgers should be economically sustainable.
- Fees should also be set at level where they somewhat mitigate risks of DDOS, i.e it should somewhat costly to DDOS a ledger (and the subnet)
- Given the volatility of crypto prices it doesn't make sense to recommend/require too precise a range.
- It should be relatively easy for users to understand the fee cost (the mental arithmetic should be easy) 

With all that we felt it would make sense to recommend;
- Fees are set to 1 * 10^x (i.e. 100, 10, 1, 0.1, 0.01, 0.001 etc)
- Where 'x' is chosen, such that the resultant fee is equivalent to between 0.1 to 1 USD cent 

In summary, the recommendation is for proposers to set the fee to a reasonable order of magnitude, rather than trying to over-optimise to hit a narrow range. 

Our back of the envelope calculations indicate that a floor for economic sustainability today is when fees are set to greater than 0.01 USD cents equivalent, so setting fees initially in the range 0.1 to 1 USD cents leaves some margin of safety for token price volatility.

We remain open as always to the communities thoughts on this proposed range.

-------------------------

timk11 | 2024-07-05 23:01:17 UTC | #39

Thanks for giving further clarification on this. What's the thinking on how the growth of these tokens ought to progress? Should proposers start a discussion and give a rationale for adding a token (thinking particularly of the current ckSHIB proposal) or is it a case of the more the merrier?

-------------------------

