lara | 2023-11-03 16:29:44 UTC | #1

***TL;DR***
* *We present an overview of proposed improvements for critical SNS proposals, such as treasury proposals.*
* *We provide more details on how to implement the removal of following for critical proposals.*

## Introduction

Hi all,

The community shared a lot of feedback and ideas on how to improve SNS treasury proposals. We thank everyone who contributed to this discussion! In this post, we want to summarize some considered improvements regarding SNS treasury proposals and other critical SNS proposals. Some of the improvements related to this topic were discussed some time ago and are already being worked on, while others were recently proposed, including for example by community members in [this post](https://forum.dfinity.org/t/community-effort-create-proposal-exclude-auto-vote-option-on-sns-treasury-related-proposals/23843).

While it is important to have in-depth discussions for all individual topics, it is also important to consider the larger context. Therefore, we want to share an overview of all improvements that are considered first. In addition, we then present one proposed improvement in more detail.

Many of the proposed improvements may not only be valuable for treasury proposals but more generally for critical SNS proposals. We therefore first explain what we mean by critical proposals.

## What are critical SNS proposals?

Many of the current discussions focus on SNS treasury proposals. We propose that some improvements are applied more broadly to the following three types of SNS proposals that can be considered to be *critical SNS proposals*:

* **`Transfer_sns_treasury_funds` proposals**: These proposals allow an SNS to move ICP or SNS tokens from the SNS’s treasury to a given account.
*Why are they critical?* Treasury proposals are considered critical because they can move SNS-owned funds to any account.

* **`Mint_sns_tokens` proposals** (name tbd): This type of proposal will allow the SNS to mint new SNS tokens. Note that this proposal type does not exist yet, but is being developed as shared [here](https://forum.dfinity.org/t/new-sns-ability-to-mint-sns-tokens-revised-thresholds-for-voting/23382).
*Why are they critical?* Minting proposals are considered critical because minting new tokens can drastically change the full SNS DAO tokenomics.
* **`Deregister_dapp_canisters` proposals**: These proposals allow an SNS to give up control over a dapp canister and hand it back to a (centralized) controller.
*Why are they critical?* These proposals are considered critical since dapp canisters can hold valuable assets, for instance ckBTC tokens. In these cases, handing over control of the dapp to a centralized party means giving this party full control over the dapp-controlled funds.

## Overview of proposed improvements

We next provide an overview of all improvements regarding critical proposals that are currently being worked on. This list may change with time, as we think about the design more and gather more feedback from the community.

1. **Increase the required threshold for all critical proposals**: Critical proposals are only adopted if 50% of the available voting power votes in favor of the proposal. This also implies that such proposals can only be adopted if at least 50% of the voting power participated in the voting, as opposed to other proposals where 3% yes-votes and simple majority are sufficient to adopt a proposal.
*Status & more details:* This improvement was presented to the community in [this](https://forum.dfinity.org/t/new-sns-ability-to-mint-sns-tokens-revised-thresholds-for-voting/23382) and [this](https://forum.dfinity.org/t/safe-guards-for-the-access-to-the-sns-treasury/19669) forum post and, since it received positive feedback, we started working on it.
2. **Remove following for critical proposals**: Completely remove the following mechanisms for critical proposals. This means that all voters have to directly vote on such proposals.
*Status & more details:* This is a new design and the details are shared in the next section. Depending on the community feedback, we will take up working on this.
3. **Limit SNS treasury proposals**: Limit the amount of tokens that can be moved by SNS treasury proposals. This might, for example, be a limit of how many ICP and SNS tokens can be moved out of the SNS treasury per week or month.
*Status & more details*: This is a new idea. We will share a more concrete design proposal in the coming weeks, which will then be discussed with the community.

## Disable following for critical proposals

We now provide more details for the proposed Improvement *2) Remove following for critical proposals*. High level idea is that there is no following for critical proposals and all SNS neurons have to directly vote on such proposals.

### Which proposals will this affect and why?

We propose to remove following from all critical proposals, that is from SNS proposals with type `Transfer_sns_treasury_funds`, `Mint_sns_tokens`, and `Deregister_dapp_canisters` proposals. As explained in the previous section, all these proposal types affect SNS funds or tokenomics in some way that can be viewed as critical, which motivates requiring more active votes to make such critical decisions.

For some proposals it may be important to have following for adopting time-sensitive proposals quickly, for example if bugs need to be fixed urgently. However, usually proposals to move funds or hand over control do not fall in this category. Therefore it seems OK that the critical proposals might take a bit longer to be adopted after this change.

### What will happen to the existing following on critical proposals?

Since there should be no following on critical proposals, the following on these proposal types will be removed from all neurons. This can be done, for example, by looping through all neurons and doing this cleanup in an SNS governance canister upgrade.

**More technical details:** Looping through all neurons can be done in the post_upgrade method that is executed when the SNS governance canister is upgraded to a new version. For each neuron, the current following settings for the critical proposals can then be removed. In addition, the SNS governance canister has a reverse index from followees to followers, which can also be cleaned up in the same way.

### What does this mean for following on critical proposals going forward?

A change to the neuron’s method for following another neuron on a proposal type would ensure that going forward neurons cannot follow other neurons on critical proposal types.

### What does this mean for SNS voters?

If this proposed change is adopted, SNS neuron holders have to directly vote on treasury, minting and on de-reginster dapp proposals. If they do not directly vote, no vote will be cast for them and they might miss out on voting rewards.

In addition, if one user has multiple neurons in the same SNS, they have to directly vote with each of the neurons on critical proposals (as it is not possible anymore that some of the user’s neurons follow one of their other neurons). Luckily, this last part can be simplified by appropriate frontend design. For example, on the NNS frontend dapp it is already now possible for a user to select all neurons with which they want to directly vote on a proposal - so voting with all neurons would not be an additional effort.

### How will this affect SNS communities?

Without following, some proposals might take longer to be adopted. Moreover, it might be harder to get enough votes to adopt a critical proposal, especially after the Improvement *1) Increase the required threshold for all critical proposals*.

This means that SNS participants who submit a critical proposal might have to spend more time and effort in promoting their proposals, making other SNS users aware of them, and convincing SNS users that the proposal is necessary and well thought-out.

## Outlook

We are looking forward to your feedback regarding the removal of following and also the bigger context of other planned improvements.

We will keep you posted with progress on the increased threshold and also get back to you once we have a more concrete proposal on how to limit treasury proposals effectively.

Happy weekend!

-------------------------

hpeebles | 2023-11-03 17:55:23 UTC | #2

It may be quite hard to reach 50% without following even if everyone who sees the proposal votes to adopt it.

How about if the critical proposals require a 2/3 majority and a minimum of ~20% approval?

So if a proposal reaches 2/3 then it is executed immediately, else it runs until the deadline and at that point it will be executed only if the adopt votes are at least double the reject votes.

In the proposed scenario, a proposal could have 49.9% approval and no reject votes but it still wouldn't pass.

-------------------------

lara | 2023-11-03 18:16:26 UTC | #3

Hey @hpeebles, thanks for the feedback!

* In your proposal, would you remove following and then, because this might make reaching 50% harder, just lower the required thresholds of the proposed measure 1) to what you propose?

* I think your proposal can be understood in two parts: a) what it takes for a proposal to be immediately executed and b) what it takes to be executed by the end of the voting period. 

For a), I don't fully understand: 
> So if a proposal reaches 2/3 then it is executed immediately, else it runs until the deadline and at that point it will be executed only if the adopt votes are at least double the reject votes.

Why would it not be good enough to still execute immediately at 50%? Because with 50% even if you wait until the end, there is no way for the result to be turned anymore, right? Would you just say that for treasury proposals it should deliberatly be an even higher agreement that is required?
With a higher than 50% threshold my concern is a little that this changes quite some details in the code (where currently it is assume that at 50% the result is fixed). 

For b), as I understand you you propose that if a proposal reaches the deadline, it would be executed with 20% yes-vote-participation and a 2/3 no-to-yes ration. Right? 
I wonder if this idea could be combined with keeping the 50% for immediate execution. Or do you think this would be too confusing?

-------------------------

borovan | 2023-11-03 18:56:07 UTC | #4

@icpmaximalist wondered if you had any feedback

-------------------------

BenTaylor | 2023-11-03 22:25:28 UTC | #5

I think these proposals are a step in the right direction but don't fully address the problem. As I understand it, even after these proposals a bad actor could simply acquire 50.01% of a DAO's tokens and distribute all of their assets to herself. The lack of minority protections for token holders effectively means that a particular DAO's token becomes totally worthless as soon as somebody acquires a majority stake in the DAO.

I don't know what the solution is. But based on the framework you proposed, one potential solution would be to base the threshold vote for "critical" proposals on what percentage of voters vote against it. In other words, the voting power needed to pass a "critical" proposal could change based on the voting power that has voted against it.

What I just proposed is only a kernel of an idea. But hopefully it sparks some thought into how we can protect minority token holders.

-------------------------

wpb | 2023-11-03 22:11:13 UTC | #6

Hey @lara, 

I'm having a difficult time seeing how proposed improvements #1 and/or #2 won't end up bricking the treasury for a lot of SNSs, especially if the token swap results in a significant decentralized distribution of tokens.  It just doesn't seem like an SNS would be able to generate enough engagement for voting on the critical proposals under these conditions.  Is there any reason to believe that any of the current SNSs have achieved greater than 50% manual voting participation on any of their proposals?  Is it possible to collect that kind of data to verify?  If you do move forward with proposed changes #1 and #2, then can you also extend the voting period?

It seems like the best way to prevent a SNS team from moving a large fraction of the treasury at one time is to limit the amount of the treasury that can be transferred over a given timeframe and to remove the critical proposal topics from the All Topics catch all category.  Removing these critical proposal topics from the All Topics catch all would not require any NNS executed changes to SNS neuron configuration.  All it would be doing is removing default following for those proposal topics.  This approach would also enable people to actively set a Followee for these topics if they wish to have a Followee instead of always forcing them to vote manually with each of their individual neurons.

-------------------------

hpeebles | 2023-11-03 23:44:22 UTC | #7

Currently all proposals are adopted if by the time they hit their deadline they have more adopt votes than reject votes and at least 3% adopt votes.
The fact that they execute immediately once they reach 50% adopt votes is solely because that is the point at which they are guaranteed to be adopted by the time they hit their deadline.

My suggestion is to instead require 2/3 adopt votes rather than 50%, and 20% minimum rather than 3%.
So if 51% vote to adopt and 49% vote to reject then the proposal would be rejected, which I think seems reasonable for these critical proposals.

Also, I think having no following is probably a bad idea, everyone who took part in SNS sales will have multiple neurons which all follow the one with the longest dissolve delay, so up until now many people will have only been voting via hotkeys with that single neuron. If we remove following they'll have to do lots of manual work to vote with all of their neurons.

I think we should still allow explicit following on these topics but that they shouldn't be included when following on 'all topics'.

-------------------------

Seers | 2023-11-04 00:13:08 UTC | #8

Developing an algorithm for point 3 appears to be complicated. Perhaps we should consider enforcing a voting period, such as 7 days, for transfer proposals? This approach seems simpler than adjusting the thresholds and disabling following. @lara

Also, it would be nice to have different voting periods for different types of proposals in the future.

-------------------------

tiago89 | 2023-11-04 22:45:04 UTC | #9

Thanks Lara,

This is a very important topic and I am grateful that Dfinity is addressing this issue.

My personal opinion is that I would focus only on two changes:
- limiting the absolute amount of treasury transfer. (20% of initial SNS sale, so it would require 5 approved proposals to fully empty treasury)
- remove follow on critical topics.

I would not pursue the first one, as it might be too little or too much on different SNSs. And the other 2 seem to be enough to stop bad behaviour.

Although this is good, I think the root problem lies on the fact that there aren't alternative Known Neurons.

We desperately need the NNS code of Known Neurons, to exist on SNS. Hopefully after that more known neurons will appear and voters will have more options to choose from. I would put this "known neuron parity" as top priority,  along the other two.

In future SNS swaps, would recommend for Dfinity (and community) to demand 2 to 3 known neurons from start. So that any voter will at least have them on the NNS dApp to choose from.

This for sure will significantly improve the decentralization and robustness of our SNSs.

Hope this is helpful :pray:

-------------------------

yawajon998 | 2023-11-05 19:41:04 UTC | #10


Hello @lara,

Thank you for creating the thread: 

* **Governance Consistency**: If we begin to disable auto-following for special topics on the SNS will the same rules be applied to the NNS? There should be consistency between the NNS and SNS otherwise this appears like Dfinity strong arming projects. 

* **Voting Threshold Concerns**: I'm worried the 50% voting threshold could be too high without auto-follow. Larger stakeholders might not vote often. This could stop SNS projects from working well.

* **Autonomy in Following**: I think we should respect that people chose to follow certain neurons. Maybe we could do a one-time reset of follows instead? That way people can opt-in again for important votes. It balances engagement and choice.

* **Treasury limits** - we need flexibility for different projects. Can the proposals accommodate changing budgets? If this is to become similar to Dfinity grant process where teams require approval what was the point of the SNS in the first place? More clarity on what Dfinity is thinking here would be helpful.

-------------------------

lara | 2023-11-06 09:16:55 UTC | #11

Thanks for the feedback @wpb,

fully agree that it might be a risk that #1 and #2 make it harder for critical proposals to get passed. 
I think here it depends on what the community thinks whether this has more advantages than disadvantages.

>Is there any reason to believe that any of the current SNSs have achieved greater than 50% manual voting participation on any of their proposals?  Is it possible to collect that kind of data to verify?

While I understand the concern here, let me also propose a possible counter-argument. I wonder if this is the right question to ask / analyse as it might be that up until now the SNS communities just never *had to try* to reach a large base of their voters. I think one can argue that this is also a downside of following that proposers sometimes might have to try less hard to really reach the community and promote their ideas. Of course it might change the dynamics of a DAO if this is needed - now decisions are made within days and with such a change it might take weeks to mobilise voters. But I think one could argue that this can also be beneficial for a DAO. 
So I think maybe as a community we also have reflect on whether we think this would be a good direction to go (of course we could still do the analysis you asked in addition). 

> If you do move forward with proposed changes #1 and #2, then can you also extend the voting period?

I think this is a good idea! Even if one can promote and mobilise voters before the proposal is sent, it might be easier to achieve more active participation if voters have more time to cast their vote. 

Thanks, as a summary I understand you propose to lower the bar of measure 2 a bit and just remove the critical proposals from the catch-all "all topics" rather than fully removing following for them.

-------------------------

lara | 2023-11-06 09:20:06 UTC | #12

Thanks for these clarifications @hpeebles , I think I understand now!

> I think having no following is probably a bad idea, everyone who took part in SNS sales will have multiple neurons which all follow the one with the longest dissolve delay, so up until now many people will have only been voting via hotkeys with that single neuron.

Note that this can be solved to some extent on the different frontends, as argued above. For example, on the NNS FE dapp, once can select all neurons with which one wants to vote. Of course, this might require changes to other frontends or setting new hotkeys, but this work might possibly be a one-off rather than making the voter's life harder for all proposals going forward.

Thanks for your suggestions!

-------------------------

lara | 2023-11-06 09:27:44 UTC | #13

Hi @Seers , thanks for the feedback.

> Developing an algorithm for point 3 appears to be complicated

Could you elaborate on why you think this is hard? 
I haven't fully thought about the design, but I think the governance canister could just remember how many treasury transfers already happened in a given time period and when a new treasury proposal is submitted it can check whether this is still allowed with the given limits. Do you have concerns with this approach?

>Also, it would be nice to have different voting periods for different types of proposals in the future.


I think it would be possible to consider different voting periods for different proposals. This is also the case in the NNS. I see two potential drawbacks with this:
1. This makes the SNS code a bit harder (as now the governance canister has to keep track for each proposal in which category it falls and consider them in the right places)
2. I wonder if an increase in the voting period is enough for treasury proposals if the goal is to have a larger voter base agree to those: for example if many voters don't regularly check the proposals, it might still be easy to get treasury proposals through with little participation. Some of the other proposals encourage that more voters have to explicitly agree.

-------------------------

lara | 2023-11-06 09:39:13 UTC | #14

Thanks for the feedback! 

Agree that the known neurons are also a good idea - this is on our list too!
I think here the challenge might be that first there have to be experts on different SNSs that are as independent as possible from the original developer team (otherwise it does not help much for decentralisation to have multiple known neurons). 

So while I agree that it can help to include this in the governance system, I also think more than that is needed for 1) building known neurons and 2) ensuring that SNS participants don't just blindly select known neurons they see integrated in the system, but still make informed decisions on who would best represent their opinion in a DAO.

-------------------------

lara | 2023-11-06 09:51:41 UTC | #15

Thanks for the feedback and questions!

> will the same rules be applied to the NNS? There should be consistency between the NNS and SNS otherwise this appears like Dfinity strong arming projects.

This is not currently planned, but it is conceivable that the community also decides to require different thresholds for some NNS proposals going forward.
Note that while the governance system, with neurons and proposals, are similar in SNS and NNS, the code is not the same and there are already multiple differences betweeen the two governance systems.

Thanks for the additional inputs on Voting Threshold Concerns & Autonomy in Following.

> Can the proposals accommodate changing budgets? 

Note that changing treasury size could be taken into account, for example, by limiting how much can be moved from the treasury as a % of what is still in the treasury. 

> If this is to become similar to Dfinity grant process where teams require approval what was the point of the SNS in the first place? 

Note that the main idea of these measures is to ensure that treasury proposals are carried by a majority of the decentralised SNS community. So anyone who would like to propose that funds should be sent from the treasury to some account would have to make sure that they convince sufficent SNS DAO members. In my view this is in line with the main idea of DAOs.

-------------------------

skilesare | 2023-11-06 11:11:03 UTC | #16

A couple of basic questions(pardon the simplicity of the questions as I'm sure the answers are in the docs, but I think elevating the answers will help others).

1. Where are treasury funds actually held?  Are they held in a subaccount in one of the SNS System canisters? Or are they held in a canister that the SNS is a controller of(like a cycle wallet for the SNS Instance).

1b. If the answer to 1 is not "SNS System Canister" what is to keep the SNS from passing an upgrade to the treasury canister that changes the code to have an endpoint that gives full control over the funds(I'm guessing/hoping the answer is actually "SNS System Canister").

2. Will SNSs ever be able to set the 'minting account?' Some tokenomics setups require the minting of new tokens in a more systematic way than having a vote.  If you can change the minting account, is the new type even necessary? Can you just put an open-sourced, DAO-controlled canister as the minting account and then the DAO can update that to whatever they want?

Surrounding both of these is the fact that if the DAO still only needs 3% and followers are turned on then an upgrade canister proposal could always get around these measures. There is value in normalizing the desired flow, but if the other means still persists in some form it would be good to state so.

-------------------------

lara | 2023-11-06 12:28:36 UTC | #17

Happy to answer these questions!

> Where are treasury funds actually held? Are they held in a subaccount in one of the SNS System canisters? 

They are held in the respective ledger canister. Concretely:
* The ICP tokens in the treasury are stored on the ICP ledger in an account whose controller is the SNS governance canister
* The SNS tokens in the treasury are stored on the SNS ledger in an account whose controller is the SNS governance canister.
* The minting account is also an account on the SNS ledger that is controlled by the SNS governance canister. 

The ICP ledger cannot be upgraded by the SNS. The SNS ledger can only be upgraded according to the upgrade path that was pre-approved by the NNS. Therefore, I think the SNS DAO cannot circumvent rules by canister upgrades. 
I agree that in general it is very important to consider if some "measures" can just be avoided by doing the same over other proposals, but I think this is not the case here. 

> Will SNSs ever be able to set the ‘minting account?’ 

In the current setting, the minting account is always the SNS governance canister. This is needed if new tokens should be minted for voting rewards as can be done now. Of course other designs are possible, but it might require a clearer design proposal to discuss the concrete pros and cons. Indeed in such a case, your argument should then be taken into account: that if different thresholds should hold for minting proposals, then it must be carefully considered if they make sense with this new design too.

-------------------------

Seers | 2023-11-06 12:58:09 UTC | #19

> Could you elaborate on why you think this is hard?
I haven’t fully thought about the design, but I think the governance canister could just remember how many treasury transfers already happened in a given time period and when a new treasury proposal is submitted it can check whether this is still allowed with the given limits. Do you have concerns with this approach?

Essentially, I believe that restricting DAOs to a certain percentage of the treasury is a strong opinion to implement in code. For example, if we set the limit at 10%, it may be adequate in some cases (like with a 1M ICP treasury in HOT) but insufficient in others (like with a 20K ICP treasury in Ghost). It seems that many small DAOs could be unduly constrained by this rule.

[For context, several DAOs have already withdrawn about 100K ICP (including Catalyze, Modclub, and Sonic). Meanwhile, Ghost DAO withdrew their entire treasury of 20K ICP to provide liquidity.]

If we decide to enforce this policy, it might be necessary to also establish minimum and maximum thresholds for the governance token—not just percentages—and perhaps consider the real-time fiat value. I'm concerned that this may lead to additional complications in the future.

> 1. This makes the SNS code a bit harder (as now the governance canister has to keep track for each proposal in which category it falls and consider them in the right places)

I'm not familiar with the code, but I think it can be done easy by adding the new data on each proposal type.

> 1. I wonder if an increase in the voting period is enough for treasury proposals if the goal is to have a larger voter base agree to those: for example if many voters don’t regularly check the proposals, it might still be easy to get treasury proposals through with little participation. Some of the other proposals encourage that more voters have to explicitly agree.

Considering that the NNS also operates under liquid democracy and taking into account the similar debates we've had previously, we likely wouldn't want to go down that road (disabling following).

I've read a wide range of criticisms over the past weeks, and I believe most could have been avoided if there had been a set voting period that included the chance to reject the proposal and voice an opinion, even if the ultimate outcome remains unchanged. Such a provision would still be consistent with the principles of a liquid democracy.

-------------------------

lara | 2023-11-06 12:52:33 UTC | #20

Thanks @Seers! I see, your concern is less about the technical implementation of the thresholds, but rather about whether this would be appropriate for all SNSs and how this would affect further complications going forward.

Thanks for taking the time to elaborate on this - I think I understand your points much better now!

-------------------------

modclub | 2023-11-06 13:31:38 UTC | #21

Hi @lara ,

Will the percent limit on withdrawing from the treasury be on the amount remaining in the treasury or on the amount initially raised? If the former then would the treasury never be able to completely withdrawn?

Also instead of a limit are there any other solutions you explored? Would it be possible to hold the funds in escrow for some time limit after a SNS transfer proposal is accepted and then a secondary vote, without following could occur that could cancel the original transfer.

-------------------------

osman | 2023-11-06 17:06:47 UTC | #22

The offer is nice. However, the reluctance of neuron owners to participate in management may make management difficult. In critical decisions, it is correct to disable tracking. To make management easier, I recommend that critical quotes have two conditions. For the vote to be valid;
1- At least 50%+1vote of the total voting power must participate in the voting.
2- It would be appropriate to accept the proposal with the votes of at least 50%+1vote of the neurons participating in the voting.
In addition, it would be a correct decision to limit the amounts that can be withdrawn from the treasury, such as monthly or annual, for critical offers.

-------------------------

lara | 2023-11-06 14:23:39 UTC | #23

Hi @modclub,

> Will the percent limit on withdrawing from the treasury be on the amount remaining in the treasury or on the amount initially raised? If the former then would the treasury never be able to completely withdrawn?

This hasn't been designed and would of course be discussed with the community. One initial idea was to have a mix of a maximum % of the overall treasury content and an absolute maximum but not apply the % for amounts that are very small (to avoid what you mentioned, namely that there is a certain amount that cannot be retrieved). 

> Also instead of a limit are there any other solutions you explored? Would it be possible to hold the funds in escrow for some time limit after a SNS transfer proposal is accepted and then a secondary vote, without following could occur that could cancel the original transfer.

This is indeed a solution that we also wanted to consider. I think once could argue that this would put the "work" to mobilise voters a bit on those who disagree with a proposal while requiring a larger threshold to begin with may put the work more on those who submit the proposal. One could argue that it should be the responsibility of those who want to make a change to invest this effort.

-------------------------

skilesare | 2023-11-06 14:26:34 UTC | #24

[quote="lara, post:17, topic:24402"]
The ICP ledger cannot be upgraded by the SNS. The SNS ledger can only be upgraded according to the upgrade path that was pre-approved by the NNS. Therefore, I think the SNS DAO cannot circumvent rules by canister upgrades.
[/quote]

It makes sense that the balances are held there, but I was more curious what (principal, subaccount) they are held by.  Is that principal an SNS System canister or an SNS Instance canister?

-------------------------

lara | 2023-11-06 14:36:01 UTC | #25

The principal is the canister ID of the respective SNS governance canister. The subaccounts are fixed constants that I have to check again in the code.

I am not fully sure what you mean by 
> SNS System canister or an SNS Instance canister

Let's take for example the treasury of the Dragginz SNS. Then the principal controlling the treasury ledger account (on the ICP ledger or the Dragginz ledger) would be the canister ID from Dragginz' governance canister (so particular to this SNS instance). 
I am not sure if this should be called a *system canister*. But the code that this canister is running is system-provided and approved by the NNS (also see [this documentation](https://internetcomputer.org/docs/current/developer-docs/integrations/sns/introduction/sns-architecture#sns-as-a-system-functionality-connection-to-the-nns-community)). In more technical detail, this canister can only be upgraded to WASM code that is defined in the *SNS wasm modules canister SNS-W*, which is a system canister. 

Does this clarify your concern? 
Happy to also follow up with the more detailed subaccounts!

-------------------------

modclub | 2023-11-06 14:53:05 UTC | #26

[quote="lara, post:23, topic:24402"]
This is indeed a solution that we also wanted to consider. I think once could argue that this would put the “work” to mobilise voters a bit on those who disagree with a proposal while requiring a larger threshold to begin with may put the work more on those who submit the proposal. One could argue that it should be the responsibility of those who want to make a change to invest this effort.
[/quote]

Yes I believe we have some agreement here. The BoomDAO scenario illustrates how a voter mobilization could organically arise, and by removing auto-follow for the secondary vote, it ensures that any project must secure active consensus rather than passive approval. If the opposition succeeds a cool off period for sns treasury proposals could also be implemented.

-------------------------

memecake | 2023-11-06 14:54:30 UTC | #27

[quote="lara, post:1, topic:24402"]
**Increase the required threshold for all critical proposals**: Critical proposals are only adopted if 50% of the available voting power votes in favor of the proposal. This also implies that such proposals can only be adopted if at least 50% of the voting power participated in the voting, as opposed to other proposals where 3% yes-votes and simple majority are sufficient to adopt a proposal.
[/quote]

Achieving this goal seems incredibly challenging, and it might be time to consider a viable workaround. We invested nearly three full days in garnering votes from the community for our funding proposal, yet we received only a meager 28% participation rate.

In any democratic process, voting plays a pivotal role, and when participation is low, it can pose significant challenges for projects.

One potential solution we can explore is implementing a time-based execution mechanism contingent on achieving a voting majority. Under this system, major proposals would be made available for user votes for a minimum period of three days, ensuring ample opportunity for community participation and decision-making.

-------------------------

memecake | 2023-11-06 15:01:35 UTC | #28

[quote="Seers, post:19, topic:24402"]
[For context, several DAOs have already withdrawn about 100K ICP (including Catalyze, Modclub, and Sonic). Meanwhile, Ghost DAO withdrew their entire treasury of 20K ICP to provide liquidity.]
[/quote]

FYI - Collecting funds through a democratic process aligns perfectly with SNS principles. Sonic has diligently raised awareness before initiating this funding process, and our objectives are transparent for everyone to see. The overarching goal here is not to stifle DAOs but to ensure fairness. When an individual decides to vote and self-elect without seeking the permission of users, it can lead to issues that need addressing.

-------------------------

skilesare | 2023-11-06 15:27:02 UTC | #29

[quote="lara, post:25, topic:24402"]
Let’s take for example the treasury of the Dragginz SNS. Then the principal controlling the treasury ledger account (on the ICP ledger or the Dragginz ledger) would be the canister ID from Dragginz’ governance canister (so particular to this SNS instance).
I am not sure if this should be called a *system canister*. But the code that this canister is running is system-provided and approved by the NNS (also see [this documentation](https://internetcomputer.org/docs/current/developer-docs/integrations/sns/introduction/sns-architecture#sns-as-a-system-functionality-connection-to-the-nns-community)). In more technical detail, this canister can only be upgraded to WASM code that is defined in the *SNS wasm modules canister SNS-W*, which is a system canister.

Does this clarify your concern?
Happy to also follow up with the more detailed subaccounts!
[/quote]

Yes..this is what I'm looking for.  I'd call that an SNS Instance Canister since each SNS gets its own Governance canister.  This being the case, there would be two potential ways to currently to move treasury funds:

1. Update the Dragginz SNS Governance canister with a WASM that has a distribute function(I'm guessing this would have to pass an NNS vote as you say that only WASMs IDd by the SNS Wasm module canister can be installed.
2. Register your own Generic Nervous System function(https://github.com/dfinity/ic/blob/63d129a74be8cbd8ed9c905e4a40c0e41a055770/rs/sns/governance/canister/governance.did#L141) for distributing each type of asset.  I'm assuming that when a generic governance function is called it is executed from the governance function?

-------------------------

lara | 2023-11-06 15:45:44 UTC | #30

> Yes…this is what I’m looking for.

Glad to hear that!

> two potential ways to currently to move treasury funds:
> 1. with a WASM that has a distribute function

Correct. This would require an NNS approved new version of the SNS and therefore an NNS proposal.

> Register your own Generic Nervous System function  for distributing each type of asset.

This is actually explicitly not possible. The governance canister prevents the registration of generic proposals that target an SNS canister or the ICP ledger (you can see this [here](https://github.com/dfinity/ic/blob/63d129a74be8cbd8ed9c905e4a40c0e41a055770/rs/sns/governance/src/governance.rs#L769C12-L769C37)). This should ensure that SNS voters can always detect such important proposals as such. Also, this is to enforce some access controls and ensure they cannot be circumvented by generic proposals.

-------------------------

daniel-wong | 2023-11-06 15:52:56 UTC | #31

> Where are the treasury funds actually held?

[Here][sns-tokens] is the code that determines where SNS tokens are held by the treasury.

[sns-tokens]: https://sourcegraph.com/github.com/dfinity/ic@f858fabeb5e26a5292ebccb2a63d124e1d35d9fb/-/blob/rs/sns/init/src/distributions.rs?L401:19-401:57

Whereas, [here][icp] is the code that determines where ICP is held. 

[icp]: https://sourcegraph.com/github.com/dfinity/ic/-/blob/rs/nns/governance/src/governance.rs?L7823

> Will SNSs ever be able to set the ‘minting account?’

You mean when the SNS is created? I can't imagine that supporting this is on our roadmap, but my guess is that if there is "significant" demand, we could do it (again, not making any promises here). There are probably a bunch of security implications that I have not thought of -> it might be hard to do this -> my guess is that the demand would have to be "very" significant to overcome the security re-think activation energy.

For the time being, [here][minting] is the code that sets the minting account.

[minting]: https://sourcegraph.com/github.com/dfinity/ic/-/blob/rs/sns/init/src/lib.rs?L667

-------------------------

skilesare | 2023-11-06 15:56:37 UTC | #32

[quote="lara, post:30, topic:24402"]
This is actually explicitly not possible. The governance canister prevents the registration of generic proposals that target an SNS canister or the ICP ledger (you can see this [here](https://github.com/dfinity/ic/blob/63d129a74be8cbd8ed9c905e4a40c0e41a055770/rs/sns/governance/src/governance.rs#L769C12-L769C37)). This should ensure that SNS voters can always detect such important proposals as such. Also, this is to enforce some access controls and ensure they cannot be circumvented by generic proposals.
[/quote]

Perfect!  Exactly what I was looking for.

-------------------------

osman | 2023-11-07 13:23:35 UTC | #33

Phase-1

**Purpose:** transparent, auditable, and manageable DAO

**Voting proposals:** Each proposal is submitted to voting as a “normal proposal”. If the proposal includes a budget request, token transfer from the treasury to other accounts, and an audit request, the proposal automatically receives "critical proposal" status.

The proposal document should also include the option "This bid should be considered as a critical bid". If xx% of the voters have voted by ticking this tab in the voting, this proposal also gains the status of "critical proposal". This is how the community's opinion is reflected, especially in requests for major changes to the platform.

Since the voting conditions for offers with Critical Offer status are different, such offers are put to vote again under critical offer conditions.

**Audit:** An audit mechanism should also be established in DAOs. Supervisory authority is selected based on the principle of randomness from wallets with 1/1000 or more of the total staked tokens. A designated reward is given to the wallet that performs the audit.

The audit reward budget is created by considering the balance between staking interest, maturity reward and voting reward expenses. (My suggestion is to reduce the staking interest by 1% and allocate the resulting budget as the audit budget.) At the end of one year, the unused audit budget is transferred to the DAO treasury.

As soon as an audit proposal passes the vote in the DAO voting, the wallets, accounts, links and interface pages subject to the audit are automatically blocked from access until the audit is concluded.

The voting result and audit information are sent to the auditor wallet selected with the principle of randomness as NFT, which has a lifespan of 45 days and is automatically transferred to the DAO archive wallet at the end of 45 days at the latest. Auditor within 15 days

1-can do transaction

2- Can return NFT

3-may not take any action.

After 15 days, the NFT with no transactions is automatically transferred to the 2nd control wallet. If the 2nd Wallet does not make a transaction within 15 days, it will be transferred to the 3rd Wallet. As soon as an auditor starts trading on the audit NFT, the life of the NFT is reset and its 45-day life starts over again. If no wallet has last processed the relevant NFT, the transaction is automatically deemed to have been made. (In this case, the vote is considered rejected) and the NFT is transferred to the DAO archive wallet. Here, I conclude that since DAO members do not perform their Supervisory duty, voting has no meaning.

audited decision

**1- no error or defect:** The audit is closed.

**2-partially defective:** The decision is implemented by transferring xx% of the amount from the relevant wallets to the DAO treasury wallet. Wallets, wallets and interfaces that were previously closed to access are opened to access.

**3- big flaw:** The relevant wallets are transferred to the DAO treasury. The relevant links and interfaces are removed from the platform and are removed from use.

-------------------------

osman | 2023-11-06 21:34:05 UTC | #34

The purpose of this proposal should be to ensure that the Dao treasure is used in project development. In addition to the ideas stated in the article;
1- Clearly budgeting where, how, how long and what will be done with the funds to be requested from Dao.
2- If the budget allocation is accepted in the vote, the budget should not be transferred to the relevant account immediately. A certain percentage of the budget for the work to be done, for example 30% in advance, should be transferred to the relevant account, and the remaining part should be transferred to the relevant account in the form of progress payment upon completion of the work .
I think it is important to add this idea to the proposal to ensure the survival of the projects.
In fact, while preparing this proposal, the proposal can be matured by taking the experience and opinions of the Definity Foundation budget management unit into consideration.

-------------------------

yawajon998 | 2023-11-06 21:53:11 UTC | #35

I do not agree:

* If ICP value goes down during work, this can be bad for projects because they take big risk.
* You do not think about how SNS treasuries use their own project tokens. They need them for many things right now, like giveaways and use inside apps, not just for plans that are far in the future.
* And why not ask Dfinity to do the same thing? If we trust Dfinity, we should trust SNS projects too. We should look into projects carefully and choose to put our money in ones we trust.

If someone wants to control what an SNS project does, they should buy more tokens and use their votes. One person's post on the forum should not be more important than the votes from everyone in the SNS.

-------------------------

hpeebles | 2023-11-06 23:22:42 UTC | #36

I think we should keep the solution really simple.

Restricting how much of the treasury can be extracted in a given time period seems unnecessarily complex and overly opinionated since there are valid use cases where a large portion of the treasury should be extracted, for example GHOST sent pretty much their entire treasury to form liquidity pools.

So I still think we should simply make the critical proposals require 2/3 majority to pass and raise the minimum adopt rate from 3% to something like 20%.

This is simple to implement and more importantly, simple to explain to voters. While it would still allow the entire treasury to be withdrawn if 2/3 of the voters approve of it, and I think that is how it should be, if the vast majority of voters want it, then it should happen.

-------------------------

modclub | 2023-11-07 00:31:54 UTC | #38

 We agree. This seems like the most straightforward and effective solution.

-------------------------

Seers | 2023-11-07 02:57:18 UTC | #39

> I think we should keep the solution really simple.

Totally agreed.

> So I still think we should simply make the critical proposals require 2/3 majority to pass and raise the minimum adopt rate from 3% to something like 20%.

I think that is relative. Our proposal, for instance, passed with 65% (and one could argue that most of the VP knew about it, agreed with it, or even suggested it). If we increase these percentages, they might need to decrease in one year or two.

Another issue is to define what constitutes a critical proposal. We could argue that any dapp change is critical, especially if some of these dapps end up having more TVL than the treasury.

All in all, I still feel better about beginning to add code that allows each proposal to execute with different voting periods (and sometimes enforce them). But I'm ok with your proposal too.

> if the vast majority of voters want it, then it should happen

100%. Sometimes we pay more attention to influencers in twitter than to the DAO itself.

-------------------------

wpb | 2023-11-07 03:03:15 UTC | #40

[quote="hpeebles, post:36, topic:24402"]
So I still think we should simply make the critical proposals require 2/3 majority to pass and raise the minimum adopt rate from 3% to something like 20%.
[/quote]

I agree your proposal is sensible.  Do you think there should be changes related to following for these critical proposals?

-------------------------

wpb | 2023-11-07 03:31:40 UTC | #41

[quote="lara, post:11, topic:24402"]
While I understand the concern here, let me also propose a possible counter-argument. I wonder if this is the right question to ask / analyse as it might be that up until now the SNS communities just never *had to try* to reach a large base of their voters. I think one can argue that this is also a downside of following that proposers sometimes might have to try less hard to really reach the community and promote their ideas.
[/quote]

Fair point.  This is uncharted territory for ICP since we have always had following.  Perhaps people would be much more actively involved if they were required to vote manually on every critical proposal to received voting rewards.  Speaking from my own experience, I don't think I have ever participated in an SNS vote manually.  I don't have the bandwidth.  It's all I can do to keep up with what is happening in the NNS.  At this time is seems like a high risk that SNSs could lose access to their funding stream if the bar is set too high.  

[quote="lara, post:11, topic:24402"]
as a summary I understand you propose to lower the bar of measure 2 a bit and just remove the critical proposals from the catch-all “all topics” rather than fully removing following for them.
[/quote]
Yes, it would be exactly the same as the technical implementation of proposal 34485, which removed the Governance topic from the All Topics catch all in the NNS.  This is the mechanism by which default following was removed for the Governance topic.  Hence, there is precedent that remains in place today.

-------------------------

osman | 2023-11-07 09:28:22 UTC | #42

When I wrote my this opinion, I wrote it because I believe that DAOs should provide financial support to their projects. If the DAO does not provide financial support to the project, the DAO has no meaning. The problem here is that the 1-DAO treasury gains the ability to be controlled by the community.
2-find a way to control how and where the budget provided by Dao is used.

-------------------------

osman | 2023-11-07 09:34:19 UTC | #43

Perhaps in an emergency situation, the solution can be kept simple at first. However, it is clear that a large and comprehensive study must be carried out on the DAO management algorithm for a permanent and correct solution.

-------------------------

hpeebles | 2023-11-07 09:48:58 UTC | #44

>I think that is relative. Our proposal, for instance, passed with 65% (and one could argue that most of the VP knew about it, agreed with it, or even suggested it). If we increase these percentages, they might need to decrease in one year or two.

In your case the proposal would still have passed, it just won't have been executed early. The proposal needs 2/3 majority of the votes cast, not 67% of the total voting power.

-------------------------

hpeebles | 2023-11-07 09:50:25 UTC | #45

I think we should still be allowed to follow, but it shouldn't be included in the 'all topics' category.

-------------------------

lara | 2023-11-07 09:50:30 UTC | #46

> Restricting how much of the treasury can be extracted in a given time period seems unnecessarily complex and overly opinionated since there are valid use cases where a large portion of the treasury should be extracted, for example GHOST sent pretty much their entire treasury to form liquidity pools

I think the reason why restricting the treasury movements per period makes sense is because for many actual attack scenarios this is the only measure that might allow to slow down an attacker / give the opportunity to react: 
Let's say for example we have a DAO where the original developers get little voting power, say only 10%.  Let's then say someone manages to (unnoticeably) acquire a large share of the SNS voting power, for example by participating in the swap and in the neurons' fund and by later getting, all of a sudden, a lot of SNS tokens on some DEX and staking them. If they manage to get the majority (or a 2/3 majority with the proposed change) of the voting power very quickly, they can then just make a treasury proposal, get the ICP, and run. 
If the treasury proposal were limited at least there is a limited amount that such an attacker could get out immediately. It would also potentially allow the SNS and NNS community to take additional measures before the next proposal can be sent. 

I see your point that it might of course also limit legitimate treasury proposals. But if they are well planned, couldn't they just be made over a few transfers that then would then take maybe 2 weeks?

-------------------------

hpeebles | 2023-11-07 09:54:09 UTC | #47

Hmm interesting point.

Maybe the max withdrawal amount per period can be configured during the SNS sale.

So teams who know they will want to withdraw lots must state that publicly before accepting any investment.

Then changing that amount would also be a critical proposal and maybe it only takes effect some duration after the proposal executes.

So if someone wants to withdraw the entire treasury they'd first have to increase the limit, which would be public and would give the other SNS voters time to organise before they can actually withdraw it.

-------------------------

Seers | 2023-11-07 12:22:50 UTC | #48

[quote="hpeebles, post:7, topic:24402"]
So if 51% vote to adopt and 49% vote to reject then the proposal would be rejected, which I think seems reasonable for these critical proposals.
[/quote]

This could leave the DAO exposed to minority attacks on which the attacker gets 26% of the VP and blocks all the transfer proposals up to 51% adopt, or not?

> But if they are well planned, couldn’t they just be made over a few transfers that then would then take maybe 2 weeks?

I think having a period of weeks instead of months makes this point much more reasonable. Or perhaps making it configurable like Hamish suggested. @lara

-------------------------

lara | 2023-11-07 14:16:44 UTC | #49

[quote="Seers, post:48, topic:24402"]
I think having a period of weeks instead of months makes this point much more reasonable. Or perhaps making it configurable like Hamish suggested. @lara
[/quote]

Right. Note that this part as not been designed and we could have a separate thread to define the period and the thresholds in more detail with the community. 
I agree that a limit per week might be a good compromise that ensures that with some planning legitimate proposals can still be realised in a reasonable amount of time, but attackers would be slowed down a little.

-------------------------

lara | 2023-11-07 14:21:26 UTC | #50

> Then changing that amount would also be a critical proposal and maybe it only takes effect some duration after the proposal executes.

I think if this time-factor is in this proposal this might achieve a similar goal and can be an alternative. 

In terms of simplicity, I wonder if this is simpler than just requiring a limit on the proposals. I also think requiring a limit is probably the safer default, as often otherwise users forget to consider the "bad" scenarios and might just set a high limit to get things done quickly in a normal situation, leading to open attack vectors later.

-------------------------

osman | 2023-11-07 18:43:31 UTC | #51

**Phase-2**

**Establishing the DAO Board of Directors:** It is elected for 1 year by voting.

From the project team: 2 people

From Definity Foundation: 1 person

2 Investor members with a wallet balance of 1% or more

It consists of 5 members in total.

In the election voting proposal, candidates should be able to apply in separate tabs from the project team, definition foundation and investor members. Each category should be subject to separate voting. Definity foundation must mandatorily provide 1 person for each DAO.

Depending on the voting results, a manager badge with a lifespan of 1 year is automatically sent to the wallets NFT elected to the board of directors. This badge contains the rights that these wallets will have on the platform.

**Duties of the DAO board of directors:**

1-to prapere 2 reports a year, every 6 months, about the development of the project and publish them in the platform announcements section.

2-Preparing and voting on decisions regarding the development of the platform, and monitoring these decisions.

3- Keeping track of critical voting decisions

5-

6-

-------------------------

skilesare | 2023-11-07 15:15:22 UTC | #52

I've been thinking a lot about this. DAO can be powerful, but no one has really cracked the code(and different codes likely exist depending on the DAO size).  One of the things that seems to be a big issue that should seem obvious when you look "how the world actually works" is that almost all functional institutions have some form of executive function.  Figuring out how to decentralize that may be tilting at windmills as the definition seems to include the centralization of power.(blockchains are great at decentralizing execution when deterministic math is involved and very bad at it in most other observed situations).

Hard Fact:  A $3M DAO can't afford to pay a 5 qualified member board enough to keep it interesting and pay programmers to keep building the protocol.  Locked SNS tokens can't pay the mortgage.  If you reach critical mass, you may have volunteers that are willing to do this kind of thing, but by the time you reach critical mass, you likely have the funds to pay. Conundrum.

-------------------------

osman | 2023-11-07 15:37:52 UTC | #53

It is a management framework prepared for discussion. When this framework is discussed and matured and put into practice, application procedure algorithms will need to be prepared to fill this framework. In other words, the procedures that will be needed, such as the audit algorithm, management renewal algorithm, service purchasing algorithm, software service acceptance algorithm, marketing sales service algorithm, will be integrated into this framework.

In the current situation, we have learned through experience how the DAO treasury was emptied by a vote based on the voting power it had.

-------------------------

tiago89 | 2023-11-08 05:46:50 UTC | #54

Osman,

Love the enthusiasm, but such decisions would need to be at the "application" level, not "protocol".

If a Y DAO wants to pursue what you say, they can create a "budget management" canister, that is open and added to be controlled by that Y DAO. Then the treasury proposals that are commonly accepted by the voters are transfers to that "budget canister".

Also, these more "complex" constructs frequently need changes to better adapt to the mission a certain DAO is pursuing, so it's much better that they can fully control that experience (and not at the protocol level).

Hope this is helpful in some way.

-------------------------

tiago89 | 2023-11-08 05:55:22 UTC | #55

I also tend to disagree on the "customization" part.

Convention over Configuration principle. The design and code will be a lot simpler and easier to implement/maintain. It also (re)opens attack vectors as Lara said.

If it's week(s) apart, and reasonable amounts (the OR mix). Think any legitimate case would still pass. They only have the extra proposals and extra time cost, which is small compared to the security benefit an SNS should give.

-------------------------

lara | 2023-11-10 08:59:02 UTC | #56

Hi everyone,

First, I want to thank everyone for sharing their thoughts, concerns, and ideas for improvements. **This was a very constructive discussion with many excellent inputs!**

After revising all the ideas that were shared, we adapted the original proposal with the community’s ideas. In the following we present the resulting proposal.

## What are critical SNS proposals?

As in the original post, we propose to consider the following SNS proposal topics to be “critical SNS proposals”. (See original post for motivation.)

* **`Transfer_sns_treasury_funds` proposals**: These proposals allow an SNS to move ICP or SNS tokens from the SNS’s treasury to a given account.

* **`Mint_sns_tokens` proposals (name tbd):** This type of proposal will allow the SNS to mint new SNS tokens. Note that this proposal type does not exist yet, but is being developed as shared [here](https://forum.dfinity.org/t/new-sns-ability-to-mint-sns-tokens-revised-thresholds-for-voting/23382).

* **`Deregister_dapp_canisters` proposals:** These proposals allow an SNS to give up control over a dapp canister and hand it back to a (centralized) controller.

## Updated overview of proposed improvements

The newly proposed high level measures, and their current status & next steps, are as follows.

1. **Increase the required threshold for all critical proposals**: Critical proposals are only adopted if at the end of the voting period ⅔ (67%) of the used voting power votes in favor of the proposal and at least 20% of the total voting power voted yes. Critical proposals are executed immediately if ⅔ (67%) of the total voting power votes in favor of the proposal.
*Details*: Increasing the thresholds was presented to the community in [this](https://forum.dfinity.org/t/new-sns-ability-to-mint-sns-tokens-revised-thresholds-for-voting/23382) and [this](https://forum.dfinity.org/t/safe-guards-for-the-access-to-the-sns-treasury/19669) forum post and work on this has started. In this forum thread the community proposed alternative values for these thresholds. We now propose to adjust the design according to the community’s proposal.
*Next steps*: This will slightly change the ongoing work, but the changes are small and the already planned work can easily be adapted accordingly. We plan to update [this forum thread](https://forum.dfinity.org/t/new-sns-ability-to-mint-sns-tokens-revised-thresholds-for-voting/23382) accordingly and keep you posted on the progress there.

2. **Remove critical proposals from the catch-all “All topics”**: Voters can follow other neurons on critical proposals, but each neuron has to make an active decision of following for each critical proposals type as the “All topics”-following is not applied to critical proposals. Users who have multiple neurons can actively vote with just one of them and follow this one neuron with all their other neurons.
It would be possible to reset following on critical proposals in all existing SNSs as an addition to this measure.
*Details*: This is an alternative to “Remove following for critical proposals” as proposed above that was proposed by the community. This means that the complete removal of following would not be pursued anymore.
*Next steps*: If the community does not express concerns here, we plan to remove critical proposals from the catch-all and propose it to the NNS as part of the normal SNS release process. We would then discuss in a separate forum thread whether, in addition, following on critical proposals should also be reset in existing SNSs. This addition can then be done separately if this is what the community agrees on.

3. **Limit SNS treasury proposals**: Limit the amount of tokens that can be moved by SNS treasury proposals. This might, for example, be a limit of how many ICP and SNS tokens can be moved out of the SNS treasury per week or month.
*Details*: This measure was included in the original proposal above. The community expressed some concerns about this measure hindering legitimate proposals. We think this disadvantage is outweighed by the following advantages: This is one of the only measures that helps to slow down attacks where a malicious party gets a large portion of the voting power. Moreover, legitimate proposals that require a large portion of the treasury can still be done, they might just require more than one proposal and a bit more time. Since treasury movements are normally planned well in advance and not urgent, this is acceptable. The concerns about slower legitimate proposals can additionally be mitigated by choosing a time period that is not too long (e.g., only weeks or even days).
*Next steps*: We propose to share a more concrete design proposal in the coming weeks, which will then be discussed with the community. This will include agreeing on an appropriate time period.

4. **Increase the voting period for critical proposals**: Increase the voting period for critical proposals to be 5-10 days (as opposed to 4-8 days for normal proposals). As these proposals require a larger voting participation it might be beneficial to give voters a bit more time to participate. On the other hand, the voting period should not be too long in order not to unnecessarily block legitimate proposals. The [wait-for-quiet algorithm](https://wiki.internetcomputer.org/wiki/NNS_Canisters#Proposal_decision_and_wait-for-quiet) already ensures that controversial proposals will have a longer voting period so that voters have the time to react (now a proposal that starts with a 4 day voting period can be increased to have at most 8 days, after the change a 5 days can be increased to 10 days).
*Details:* This is a community proposal from this thread.
*Next steps*: If the community does not express concerns, we plan to realize this and propose it to the NNS as part of the normal SNS release process.

## Summary of next steps

While it is important to consider all planned improvements in one overall plan, the individual improvements can be worked on, discussed in detail, and released one-by-one. If the community agrees to the high level plan, the summary of the next steps from our side are as follows.

* Add the following measures to our roadmap and, when ready, propose them to the NNS as part of the normal SNS release process.
  * Increase the required thresholds for all critical proposals to 67% and 20%.
  * Remove critical proposals from the catch-all “All topics”.
  * Increase the voting period for critical proposals to 5-10 days.
* Work on designs for the following measures and share more detailed designs with the community in a separate thread.
  * Limit SNS treasury proposals.
  * Clarify if following on critical proposals should be reset in existing SNSs.

As always, we are looking forward to your feedback! I wish everyone a great day!

-------------------------

modclub | 2023-11-11 02:07:19 UTC | #57

Thanks @lara, this proposal suggestion looks great. We hope to learn more details soon about the treasury limits. One thing we have been considering is swapping part of the treasury for other tokens like ckBTC, ckETH or ckUSDC ( if supported in the future ). We hope that these restrictions are not too limited that this would not prevent swapping larger percents 20-30% of the treasury into these tokens.

-------------------------

wpb | 2023-11-11 04:48:06 UTC | #58

[quote="lara, post:56, topic:24402"]
Increase the voting period for critical proposals to be 5-10 days (as opposed to 4-8 days for normal proposals).
[/quote]

In my opinion, 5 days is still too short.  I don't see anything wrong with making it 14 days for a minimum voting period for critical proposals.  The use of the term critical here is not in reference to security issues, so I don't see any need to be in a hurry to get them completed.  These types of proposals should all be planned well in advance.  

[quote="lara, post:56, topic:24402"]
As always, we are looking forward to your feedback!
[/quote]

Overall it seems like this revised proposal is a very sensible path forward.  Great job leading the discussion.

-------------------------

Seers | 2023-11-11 17:53:13 UTC | #59

Thank you, Lara, for the work you've done. In the future, we would still appreciate having an option to disable the immediate execution of certain proposals once their threshold is reached, allowing them to continue for the full period. This might give people time to change their minds and perhaps vote manually.

-------------------------

modclub | 2023-11-11 16:35:58 UTC | #60

Hi @wpb ,

We think this depends on the limit on the transfer. We would be fine to plan these in advance but if multiple proposals are necessary to cover our costs then we risk running out of funding for payroll or the value changes drastically due to market volatility. 

The SNS was a complex and costly process. We worry that adding so many more restrictions will essentially increase our costs to operate effectively. If an attacker does get majority vote, we are also not sure what an additional 10 days will do.

-------------------------

tiago89 | 2023-11-12 02:37:18 UTC | #61

Thank you Lara.

This looks great and resonable.

Following from what Seers is saying, think we **still** have a very important issue to solve, that is beacon neuron triggering the voters immediately, before they even have a chance to be against. 

My proposal is that: **By design**, known neurons should only trigger around the last day of the voting period. Especially for these critical proposals.

Think this would be a very important addition. Imagine a proposal is out, and the beacon "triggers" out with all the follower's. It could be hard for the "non followers" to still be able to win. Even after the changes suggested above.

Known neurons are there to ensure voters always get their rewards, **not to remove their will**.

Was wandering, any idea if the known neurons concept will happen in the SNS anytime soon? Could this "behaviour" be implemented to it?

If others agree and think known neurons should have a forced "delay" on their trigger, kindly react, second or comment your support.

Thanks, hope this is helpful. :pray:

-------------------------

singularity | 2023-11-12 10:41:27 UTC | #62

I thinK it makes sense for the DAO to try and reach members to participate,  so that it indeed works like a DAO. The ones that dont become proper DAOs would be okay to die off.

-------------------------

lara | 2023-11-14 10:53:38 UTC | #63

[quote="Seers, post:59, topic:24402"]
he immediate execution of certain proposals once their threshold is reached, allowing them to continue for the full period. This might give people time to change their minds and perhaps vote manually.
[/quote]

Thanks for the feedback. Note that proposals are only executed if their result cannot be changed anymore even if all other voters would still vote. 

Maybe with "changing their minds" you also refer to following not kicking in immediately so that people can still choose to vote directly?
This has also been discussed at some point in the context of the NNS. Note that this might require quite some changes to how wait-for-quiet works: in the current design, votes cannot be changed. Based on this, wait-for-quiet takes into account the votes for adoption and rejection and increases the voting period if the results flips back-and-forth - so if the proposal is controversial. This also holds for voting more generally: the trend of the vote is currently always clear and voters can adjust their behavior accordingly - which I think is a big advantage of the design.

One easy "solution" for ensuring that neurons can vote directly is that followed neurons can change their behavior to facilitate this for their followers: They can only cast their vote after a few days. This allows their followers to have enough time to vote directly if they wish to do so and at the same time followers can be sure that a vote will be sent if they didn't get around to it in these days. Neurons that behave this way could be favored to be followed  by other neurons.

-------------------------

lara | 2023-11-14 10:57:20 UTC | #64

[quote="wpb, post:58, topic:24402"]
ys is still too short. I don’t see anything wrong with making it 14 days for a minimum voting period for critical proposals. The use of the term critical here is not in reference to security issues, so I don’t see any need to be in a hurry to get th
[/quote]

How about we start with 5 days and try it out? We thought this is a nice compromise between having a bit more time but still being able to also wait for 2 proposals if this should be needed with the limits.
Once this is parametrised, it would also be easy to adjust these numbers again if the community thinks that with new learnings something else makes more sense. 

I would also like to note that there is also the wait-for-quiet algorithm that makes sure that if the proposal is controversial it will automatically have a longer waiting period of up to 10 days. This is the main idea of wait-for-quiet: if a topic is controversial, the voting period will automatically be increased. On the other hand, if the result is very clear and there is no need to wait longer, the algorithm allows to make faster decisions.

-------------------------

lara | 2023-11-14 11:07:21 UTC | #65

Thanks for this idea.
As mentioned in another answer above, there are also quite some downsides to waiting with following until the end, so I think this would have to be carefully considered.

As also mentioned, followed neurons could be encouraged by their followers to wait longer with voting so they have the opportunity to case a direct vote.

> Known neurons are there to ensure voters always get their rewards, **not to remove their will**.

I slightly disagree with the first part of this statement. Even though some neurons might use it this way, one of the main goals of following is also that a neuron can follow different experts on different topics. It is in every neuron's interest to vote in the best long-term interest of the IC. Therefore, a neuron should always trust the followed neuron to make good decisions.
Of course it could be that there are scenarios where neurons gain more by the voting rewards and so they don't care about whether the decisions were good or bad - but I think the design should not incentivise this kind of thinking but rather incentivise neurons to make sure whoever they delegate their vote to will make a good decision.

-------------------------

wpb | 2023-11-14 17:11:20 UTC | #66

[quote="lara, post:64, topic:24402"]
How about we start with 5 days and try it out?
[/quote]

Sounds good to me.  Let’s try it out as you suggested.

-------------------------

tiago89 | 2023-11-15 16:42:10 UTC | #67

Hi Lara,

Thanks for this feedback. I better understand now that simply controlling time could lead to more harm than good.

After a bit of reflection I would argue that the **root problem is the lack of "experts to follow"**. :frowning: 
That is the "though nut to crack", and if the SNS framework (and swap) can solve it, that could be a big boost in terms of success and reputation.

Think the end goal is that on any SNS swap end, it comes with 3 known neurons for voters to choose from. There is a "minimum guarantee" that is given by the SNS swap process (on the proposal it could have a field to add 3 known neurons). Later more known neurons can be onboarded.

How each project picks them up and rewards them (vested tokens), is entirely up to them. The NNS/Community can then judge if they look like independent parties and that they have the expertise to vote on the proposals.

I wouldn't be surprised if it emerges a pattern where one known neuron is the dev team, another neuron is a reviewer/security auditor, and another one a community elected governance neuron (more for gov / treasury proposals review/consensus).

With this minimal setup, then SNSs can be more functional, more decentralized and with the right amount of tension / distributed work.

So, wrapping up, we desperately need the known neurons concept :slightly_smiling_face: 

Thanks for listening, kindly request feedback, from both Lara and community :pray:

-------------------------

lara | 2023-11-17 16:25:50 UTC | #68

For those following this thread, please find [here](https://forum.dfinity.org/t/sns-critical-proposals-no-reset-of-following/24767) the follow up on **Remove critical proposals from the catch-all “All topics”**.

-------------------------

lara | 2023-11-20 10:34:32 UTC | #69

Thanks @tiago89 for this idea!
I agree that it would be a useful goal for SNSs to get more "experts to follow".

I see the motivation to embed this in the SNS launch process, but wonder if this is needed. Any SNS launch is approved by the NNS community, so if the "good practice" emerges that an SNS should have at least 3 initial neurons to follow, then the NNS could just reject all SNSs that do not satisfy this. However, leaving this to voting would also leave the flexibility for exceptions in case where an SNS project can convince the NNS voters that it is justified.

In terms of the "known neurons" concept: we do have it on our roadmap to also look at this for the SNSs, but don't have a clear plan yet when this will be done.

-------------------------

ckMood | 2023-11-20 13:06:00 UTC | #70

[quote="wpb, post:6, topic:24402"]
Removing these critical proposal topics from the All Topics catch all would not require any NNS executed changes to SNS neuron configuration. All it would be doing is removing default following for those proposal topics. This approach would also enable people to actively set a Followee for these topics if they wish to have a Followee instead of always forcing them to vote manually with each of their individual neurons.
[/quote]

This.

[quote="tiago89, post:9, topic:24402"]
We desperately need the NNS code of Known Neurons, to exist on SNS.
[/quote]

This.

I also think we should keep it simple and adopt one of two methods to address this:

One solution I like from another thread posted by @EmrahCoskun:

"Might I suggest considering a dynamic threshold based on average participation over the past three months, yet never dropping below 30% of the actual total voting power? It seems a fair compromise."

or 

[quote="hpeebles, post:36, topic:24402"]
So I still think we should simply make the critical proposals require 2/3 majority to pass and raise the minimum adopt rate from 3% to something like 20%.
[/quote]

.
[quote="lara, post:49, topic:24402"]
I agree that a limit per week might be a good compromise that ensures that with some planning legitimate proposals can still be realised in a reasonable amount of time, but attackers would be slowed down a little.
[/quote]

I think there should be limits per weeks.

[quote="lara, post:65, topic:24402"]
As mentioned in another answer above, there are also quite some downsides to waiting with following until the end, so I think this would have to be carefully considered.
[/quote]

Can we get a notifications tab on the NNS tab that says something like "Your followed Neuron "blank" has voted on *X* proposal". The followee can go look at it and have the ability to change their mind otherwise if no action taken then the vote is cast. Maybe cumbersome with notifications but give people the option to filter or turn them off as well perhaps. Also maybe delay the the vote 24 or so hours or until voting period ends whichever come first.

Lots of great ideas discussed in this thread. I like the last revision to the improvements for these types of proposals @lara

-------------------------

modclub | 2023-11-20 13:52:16 UTC | #71

While we understand that the concern is mostly regarding ICP being withdrawn here, please consider scenarios where SNS projects need to distribute their own tokens from the treasury as well. For instance we may plan in the future to offer a developer incentive program where we grant tokens to other startups / projects that integrate with us. Ideally this would be done through treasury proposals but if there is too much friction here we may not be able to offer this program.

-------------------------

lara | 2023-12-05 09:16:14 UTC | #72

Hi all, 

a more detailed design proposal for 3. **Limit SNS treasury proposals** is now discussed [here](https://forum.dfinity.org/t/limit-sns-treasury-proposals-detailed-design/25269).
We are looking forward to your feedback!

-------------------------

wpb | 2023-12-28 07:59:45 UTC | #73

[quote="lara, post:69, topic:24402"]
In terms of the “known neurons” concept: we do have it on our roadmap to also look at this for the SNSs, but don’t have a clear plan yet when this will be done.
[/quote]

Hey @lara it is starting to seem like the known neuron concept is needed for SNS (as also mentioned by @tiago89 and @ckMood).  I think it helps advance decentralization for SNS projects.  I'm also noticing that a lot of people don't know that they have to configure a Followee for their SNS neuron with a largest dissolve delay in order to use the Followee system instead of voting manually.  Once they realize this is necessary it can be difficult to find the dev team neuron ID (each SNS team posts it differently), which is the only option that really makes sense when you know you cannot vote on every proposal manually.  Is it too late to include this feature in the current SNS improvement plans with a not too distant implementation schedule?  I'm interested in organizing a known neuron for Gold DAO SNS in a similar way to what we created with Synapse for the ICP NNS, but the lack of infrastructure makes that seem implausible at this time.

-------------------------

lara | 2024-01-08 18:54:50 UTC | #74

Hi all and happy new year!
Great news! A part of the above design was just approved by the NNS in [this proposal](https://dashboard.internetcomputer.org/proposal/126882) and published in a new version of SNS governance that SNSs can now upgrade to!

Specifically, the new SNS governance version includes (referring to the numbers above):
* 1. **Increase the required threshold for all critical proposals** (more information is linked in the [forum post dedicated to this topic](https://forum.dfinity.org/t/new-sns-ability-to-mint-sns-tokens-revised-thresholds-for-voting/23382/12))
* 2. **Remove critical proposals from the catch-all “All topics”**
* 4. **Increase the voting period for critical proposals**

We are still working on the last item, so keep posted!

-------------------------

lara | 2024-01-10 11:45:12 UTC | #75

Hi @wpb, sorry that this got a bit lost between the years.

Thanks for the suggestion. I don't think we should group this with the current work on treasury proposals, as for this we have already had a discussion with the community and also the changes in the code would not be very related I think.
However, I think looking at how following can be improved in the SNSs is already on our list for this year.

Before implementing known neurons, I think it is worth rethinking and discussing with the community if this is the best solution.
Arguably known neurons have some drawbacks, for example that they have to be "approved" by proposal by the DAO. This makes known neuron a little bit like a "club" where current members (known neurons might already have more following than other neurons) get to decide who can be registered as a new known neuron. One could argue that a registry or something similar where everyone can register their neuron would be better. 

Maybe there is another way in the meantime to promote an expert neuron for individual SNSs? Can some information be added to the dapp itself? I wonder if it would anyways be good if dapps found a way to reach their DAO's voter base?

-------------------------

