skilesare | 2022-08-18 10:07:46 UTC | #1

Given the upcoming t-ecdsa functionality going beta, and the HTTP interface enabling using canister signatures( **https://forum.dfinity.org/t/tackling-certifieddata-in-motoko/6272/32?u=skilesare**), the restriction on canisters not being able to hold neurons is a merely an inconvenience.

A good bit of code needs to be written to enable either t-ecdsa ownership of neurons or certificate ownership.  To avoid wasted effort, we recommend removing the restriction at the following lines that will enable canisters to hold neurons(deleting 12 lines of code vs having to write thousands of lines of code):

https://github.com/dfinity/ic/blob/d051e53791b8bf68f05e4b03902db2dba1ea8f98/rs/nns/governance/src/governance.rs#L2241

https://github.com/dfinity/ic/blob/d051e53791b8bf68f05e4b03902db2dba1ea8f98/rs/nns/governance/src/governance.rs#L3590

Pros:

* We don't have to write a bunch of hoop jumping code.
* We can write trusted canisters-hotkeys that do things like auto-close spam.
* DAOs can more easily control neurons.

Cons: 

* Neuron marketplaces will emerge and this may undermine the security guarantees of NNS governance.  Unfortunately, with the coming tech, this is inevitable(unless we design some other method to enforce this.)

Action Items:

* Discuss the proposal
* Decide if we want to take extraordinary measures to restrict neuron marketplaces.
* Prepare final proposal text


Note: @LightningLad91 expressed intent to write this proposal and just did it....give credit to him for pushing the issue.

Note 2: We have upcoming bounties that touch on these things and a number of other ideas that we've had that could use this that are non-neuron-marketplace related, and writing this proposal **seems** like less work than writing the code...we'll see how discussion goes. :slight_smile:

Note 3: Personally I'm very wary of neuron marketplaces as I think they break the governance model. I also don't have a solution and this thread should be a place where we try to reach some consensus about how to address it. I'm guessing the foundation has had these discussions internally, and I'd love to hear their current thoughts on how to deal with this.

-------------------------

skilesare | 2022-08-18 10:34:12 UTC | #2

One proposal we could put in place(I'm not recommending this, just putting it on the table to help frame the debate) is to allow the censure of a non-self-authenticating neuron via the NNS so that if one appears on a marketplace we could freeze it.  T-ecdsa still gets around this though, so all it really does is make it harder to implement.

I'd say that generally censure of neurons is a place that no one wants to go to.

-------------------------

LightningLad91 | 2022-08-18 11:51:23 UTC | #3

Thank you for posting this @skilesare. I was going to post it myself but I doubt I would have communicated it as well as you did.

I really hope we can find a way to make this work. I think canister-controlled neurons have huge potential to accelerate decentralization of the NNS.

**What do I mean?**
By allowing a canister to control a neuron you could have a DAO manage it directly. You could have a service running under the DAO that monitors the NNS for new proposals and surfaces the ones it cares about. Maybe this DAO is a consortium of protocol devs and they only care to see replica changes. Those specific proposals could be surfaced through the DAO's governance portal so that DAO stakeholders can vote on it. This means that the final vote could be the result of consensus amongst hundreds (potentially thousands) of independent community members.

**Why does this help decentralization?**
One way this helps decentralization is that it removes an incentive to bribe, lobby, or influence individual representatives. I can even imagine a more complex system of DAO-controlled neurons that supports elected representatives, but also provides a way for community to hold them accountable and remove them if needed. Ultimately, this gives power back to the individual community members.

**How is this different from the NNS, why not just have everyone follow/vote through liquid democracy?**
Because I strongly believe that communities want to have their own environment to discuss topics and debate outcomes. Not everyone wants to argue on the forums. Communities need to be empowered to have their own culture and their own leaders. If we give DAOs this capability then they can build their own forums and develop their own customs. Community leaders can encourage their followers to participate in governance; not because it helps the network, but because it helps their common goal.

-------------------------

wpb | 2022-08-18 11:51:15 UTC | #4

I think neuron transfer (especially neuron marketplaces) are a major security risk.  Hence, I think we should make them very hard or impossible.  The community has talked about this idea a lot in the past, but I don‚Äôt feel like I‚Äôve heard DFINITY comment on it very often.  I would want to know their position.

-------------------------

LightningLad91 | 2022-08-18 11:54:24 UTC | #5

I don't believe we are talking about neuron transfer. Just the creation of new neurons.

Edit: I guess you are concerned about the transfer of new neurons. I would also like to hear DFINITY's position on that.

-------------------------

skilesare | 2022-08-18 11:55:07 UTC | #6

The issue is that once you let a canister hold a neuron you can just change the controller of the canister and you've changed the owner of the neuron.  A marketplace could automate this. So you quickly end up with a system where you mint your neuron through a canister and then can list it on a marketplace when you want to exit your position. Locking for 8 years no longer means much and you can still get 8-year returns.

-------------------------

LightningLad91 | 2022-08-18 11:56:44 UTC | #7

Right. I realized my error after responding to @wpb. my apologies.

I'm still not convinced this current limitation stops that. The individuals who would benefit from this most have the resources to establish their own OTC neuron trading market. So some central authority manages the books and the keys for them. How do you prevent that?

-------------------------

LightningLad91 | 2022-08-18 12:21:20 UTC | #8

[quote="skilesare, post:1, topic:14948"]
Unfortunately, with the coming tech, this is inevitable(unless we design some other method to enforce this.)
[/quote]

@wpb just to address your point about prior community discussions on the topic. I don't believe DFINITY and the community have had an earnest conversation that accounts for the line quoted above. These marketplaces will happen one way or the other. The question isn't if, but when.

-------------------------

bjoernek | 2022-08-18 12:44:43 UTC | #9

Hi @skilesare, many thanks for raising this proposals. 

I do not have yet enough insights in all aspects of this proposal to provide an answer straight away. Let me review within DFINITY and the come back to the forum.

-------------------------

lastmjs | 2022-08-18 13:00:41 UTC | #10

What if only canisters without controllers, or controllers set to a verified DAO controller (SNS etc) were allowed?

-------------------------

Severin | 2022-08-18 13:16:37 UTC | #11

As long as membership/allowlists are dynamic I don't think this restricts trading substantially

-------------------------

skilesare | 2022-08-18 13:32:18 UTC | #12

A "verified dao" like the named neuron might be a good solution.  The "canisters that can hold icp" had a whitelist at one point.

-------------------------

LightningLad91 | 2022-08-18 13:37:25 UTC | #13

Doesn't this just create another gatekeeper scenario? Unless, like @Severin said, you make the list so dynamic that anyone can join easily. In which case, what was really accomplished?

-------------------------

wpb | 2022-08-18 15:12:29 UTC | #14

I agree this discussion hasn‚Äôt really happened, so I‚Äôm glad to see the discussion starting again and DFINITY is engaging so far.  

I‚Äôm not ready to conclude that it‚Äôs just a question of when instead of also a question of if it will happen.  I don‚Äôt recall DFINITY indicating that they agree in the past.  It has always been the community that makes this claim.  

The security risk is pretty big and DFINITY has always held to the position that neuron transfer should not be allowed, presumably because of this risk.  Even if it is technically possible, I also wonder if DFINITY has the legal right to pursue litigation on behalf of NNS investors against any marketplace that forms.  

Hence, unless DFINITY comes out and formally states that they believe making it free and easy is the right path forward, I think methods should be designed to prevent it including code limitations and legal recourse.  

I can definitely be convinced otherwise, but I really want to hear an official DFINITY position instead of this just being a community discussion like it has been in the past.

-------------------------

LightningLad91 | 2022-08-18 15:38:05 UTC | #15

I fully agree on hearing DFINITY's position.

[quote="wpb, post:14, topic:14948"]
Hence, unless DFINITY comes out and formally states that they believe making it free and easy is the right path forward, I think methods should be designed to prevent it including code limitations and legal recourse
[/quote]

I think this is would be a very slippery slope for what is supposed to be an open protocol / ecosystem. If DFINITY is separate from the network then this sort of enforcement (at least from the legal perspective) doesn't make a lot of sense. I do agree with code limitations if the community agrees on them.

-------------------------

LightningLad91 | 2022-08-18 16:00:00 UTC | #16

[quote="wpb, post:14, topic:14948"]
I‚Äôm not ready to conclude that it‚Äôs just a question of when instead of also a question of if it will happen. I don‚Äôt recall DFINITY indicating that they agree in the past. It has always been the community that makes this claim.
[/quote]

Sorry, I‚Äôm not trying to be annoying. I just want point out that @bjoern has already described how a canister can control a neuron today in [this post.](https://forum.dfinity.org/t/tackling-certifieddata-in-motoko/6272/34?u=lightninglad91) which is what inspired this proposal. As you‚Äôve said before, he is the foremost expert on the matter and works at Dfinity.

This proposal aims to make the development of this capability simpler. The only thing preventing it today is the complexity. So I would classify it as a matter of when and not if.

-------------------------

justmythoughts | 2022-08-18 17:07:15 UTC | #17

Another thing DFINITY should consider is the effect of this on the price of ICP.

If I can go to a marketplace and buy a neuron holding ICP at a 5-10% discount if it‚Äôs locked up in a 4yr neuron, and at a 15-20% discount for an 8yr neuron - the demand for ICP on exchanges would dry up and the ICP price could potentially plummet, especially given the anemic demand side of the equation over the past few months.

I think this decision of ‚Äúwhen‚Äù should be driven by consulting the data science and the economic wings of DFINITY as well.

@Kyle_Langham @bjoernek

-------------------------

crabtr26 | 2022-08-18 19:20:20 UTC | #19

I don‚Äôt think that neurons should trade at a discount compared to liquid ICP since the expected rewards will be included in any calculation of the present value of the neuron. In order for an 8 yr neuron to trade at a discount to an equivalent amount of liquid ICP you would need to assume you can make more than the ~20% annualized returns that the NNS is giving you by using some other form of risk free interest generated from your liquid ICP.

I feel that this may actually create an additional incentive to move ICP from exchanges into 8 year neurons since your neurons will remain somewhat liquid but holding your ICP will net you a higher interest rate.

-------------------------

LightningLad91 | 2022-08-18 20:22:19 UTC | #20

Also worth pointing out that none of the existing neurons would be in play. This would only be for newly created neurons; and even then, it would only be for neurons created by a canister. So if these NFT markets were to appear, it would require a significant amount of staking to take place first.

@justmythoughts üëÜ

Also @wpb I‚Äôm not sure if this was clear to you or not.

-------------------------

justmythoughts | 2022-08-19 04:24:43 UTC | #21

[quote="LightningLad91, post:20, topic:14948"]
Also worth pointing out that none of the existing neurons would be in play.
[/quote]

Can you elaborate on why this is?

Also, how difficult would it be for public blackholed canister (contract) to use edsca set up not just a neuron swap marketplace, but an identity swap marketplace? (with neurons attached to the identity and NNS wallet).

-------------------------

LightningLad91 | 2022-08-19 05:30:30 UTC | #22

[quote="justmythoughts, post:21, topic:14948"]
Can you elaborate on why this is?
[/quote]

Neurons can‚Äôt be transferred directly, and this proposal doesn‚Äôt change that. All of the neurons that exist today are controlled by a user principal. There is no way to exchange user principals‚Ä¶ unless you exchange keys, physical devices, or add a new device to your II and then remove the original. (After listing this out it seems like there are already lots of ways to exchange neurons today ü§î)

What this proposal does is remove the restriction that prevents a canister principal from controlling a neuron. This is similar to how canisters used to be prevented from holding ICP.

Allowing canisters to control neurons doesn‚Äôt enable you to transfer neurons; but, it does allow you to change the controller of the canister. Which effectively transfers control of the neuron to a new owner (via canister transfer). Or you could simply maintain a registry of user principals in the canister and treat the neurons like an NFT.

Existing neurons aren‚Äôt controlled by canister principals, therefore they can‚Äôt be transferred in this manner. At least, that‚Äôs my understanding. 




[quote="justmythoughts, post:21, topic:14948"]
an identity swap marketplace?
[/quote]

Doesn‚Äôt that already exist today? I could have sworn some service existed that allowed you to buy II anchors.

-------------------------

domwoe | 2022-08-19 05:49:09 UTC | #23

[quote="LightningLad91, post:22, topic:14948"]
Doesn‚Äôt that already exist today? I could have sworn some service existed that allowed you to buy II anchors.
[/quote]

yep, it does https://yunqk-aqaaa-aaaai-qawva-cai.ic0.app/

-------------------------

hpeebles | 2022-08-19 10:19:03 UTC | #24

In OpenChat we would love to have an ICP neuron controlled by the OpenChat SNS.
After we do the initial sale the SNS will be holding a decent amount of ICP and it would be great if we could put that into a neuron to earn rewards which could be used to cover cycles costs + more.

-------------------------

skilesare | 2022-08-19 14:40:53 UTC | #25

If you are looking for a cycle solution, you may want to consider https://forum.dfinity.org/t/icdevs-org-bounty-17-a-dao-for-cycles-10-000-ht-cycle-dao/11427. @sardariuss has done quite a bit of thought about how to integrate it to an SNS dapp. You could issue tokens to users willing to fund your cycles. üòÄ

-------------------------

cryptoisgood | 2022-08-20 04:16:07 UTC | #26

This opens up the door for liquid staking too. I support  this message.

-------------------------

coteclaude | 2022-08-22 00:36:44 UTC | #27

I was wondering why, between the launch in May 2021 and about September, the number of anchor went up very quickly to 1.8m.  Then the growth suddenly crashed to about 10k new anchors per month.  I suspected there was something fishy.  The answer is there.  They were creating II anchors in order to resell them.
I suspect that 95% of II anchors are not active.  We are at nearly 2m now but would guess less then 100k are active, probably less.

-------------------------

LightningLad91 | 2022-08-29 17:17:29 UTC | #28

Hi @bjoernek I was just wondering if you had received any feedback from DFINITY on this proposal? Thanks.

-------------------------

bjoernek | 2022-08-29 17:34:33 UTC | #29

Thank you for the follow-up @LightningLad91

I have raised this internally and am currently waiting for feedback. I will come back to this round as soon as I have an update. Apologies, that this is taking a bit longer.

-------------------------

LightningLad91 | 2022-08-29 20:22:32 UTC | #30

No problem at all. Thank you for the response.

-------------------------

lara | 2022-09-07 07:48:09 UTC | #31

Hi all,
I am a researcher in the NNS team.
As has already been mentioned in this post, a possible worry is that canisters as neuron controllers might benefit neuron markets, which would be undesirable.
Therefore, to make a better recommendation whether neuron control should be opened up to canisters now, we are currently looking into some options how the chances of markets could maybe be mitigated with additional measures.
Just wanted to provide this context why we take a bit longer to get back to you, but ensure you that we are still on it!

-------------------------

0xAegir | 2022-10-01 18:39:09 UTC | #32

@lara Great to hear you're thinking about this. Has there been any further progress here?

With the launch of Threshold ECDSA, and outbound HTTP calls, canisters can now mimic any IC user interaction (though a bit hacky). This means that there is no longer a realistic way (afaik) to enforce this restriction. Allowing canisters to directly own newly-created neurons in the NNS will help avoid hacky workarounds, making this cleaner for developers, and safer for users.

I'd like StakedICP (my project) to be a good community citizen, and having the neurons be directly canister-owned (instead of merely canister-controlled via proposals) seems like a major win for decentralization.

-------------------------

wpb | 2022-10-01 19:08:29 UTC | #33

What would it take to enable differentiation between canister controlled neurons and individual controlled neurons?  Would it make sense to limit voting power of canister controlled neurons as a mechanism to deter neuron marketplaces?  

Does the DAO use case of canister controlled neurons require large amounts of staked ICP and accumulation of a lot of voting rewards directly in the canister controlled neuron?  Public neurons and their associated liquid democracy as well as neuron management activities don‚Äôt require more than the minimum staked ICP in order to function.

-------------------------

LightningLad91 | 2022-10-03 15:43:40 UTC | #34

[quote="wpb, post:33, topic:14948"]
Would it make sense to limit voting power of canister controlled neurons as a mechanism to deter neuron marketplaces?
[/quote]

I don‚Äôt think this would be a wise decision. You‚Äôre effectively penalizing decentralized communities by reducing their voting power even though they‚Äôve made equal contributions in terms of staked ICP.

I would also argue that this isn‚Äôt going to be an effective deterrent against neuron marketplaces. The tECDSA workaround would likely bypass this check so the only thing we‚Äôd be deterring is community management of neurons via DAOs.

-------------------------

wpb | 2022-10-03 16:21:01 UTC | #35

Why would you want to punish the entire IC ecosystem and the security of the network by allowing free and easy neuron transfer through canister controlled neurons and enabling them to exercise full voting rights?  Something has to give and I think we should think through the viability of
limiting voting power as an effective deterrent.  I don‚Äôt think I‚Äôve heard this idea discussed before and it seems like it deserves more than a cursory rejection.  I‚Äôm not interested in penalizing anyone.  I want to solve the problem while still enabling all the great benefits of tECDSA and outbound HTTP calls and even enabling canisters to hold neurons since there seems to be a benefit for decentralized communities and potentially other use cases.

It seems like decentralized communities can stake ICP in a different neuron than what they register as a known neuron.  This is how all public neurons work today.  No public neuron has more than inconsequential staked ICP even if their neuron triggers high voting power through liquid democracy.  What makes a decentralized community different such that they can‚Äôt follow this model?  Why not manage a canister controlled public neuron, including configuration and voting, through a different neuron than where a treasury is held?  The treasury neuron can follow the public neuron and not have limited voting power.

It‚Äôs the transfer of neurons at a steep discount such that it‚Äôs voting power can be used to in ways that can harm the network that needs to be avoided.  If the first part is unavoidable, then why wouldn‚Äôt we want to consider identifying these neurons and limiting their voting power?

-------------------------

LightningLad91 | 2022-10-03 16:47:55 UTC | #36

[quote="wpb, post:35, topic:14948"]
Why would you want to punish the entire IC ecosystem and the security of the network by allowing free and easy neuron transfer through canister controlled neurons and enabling them to exercise full voting rights?
[/quote]

I don't, and I challenge your assertion that making this change would have that implication. If you care to explain to me why you think trading of newly created neurons, with no prior stake, has such huge implications then I'm happy to discuss further.

[quote="wpb, post:35, topic:14948"]
I don‚Äôt think I‚Äôve heard this idea discussed before and it seems like it deserves more than a cursory rejection.
[/quote]

I would ask that you not take my response as a cursory rejection. Just because I don't spend an hour or more writing a lengthy forum post does not mean I haven't spent countless hours thinking through this in my own time. (More than I'd care to admit in fact).

[quote="wpb, post:35, topic:14948"]
I want to solve the problem while still enabling all the great benefits of tECDSA and outbound HTTP calls and even enabling canisters to hold neurons since there seems to be a benefit for decentralized communities and potentially other use cases.
[/quote]

I share this sentiment.

[quote="wpb, post:35, topic:14948"]
It seems like decentralized communities can stake ICP in a different neuron than what they register as a known neuron. This is how all public neurons work today. No public neuron has more than inconsequential staked ICP even if their neuron triggers high voting power through liquid democracy. What makes a decentralized community different such that they can‚Äôt follow this model? Why not manage a canister controlled public neuron, including configuration and voting, through a different neuron than where a treasury is held? The treasury neuron can follow the public neuron and not have limited voting power.
[/quote]

Because the treasury neuron would have to be managed by a single entity or relatively small group of individuals. I understand that this may be acceptable by some but I would rather build a system where all operations of the DAO can be managed by the community. This doesn't mean that you have to build a system where every funding decision requires 51% approval. It could simply mean that the community has the authority to change the executor of a treasury should they suspect foul play.

Little details like this are what decentralization is supposed to be about, IMO.

[quote="wpb, post:35, topic:14948"]
It‚Äôs the transfer of neurons at a steep discount such that it‚Äôs voting power can be used to in ways that can harm the network that needs to be avoided. If the first part is unavoidable, then why wouldn‚Äôt we want to consider identifying these neurons and limiting their voting power?
[/quote]

I have no problem discussing these things and I certainly don't want to give the impression that I'm blindly against your suggestion. However, limiting the voting power of canister-controlled neurons also robs the broader IC community of several opportunities for enhanced decentralization. This is something that needs to be weighed alongside the argument against neuron transfers.

-------------------------

skilesare | 2022-10-03 16:58:49 UTC | #37

The following is very brief, but I'm currently settling around transparency being needed to alleviate the situation.  If we can see that a neuron has changed owners and/or that the controller of a canister has been changed, then we can make decisions about what to do.  Nerfing or penalizing a neuron doesn't need to be automatic as a deterrent it just needs to be detectable and actionable.  There are plenty of legitimate reasons to transfer controllers, but perhaps you should be made to justify your reasoning.

-------------------------

LightningLad91 | 2022-10-03 17:05:28 UTC | #38

[quote="skilesare, post:37, topic:14948"]
There are plenty of legitimate reasons to transfer controllers, but perhaps you should be made to justify your reasoning.
[/quote]

I wouldn‚Äôt be against this. But it might not scale well if/when the NNS community grows in the future (assuming you‚Äôre thinking of a new proposal type).

-------------------------

wpb | 2022-10-03 17:42:25 UTC | #39

[quote="LightningLad91, post:34, topic:14948"]
You‚Äôre effectively penalizing decentralized communities
[/quote]

I‚Äôm not, and I challenge your assertion that the idea would have that implication.


[quote="LightningLad91, post:36, topic:14948"]
I would rather build a system where all operations of the DAO can be managed by the community. This doesn‚Äôt mean that you have to build a system where every funding decision requires 51% approval. It could simply mean that the community has the authority to change the executor of a treasury should they suspect foul play.
[/quote]

I think you just made the very point I‚Äôm trying to make.  There is a way to achieve the decentralization you want while still solving the neuron transfer problem by limiting voting power of canister controlled neurons.  It may not be perfect, but I think worth considering.


[quote="skilesare, post:37, topic:14948, full:true"]
The following is very brief, but I‚Äôm currently settling around transparency being needed to alleviate the situation. If we can see that a neuron has changed owners and/or that the controller of a canister has been changed, then we can make decisions about what to do. Nerfing or penalizing a neuron doesn‚Äôt need to be automatic as a deterrent it just needs to be detectable and actionable. There are plenty of legitimate reasons to transfer controllers, but perhaps you should be made to justify your reasoning.
[/quote]

I like this thought process @skilesare.  While it would be nice to automate, perhaps it‚Äôs not required.  To me the key is knowing neuron transfer has happened and having the ability to stop security threats and other activity that devalues the system.  Simply having the ability to neutralize nefarious activity could prevent it from happening.  I think it‚Äôs at least worth further discussion.

-------------------------

LightningLad91 | 2022-10-03 17:47:48 UTC | #40

[quote="wpb, post:39, topic:14948"]
I think you just made the very point I‚Äôm trying to make. There is a way to achieve the decentralization you want while still solving the neuron transfer problem by limiting voting power of canister controlled neurons. It may not be perfect, but I think worth considering.
[/quote]

How so? If the community doesn't control the treasury (neuron) then what power do they have to force the issue?

-------------------------

LightningLad91 | 2022-10-03 18:21:44 UTC | #41

[quote="wpb, post:39, topic:14948"]
I‚Äôm not, and I challenge your assertion that the idea would have that implication.
[/quote]

Ok. I think i've laid out my concerns if you care to discuss further. If this was just a witty retort to my challenge of your assertion that trading canister-controlled neurons could only result in disaster (paraphrasing) then I guess nvm.

-------------------------

tsetse | 2022-10-03 18:01:19 UTC | #42

If the central problem is that people could buy short-term votes if a neuron market emerges (and I am not sure that is actually the central problem), perhaps a solution lies in eliminating for a specified duration the NNS voting power of neurons whose controllers change, without restricting the rewards that accrue from votes? I don't know how feasible this would be, but it seems easier than trying to prevent a neuron marketplace from emerging. Advances that are currently halted because they would enable a neuron market as a side effect can then be rolled out quickly.

-------------------------

wpb | 2022-10-03 20:33:50 UTC | #43

[quote="tsetse, post:42, topic:14948"]
perhaps a solution lies in eliminating for a specified duration the NNS voting power of neurons whose controllers change
[/quote]

I like this idea too.  A limitation on voting power for a time period could be an effective deterrent.

I‚Äôm not sure if it‚Äôs possible to identify canister controlled neurons or what it would take to enable that identification (which was my original question to Lara).  It it becomes possible, then there could be many potential solutions to the security risks and value reduction that could occur from the formation of neuron markets.

-------------------------

Manu | 2022-10-04 08:19:04 UTC | #44

I think it would be really hard to somehow detect if the real ownership of a neuron has changed if canisters can control neurons. We could of course detect that the controller of a canister that controls a neuron has changed, but there are many other ways to change ownership of a neuron. Eg the canister may be blackholed but its state changes to change ownership, or the controller of the canister is another canister and ownership may change there.

-------------------------

tsetse | 2022-10-04 13:45:49 UTC | #45

Indeed, there will be ways found to get around the vote pause regulation. My question is: what is the systemic threat that arises out of a neuron market? If sufficient obstacles can be placed through NNS votes and code tweaks to deter such a systemic attack, without changing anything for stakers uninterested in selling neurons, that should be good enough even if there are leaks in the defences. Sometimes, searching for a silver bullet is futile or even counterproductive. In this case, the counterproductive part would involve pausing an important advance in order to stave off undesirable consequences. Of course, if Dfinity engineers have an inkling of a potential silver bullet, that's great, I'm sure the community will happily wait.

-------------------------

0xAegir | 2022-10-05 10:03:11 UTC | #46

Vote pause regulation sounds pretty reasonable, but penalizing neuron transfer incentivizes people to trade neurons using offline key exchange, tECDSA, or other undetectable means.

-------------------------

skilesare | 2022-10-05 17:14:14 UTC | #47

I think the standard...or best practice....to put in place here is that for a non-self authenticating principal to be able to hold a neuron it needs to be an open-sourced canister with a clear purpose as to why it needs to own a neuron(maybe also blackholed or controlled by a known and open governance mechanism).  Maybe a whitelist similar to 'named neurons' would be helpful here where the NNS has the ability to add/remove you from the whitelist. If you're off the list you lose your voting power.  Just thinking out loud here.

-------------------------

LightningLad91 | 2022-10-05 18:31:02 UTC | #48

[quote="skilesare, post:47, topic:14948"]
Maybe a whitelist similar to ‚Äònamed neurons‚Äô would be helpful here where the NNS has the ability to add/remove you from the whitelist.
[/quote]

Ngl I‚Äôm not a fan of this approach üòÖ

Would it be too much to ask for us to just let things play out and respond with some control measure if/when the need arises? 

Looking at the NNS today there is 460M+ VP.

250M+ tokens are not staked and in circulation

In order for a canister-controlled neuron market to pose a threat it would need the ability to pass a non-governance proposal type. Right now Dfinity has that locked down with almost 100% of the followers votes.

So this new market, with no existing stake, would need to be managed by an attacker that has absorbed the entirety of the circulating supply and staked it for 8 years in order to have a chance at getting majority approval.

Is my napkin math wrong? Do we think this is a realistic threat anytime in the next 5-10 years?

-------------------------

wpb | 2022-10-05 19:40:34 UTC | #49

[quote="LightningLad91, post:48, topic:14948"]
Would it be too much to ask for us to just let things play out and respond with some control measure if/when the need arises?
[/quote]

With the initial token launch, all neurons were set up to follow DFINITY and reap voting rewards on day one.  We were all told that we must vote in order to be entitled to voting rewards.  No promises were made that the rules wouldn‚Äôt change.  It was clearly documented that the NNS is a mutable governance system.  Yet a lot of community resistance to changes to the NNS are rooted in arguments like ‚Äúwe were promised‚Äù or ‚Äúthis change isn‚Äôt what I signed up for‚Äù or ‚Äúyou are stealing from non voters‚Äù.  

I anticipate neuron marketplaces and canister controlled neurons will have the same community sentiment if we take a wait and see approach and try to implement solutions at a later date.  They don‚Äôt exist today, but if they are allowed to exist without clear rules and attempts to prevent security issues then people will start complaining if and when changes to the rules become necessary.  It seems preferable to address it now since this was a security threat identified by DFINITY before genesis.

-------------------------

LightningLad91 | 2022-10-05 21:20:48 UTC | #50

[quote="wpb, post:49, topic:14948"]
It seems preferable to address it now since this was a security threat identified by DFINITY before genesis.
[/quote]

I think we are conflating the threats. If you are referring to the discussions early on from @jwiegley my understanding is that he was talking about enabling the transfer of existing neurons. This change would not allow that to happen so it‚Äôs a different risk. Hopefully we hear some updated feedback from DFINITY regarding the risk of this specific proposal.

-------------------------

lara | 2022-10-12 20:36:30 UTC | #52

Hi all,
we had some discussions in DFINITY regarding whether NNS neurons should be controllable by canisters. 
Our current take is that we should not allow canisters to control NNS neurons as we should not risk the creation of neuron markets. One main concern about having services that offer ‚Äústaked tokens‚Äù and hold huge NNS neurons is that these services would have a very large, aggregated voting power in the NNS which may thus centralize the voting power. 

**Some more detailed concerns / answers to some questions in this thread:**
* _‚ÄúThe Same is already possible with ECDSA / http‚Äù_: This is true. But rather than making neuron markets even simpler, we currently think that we should rather try to prevent these cases as well by adding additional authentication means to a neuron. One idea would be to add to a neuron not only a controller but also an additional key or means of authentication that could not easily be done with ECDSA.
* _‚ÄúCouldn‚Äôt we just allow some canisters to control neurons, e.g., DAOs‚Äù._ First it is not straightforward how an ‚Äúallowed‚Äù canister would be defined. As some of you mentioned it is conceivable to work with whitelists etc. However, what should be allowed wasms? For example, it might first seem that it is valid to allow SNSs to control NNS neurons, as SNSs use code that has been approved by the NNS. However, an SNS could easily be used to actually create a neuron market, e.g., by the SNS token basically working as ‚Äúwrapped NNS neurons‚Äù.

**Next steps:**
* As mentioned, rather than allowing all kinds of canister controllers, we plan to further look into how to prevent canister controllers by ECDSA + http. Initial ideas are discussed that include an additional key/protocol to access neuron functionality that could not be easily provided by a canister.
* We think that a lot of use cases why community members asked for this feature might also be solvable by other means. Notably, for implementing ‚Äúknown neurons‚Äù that can be registered in NNS governance for others to follow them on proposal decisions are often realized by a group of people managing this one known neuron. Instead of implementing this in a canister, this can already be realized by a special type of proposal type ‚Äúmanage neuron‚Äù that allows a selected group of neurons to manipulate one neuron. Moreover, more elaborate following-functions implemented in a canister can be achieved by adding a canister as a neuron‚Äôs hot key rather than the controller. 
To enable the community to effectively use these existing tools, we plan to work on documentation on how these can be set up.

We will follow up once we have this additional documentation or more insights on the design of the new additions!

-------------------------

wpb | 2022-10-12 22:34:25 UTC | #53

Thanks for this feedback on this topic Lara.  It provides a lot of clarity on current DFINITY thinking, which is greatly appreciated.

Speaking of Manage Neuron features‚Ä¶

I am still very interested in using the Manage Neuron proposal type from within the NNS dApp for the Synapse neuron.  It means also needing to be able to submit private proposals that only Followees of the Mange Neuron topic for our neuron can see and vote.  I plan to transfer management of the Synapse neuron to our full group of voting members, but these Manage Neuron features need to be easier than command line.  We need it built into the NNS dApp.  I‚Äôm hopeful that this will be a priority for implementation.

As discussed with Bjoern T previously, I will also need to remove the II controller of the Synapse neuron after neuron management has been configured to follow our voting members.  He explained a way that it can be done, but it would be preferred and appreciated if it can be publicly verifiable.

-------------------------

skilesare | 2022-10-12 23:24:46 UTC | #54

[quote="lara, post:52, topic:14948"]
Instead of implementing this in a canister, this can already be realized by a special type of proposal type ‚Äúmanage neuron‚Äù that allows a selected group of neurons to manipulate one neuron.
[/quote]

Please please please add this back into the NNS dapp!!!

-------------------------

LightningLad91 | 2022-10-13 03:29:10 UTC | #55

Thanks for the update @lara. I respect DFINITY‚Äôs position on this even if I don‚Äôt agree with it. We will continue with our plan to use tECDSA for now.

-------------------------

aiv | 2022-10-13 04:27:51 UTC | #56

When making the NNS Proposal Dapp I became very familiar with Axon. It's a beautifully executed project that's surprisingly full-featured and sadly under appreciated: https://github.com/FloorLamp/axon

I think development has stopped on it (for over a year now), but it's still functional and can solve most of your pain points out-of-the-box. I bet you could even have Synapse revive the project a bit to build any additional features you'd need, since that would only require a few tweaks and be a fantastic resource for the ecosystem!

Basically a canister can only control a few manage neuron commands (vote, follow, make proposal) by being added as a hot key for that Neuron. Since the hot key canister can make the neuron submit proposals, it has the ability to relay a manage neuron command to another neuron, using a *manage neuron proposal*. If the another neuron is delegated to follow manage neuron proposals from the relay neuron which has the canister as a hot key, then this means the canister can now control every Manage Neuron command (full control).

So yeah, while a canister can't take full control of a neuron directly, it can do so as long as it sets up a proxy neuron for relaying proposals to a delegated neuron.

-------------------------

LightningLad91 | 2022-10-13 10:19:36 UTC | #57

[quote="lara, post:52, topic:14948"]
Moreover, more elaborate following-functions implemented in a canister can be achieved by adding a canister as a neuron‚Äôs hot key rather than the controller.
[/quote]

Am I correct in my understanding that a hotkey isn‚Äôt allowed to spawn maturity and disburse ICP?

-------------------------

skilesare | 2022-10-13 18:00:05 UTC | #58

It can spawn maturity but cannot disburse.  I use if for ICDevs for a couple of people who have 'dedicated' their neurons to ICDevs.  They still own the neuron but every couple of weeks I can spawn 1 ICP to go into the treasury.  You have to hack the UI(put a breakpoint in the js code) to get it all set up, but it works if you can get it set up.

-------------------------

skilesare | 2022-10-13 18:02:14 UTC | #59

Just a quick reminder that we have a bounty open at IC devs to fork Axon. I'd love to use it for the dev board and to make it easy for folks to make our neuron vote a-la-Synapse.  https://icdevs.org/bounties/2021/11/01/generic-dao-fork-axon-copy.html

-------------------------

LightningLad91 | 2022-10-13 19:40:01 UTC | #60

Thanks Austin. I'm trying to think through the flow here. I'd rather not go against the foundation if I can make the hotkey method work.

Is your hotkey controlled by a canister or does someone at ICDevs have to log into the NNS app or use Quill to manage the hotkey neuron?

When you spawn a neuron from the hotkey neuron does control of the spawned neuron automatically get transferred to the ICDevs controller or can you direct the ownership of that spawned neuron?

To clarify a bit; If my canister has hotkey control of a neuron, then directs it to spawn a new neuron, how do I tell the new neuron to disburse if I can't control that neuron because I'm a canister?

-------------------------

skilesare | 2022-10-13 19:52:00 UTC | #61

Someone who manages a neruon(manage neuron topic) can spawn a neuron to whatever controller they specify. If you also add that as a hot key stuff shows up in the NNS.

I think I messed up....it isn't hotkey that can spawn...it is managed neuron that can spawn.  When I had this set up through axon I had the axon added as the manage neuron and then I had to do a manage neuron of a neuron. It was very meta and could have been easier to pull off.

-------------------------

LightningLad91 | 2022-10-13 19:59:31 UTC | #62

I see. I‚Äôll have to try to brush up on the manage neuron approach. It sounds like someone other than the canister could still be in control of the neuron but I may be misunderstanding.

At the end of the day all I want is a way to control a neuron‚Äôs voting and distribution of rewards through a blackholed canister. And I don‚Äôt want that neuron to be controlled by anything other than that canister. I honestly never cared about the ability to transfer the neuron.

-------------------------

aiv | 2022-10-13 21:13:09 UTC | #63

I'm going to send you a DM regarding that bounty!

So I met @wpb for lunch today (which was awesome) and he mentioned something about the "Manage Neuron" feature being removed from the NNS App due to people somehow accidentally losing control over their neurons. If that's true, perhaps it could be used to our advantage?

The only issue with the Axon setup (where a hot keyed canister controls a delegated neuron) is that both of those neurons must be controlled by a trusted user via DFX or the NNS App. However, it would be great if there was a way to duplicate this setup without anyone but the canister being able to control the neurons.

Looking at the Governance types, I noticed that the Spawn command can take a new controller as ?Principal:
![image|322x138](upload://g55tHwUNNtovXHoB0sKlOh5n05d.png)

Perhaps the issue Wenzel mentioned was due to a delegated neuron being asked to Spawn a neuron with null as the controller. Since the follow settings are copied over into spawned neurons, shouldn't that mean the newly spawned delegated neuron would only be controllable via the Manage Neuron Proposals of the hot keyed neuron from that point forward?

Assuming hot key settings are also copied over to spawned neurons, then this could also be done to create a proxy neuron that's only controllable by the canister hot key. 

The end result of this would be a neuron that could be fully controlled exclusively by a canister.

-------------------------

skilesare | 2022-10-13 21:17:36 UTC | #64

[quote="aiv, post:63, topic:14948"]
Perhaps the issue Wenzel mentioned was due to a delegated neuron being asked to Spawn a neuron with null as the controller.
[/quote]

The issue was that the Manage Neuron topic was originally in the list with everything else like governance and exchange rate.  So it looked like you were following someone's neuron, but for that one topic what you are actually doing is giving that neuron control of your neuron.  So people like me who signed up the first day and started messing with things ended up giving DFINITY and ICA control of my neuron.  When I complained, they took that topic out.  Now I regret complaining...but it was really just a UI issue. If that topic were managed in a different pane with clear labeling it would be an amazing feature we could all use.

-------------------------

mparikh | 2022-10-14 02:53:54 UTC | #65

Fyi...https://github.com/icdev2dev/sachvo... is an interesting mechanism of operationally working with the manage neuron functionality

-------------------------

lara | 2022-10-14 04:11:46 UTC | #66

That is correct. A hot key is only allowed to vote, make proposals, and change the following of a neuron.

-------------------------

lara | 2022-10-14 04:17:49 UTC | #67

I just wanted to ask that because a hot key should not be able to spawn a neuron :) 
So you are right, this is probably done by the managed neuron. just wanted to clarify this as @LightningLad91 also explicitly asked whether a hot key can spawn a neuron above!

-------------------------

Heihachi | 2023-04-26 16:28:33 UTC | #68

Impossible to transfer neurons?
Like saying once you lock your funds you got married with your anchor.
And in case you want to unlock them, just wait some years.
What are the incentives then to lock your funds? Just to show off that 49% of max supply is 8year non dissolving neurons? 
And if smart money want to participate in governance in 10 years, why shoud they have to create a new neuron with 0 age rather than buying an already existing one?
You tend to introduce a new type of tokens, The Non Transferable Tokens ( aka NTT)

-------------------------

Jesse | 2024-01-08 20:06:08 UTC | #69

Can we revisit this topic? I‚Äôve arrive at a point of development in which canisters having the ability to control neurons is a feature that I need in order to progress in my application.

-------------------------

