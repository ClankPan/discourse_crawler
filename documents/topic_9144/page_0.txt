Roman | 2021-11-29 18:05:03 UTC | #1

I think the security problem of Internet Identity solution should be placed in top priority. It can’t be delayed anymore. Otherwise a lot of people won’t take the risk of using their Internet Identity with other authentication devices than yubikey or ledger FIDO(U2F) on desktop, won’t have patience to create another Internet Identity without neuron and ICP staked for using it with other devices more practical to use dapp with fluidity and won’t have patience to connect their yubikey or ledger just to use a social dapp, what it is eventually very bad for massive adoption, cause having to connect one's yubikey to Desktop before interacting with Facebook would be a non sense. For example, I can't use any app on my iPhone, because I don’t want to risk hacking of my internet identity and lose my staked neuron, so I would like to often connect to distrikt etc, but I rarely do, because it is a lot of steps to do this...

Everybody should claim the Internet Identity seedphrase can’t be removable or changeable without having to enter the seedphrase in the first place. This risk of seeing one’s Internet identity and its associated staked neuron lost forever is insufferable. None whale wants to take such a risk ! It has to be corrected ASAP. I already talked about this several times, but no one among @Dfinity or Dev seems preoccupied by this eminent lack of security whereas users are ! Without this, again, no massive adoption.

If we had to enter the seedphrase before removing it, we could still be hacked and have our Internet Identity and then our neuron stolen for a while, but not forever ! So if our ICP are staked, we even don't lose anything, cause we just have to enter our seedphrase and suppress the device that the attacker would have installed since the stealing. But if the attacker can removes our seedphrase, because he is not asked our seedphrase before being able of removing it, and after this just has to create a new one, our neuron and more globally our Internet Identity is lost forever ! 

People with big amount of ICP are terrified about being stolen like this forever, so add the non removability of seedphrase without before entering the seedphrase, like google, apple and any companies do for account. It is a non sens that we can suppress a seedphrase so easily and create a new one just after, it is a nightmare for anyone, overall for big investors who consequently remains investors, but non users, cause too much scared for taking the risk of connect app with a phone.

But even without speaking about investment, as long as people won't be able to be reassured about the possibility of taking control of their Identity back, because their seedphrase is not removable as easily, a lots of people won't take the risk to develop a full identity who can be stolen in one second forever.

So people, let's talk about this, and make the seedphrase non removable without having to enter it in the first place to defend the big amount of icp staked and to allow people to take control back sooner or later.

-------------------------

mparikh | 2021-11-28 20:59:52 UTC | #2

This is BRILLIANT. 

First of all, the alternative is , of course, NOT to stake a large amount of ICP through the NNS dapp; which relies on internet identity. You can use quill, keysmith etc without internet identity to stake. 

However, for most mere mortals, making the internet identity as secure as possible SHOULD BE one of the topmost priorities. 

Currently the seedphrase can be changed by anyone who has access to any authentication mechanism with internet identity anchor  ( including windows hello etc). I believe that we should make the seedphrase the "final" authentication agency for the internet identity.

In that context,  a seed phrase that only be changed by it's own consent will solve a lot of nagging issues for the end user.

-------------------------

Roman | 2021-11-29 00:22:21 UTC | #3

@wpb @Arthur @hpeebles @Kyle_Langham @lastmjs @ayjayem Your opinion ?

-------------------------

timo | 2021-11-29 09:05:59 UTC | #4

You are correct about the current design of the II. In the current design all devices that are added to an II are equal in power. Therefore, the whole II is only as secure as the weakest of the devices that you have added. If someone steals you oldest phone and overcomes the weakest fingerprint scanner then he can take over your entire II and lock you out. Similarly, the attacker can also take over if you use a compromised browser or sufficiently compromised OS and log into https://identity.ic0.app/.

So here all devices added to an II are on the same level and control of the II is defined by an OR condition: device 1 || device 2 || device 3 || ...
Here, the recovery phrase is just another device like any of the others, just not a physical one.

What you are proposing is to introduce two levels. Devices on the lower level can only manage devices on the same level whereas devices on the higher level can manage all. So if a device on the lower level gets compromised then a device on the higher level can step in and kick out the compromised one and a complete takeover is prevented. Multiple administrative levels do not currently exist in the II. Whether they are needed is up for discussion.

A couple of points to guide the discussion:

1. Account recovery through multiple administrative levels can be offered by the dapp. It does not have to be in the II. The NNS already offers that. You can configure a "hotkey" principal for voting with your neurons (that is the lower level) and a main principal for ultimately controlling it (that is the higher level). The main principal can reset the voting principal. You can use two principals that come from different IIs, basically achieving what you want. Any dapp could offer the same. For example, a social network could allow to associate two principals with each user account instead of only one.

2. It is only for some applications, that a temporarily compromise is not as bad as a complete takeover. The case of locked neurons are such a case but that case is rather special. For a social media account you can also argue that a temporary takeover is not so bad, just a couple of posts in your name, but you would prefer that over completely losing the account. For a wallet of tokens or NFTs on the other hand a temporary compromise is as bad a complete takeover. The attacker can sell everything in your wallet immediately. So the multi-level administration will not protect you. Therefore the question is, isn't it better if the dapp manages this along the lines of 1. rather than the II?

3. The II is primarily designed to prevent people from losing access and a convenience feature. It is not meant to protect high-value assets. To prevent losing access you will need multiple devices on the higher level. Just one (like one seed phrase) is likely not enough.

4. If such administration was part of the II then how exactly would it look like? Is two levels enough? How many devices on each level? What is needed and what is feature creep? Are we introducing new foot-guns that lead to people locking themselves out?

I think the discussion is going to be a long one and that is the reason that the II is as simple as it is now.

-------------------------

Roman | 2021-11-29 18:08:15 UTC | #5

I was starting to get too tired to work out this problem and its solutions so precisely, because I have done it several times already. So I lost my energy and got used to talking about it for nothing. This is why my introduction is superficial. But @timo, thank you very much for your sharp clarity ! You gave me hope back. I agree with your brilliant complete post. I think you all said ! But while waiting for a full solution, I think we could just define a seed phrase request in order to avoid this main issue : the loosability of II forever. The seed phrase is already defined, I think that defining this function would not be too cumbersome to be handled quickly and would reassure a lot of people quickly.

About your point 2., at least, a temporary compromise would not threaten our staked icp, so a temporary compromise is quite good in comparison with the current total loss of our identity and then of our neuron and its icp in case of compromise.

-------------------------

lastmjs | 2021-11-29 10:35:28 UTC | #6

I wonder if this has already been exploited: https://forum.dfinity.org/t/my-nns-is-out-of-control-please-help-me/7896

-------------------------

Roman | 2021-11-29 11:09:43 UTC | #8

I know a lot of people refusing to stake their ICP in the NNS because of this risk. If several other cases like the one linked by @lastmjs, the word will spread very quickly. An article against Dfinity or ICP  could be dramatic, and even if the problem was solved once the article written. It would take a lot of time to heal of this. We have to stop underestimate this problem. ICP can’t be associated with such irreversible hack whereas it says « tamperproof » everywhere. People will tolerate hack, but not definitive hack. This problem could concern every each one of us. @zire

-------------------------

zire | 2021-11-29 11:28:18 UTC | #9

If a hacker obtains physical access to the laptop AND the yubikey (which enables changing seed phrase), there is no measure by any institution in the world that can be deployed to prevent this identity from being stolen, whether it's CIA, FBI, NSA, or DFINITY. This is very likely the case for @xiaobing .

It's very unfortunate that this has happened to Xiaobing.

-------------------------

Roman | 2021-11-29 18:09:45 UTC | #11

I don’t agree, there is one : just make impossible to remove the seedphrase without having to enter the seedphrase in the first place to do it.

I can't understand why this simple function is not installed, it would prevent against any definitive loss of Identity and neuron.

If this was set, sooner or later, anybody could take control back, cause the hacker or stealer would never have removed the seedphrase, given the fact he would not know the seedphrase to enter in order to remove it.

-------------------------

Roman | 2021-11-29 18:10:12 UTC | #12

Forget the yubikey, just think of someone having installed iPhone or Mac as devices, in one instant, it can be stolen, and the stealer can remove the seedphrase. So, yes, you did not have other reports yet, but a lors of people are not using ICP on their phone, cause they know about this security lack.

Just set the necessity of entering the seedphrase before removing it, and the whole problem disappears ! For example, I could use ICP on my phone, cause in the worst case scenario, I would lose temporarily control on my identity and my neuron, but as my icp are staked, the hacker could not steal it, and I just would have to enter my seedphrase to take control back and remove his devices.

-------------------------

LightningLad91 | 2021-11-29 11:40:52 UTC | #13

Hi Roman. I’ve been trying to understand your concern/request and I think I’m following your logic now.

I think the scenario your describing is:

1. The attacker has compromised a physical authentication device (laptop, yubikey, etc.) somehow.

2. The attacker used that authentication device to clear out all other authentication methods, to include the generation of a new seed phrase and removal of the old seed phrase.

What you are requesting is that II should only allow an existing seed phrase to be removed if the previous seed phrase is entered correctly first. By doing this you are giving the original owner the ability to recover the account even if one of their other authentication devices was compromised? Is that correct?

This would of course assume the user has not stored their recovery key in a digital form that has been exposed to the attacker. But I think I still see value in your recommendation given the prior issue linked by @lastmjs.

-------------------------

Roman | 2021-11-29 11:44:01 UTC | #14

EXACTLY !!! Sorry for my English my friends. @lastmjs @zire, @LightningLad91 expresses better than me my opinion, read this :point_up_2:

-------------------------

Roman | 2021-11-29 11:44:42 UTC | #15

You have perfectly synthesized my opinion.

-------------------------

Roman | 2021-11-29 11:45:41 UTC | #16

I have been recommending this for months now.

-------------------------

zire | 2021-11-29 11:54:12 UTC | #17

Thank you @LightningLad91 for paraphrasing the suggestion from @Roman . I understand your suggestion now. 

Have you guys seen such security measure being deployed in any other L1/L2 blockchain? I'm curious to know how others in the industry are tackling this issue. A few examples would be helpful.

-------------------------

Roman | 2021-12-02 08:42:17 UTC | #18

I only saw the radical no removability of seedphrase, like Ledger does with their hardwallet for example. 

I think that if it is not possible to set, if we have to choose between : 
- changeability of the seedphrase too easily (so, without having to previously enter the original seedphrase before removing it)
- impossibility to remove it, we would have to choose impossibility to remove it.

We should choose the second one.

@nmattia ?

-------------------------

LightningLad91 | 2021-11-29 12:26:24 UTC | #19

Unfortunately, I am relatively new to the blockchain world (the IC was my first exposure) so I would not be able to reference any services on other networks. Perhaps @lastmjs knows of a few.

IMO, It does seem like it would make sense for the seed phrase to be protected in this manner. Unlike centralized Web2 accounts, these accounts cannot be recovered by proving my identity to a help desk technician. Requiring an existing seed phrase to be entered before replacing it seems like a logical protection if you're working under the assumption (like I am) that the seed phrase is put in cold storage for disaster recovery and not being used to login frequently. This still puts the onus on the user to store their seed phrase offline (in my case a safe).

That being said, I'm not an II expert, and I'm confident Dfinity can come up with an adequate solution.

Edit: I realized I made a logical leap regarding my web2 reference. To clarify, I've used several Web2 services that required me to authenticate with an existing device, enter an existing password, or recover via email/text in order to change a security setting on my account. In Web2, if these authentication method are compromised your only real option is to prove your identity to the company/organization that operates the service and has authority to manage your account directly. You typically prove this with a SSN (if you're in the U.S) or some other unique identifier that the user is expected to protect. There is no equivalent out-of-band recovery method with the II and I see the seed phrase as being a potential solution. But that does not work if an attacker has compromised an authentication device and is capable of resetting the existing seed phrase.

-------------------------

mparikh | 2021-11-29 13:26:49 UTC | #20

[quote="LightningLad91, post:19, topic:9144"]
There is no equivalent out-of-band recovery method with the II and I see the seed phrase as being a potential solution.
[/quote]

If you produce seed phrase key shares out of the seed phrase ( look at github.com/icdev2dev/bachao for a prototype) and distribute those key shares to friends and family,  you have,essentially, an out-of-band recovery. Now you would need to call your friends and family for social recovery of seed phrase.

In that above context, having a seed phrase that is locked(i.e. cannot be changed by ANY other authentication means except knowing the seed phrase), completes the picture beautifully.

Incidentally existing means to authenticate/recover should always be 2FA; even in the current context. This can be accomplished by ledger-nano acting as FIDO device; for example (because you need both the device, ledger-nano, in this case & the pass code to the ledger nano)

-------------------------

mparikh | 2021-11-29 13:36:13 UTC | #21

[quote="LightningLad91, post:19, topic:9144"]
Web2, if these authentication method are compromised your only real option is to prove your identity to the company/organization that operates the service and has authority to manage your account directly
[/quote]

And with the ability of canisters to hold ICP, it is now possible , I think, to have this mechanism be built into the IC for your friends and family to act as " the company that provides that service of recovery". I will write this up.

-------------------------

LightningLad91 | 2021-11-29 13:44:46 UTC | #22

I'm all for social recovery. I look forward to the day this is possible.

I agree that having a locked seed phrase would compliment the social recovery mechanism. Otherwise, the attacker can just remove all of your approved contacts.

-------------------------

coteclaude | 2021-11-29 13:57:31 UTC | #23

When I started using Yubikey last June, I was prompted for my Yubikey PIN every time I wanted to login in my NNS, which I loved.  Then, after a NNS upgrade, it stopped asking for my PIN.  Was it only a coincidence or a change in the upgrade?  

According to Yubico, the PIN request is controlled by the service provider (then the NNS).
If this is the case, can we have this back?


* FIDO2 is made up of two components - [WebAuthn](https://www.yubico.com/authentication-standards/webauthn/) on the service provider end, and [CTAP2](https://www.yubico.com/resources/glossary/ctap/) on the YubiKey end.
* PIN prompts are a result of a WebAuthn setting known as [User Verification](https://www.w3.org/TR/webauthn/#enumdef-userverificationrequirement). **This setting is controlled by each service provider.**
* If a service provider does not specify a setting for User Verification, most modern browsers will default setting it to Preferred (as per [the WebAuthn spec](https://www.w3.org/TR/webauthn/)), which may result in a PIN prompt.
* If you prefer not to be prompted for a PIN, try [disabling the YubiKey's FIDO2 function](https://support.yubico.com/hc/en-us/articles/360016615000), and see if that eliminates the PIN prompt, while still allowing you to sign in. Note that FIDO2 is required for certain services (e.g. [personal Microsoft accounts](https://www.yubico.com/works-with-yubikey/catalog/microsoft-accounts/)), so disabling the function on the YubiKey will cause it to not work or not be recognized by those services.

-------------------------

Roman | 2022-01-02 20:03:53 UTC | #24

My friends @mparikh, @LightningLad91, before any complex social recovery, I think that just by making necessary to enter the seedphrase before being able to remove it would be enough to quickly and strongly secure things. Afterwhat, we could think more sophisticated ways for recovery, but once secured with the most immediate and then simplest solution. I scare that proposing system more complex, we never adopt any system of security before a long long time. If not possible to make necessary to enter the seedphrase before being able to remove it, let make the seedphrase no removable. But let's change something quickly !

-------------------------

mparikh | 2021-11-29 14:14:51 UTC | #25

Yes, locking the seed phrase is the very basis of securing other more complex recovery mechanisms.

-------------------------

Roman | 2021-11-29 14:15:44 UTC | #26

So agree my goodfriend, and so happy for having eventually been understood by you and @LightningLad91.

-------------------------

coteclaude | 2021-11-29 14:27:03 UTC | #29

I totally disagree with non suppressible seed phrase.  I do not use seed phrase.  Everything that appear on the screen can be recorded easily.  Imagine if someone have access to your seed phrase and it is not suppressible.  Then the hacker would have access to your account forever.  
The seed is a 1 way authentication only.  This is not good.  
We should always have a 2FA system.  Now, the only 2FA device is Nano Ledger, which I use.  So you need the Nano in your hand and need to know the PIN.
I am hoping the Yubikey can be configure to ask the PIN as well.

-------------------------

mparikh | 2021-11-29 14:43:39 UTC | #30

So this (prompting of the yubikey pin) happened for me as well. It is now no longer happening for me as well. 

I am trying to see what changed and how. This led me to try to do a reproducible build for internet identity as described here (https://forum.dfinity.org/t/verifying-the-code-of-the-internet-identity-service-a-walk-through/4650).

I have been yet to get to a current reproducible build. The build currently in production diverges. That said,  this is a recent build (October time frame).

-------------------------

Roman | 2021-11-29 18:11:52 UTC | #31

I disagree too. I would prefer supressibility by firstly asking the seedphrase. But If i have to choose between current easy removability and non removability, non removability is safer !

-------------------------

Roman | 2021-11-29 18:12:26 UTC | #32

It would imply to create another identity and transfer what you can, but it is better than seeing your neuron gone forever. But again, I am for removability with asking of the seedphrase before any removing.

-------------------------

xiaobing | 2021-11-29 15:05:53 UTC | #33

The current focus of attention is the prevention of account loss before, so how to get back after the loss?I believe that most OF the ICPs in NNS are more or less pledged inside, which has great benefits with other cryptocurrencies, so that the victims have a chance to recover their losses, shouldn't there be a judge committee to determine the ownership of the account?

-------------------------

LightningLad91 | 2021-11-29 15:07:25 UTC | #34

I agree. Seems like an easy win

-------------------------

lastmjs | 2021-11-29 15:34:39 UTC | #35

I believe that generally, in other projects, seed phrases are immutable. Once generated, they can always be used to recover a private key. I believe this is the case with MetaMask, and I imagine is the case for Bitcoin and Ethereum private key pairs. At the private key pair level, I don't think it's possible to "delete" a recovery phrase, since that phrase is mathematically designed to produce a private key.

The interesting thing about Internet Identity is that we are able to generate multiple public/private key pairs, if I understand correctly, thus we can change seed phrases. Is that how it works?

If we want to be more like other projects, having immutable seed phrases makes sense. But I imagine other projects do this because they have to, not because they choose to.

Why should the seed phrase be privileged over other authentication methods? For example, why shouldn't you have to present the Yubikey to remove the Yubikey? Why is the seed phrase the one authentication "device" that must be presented before being removed? Can you see my logic here?

I am concerned about losing the seed phrase itself. Part of the reason (maybe the whole reason) for the II allowing multiple devices is to ensure that you don't ever lose access to your account. So if you lose any number of devices, as long as you have one you can log back in. This of course makes it more susceptible to theft, since an attacker can remove all other devices. But what if you lose a Yubikey or your seed phrase? You'd want the power to remove those devices, wouldn't you?

Hopefully that all makes sense, we should just consider the implications of this. The seed phrase would become even more important if we implement this change. Users would need to understand that the seed phrase can never be regenerated or recovered. And if the attacker gets the seed phrase, then they would have irrevocable power to the account.

I think adding social recovery to the seed phrase could be an elegant solution. It should be extremely difficult for an attacker to obtain a threshold of shares, and even if one were compromised the threshold could hopefully remove any individual shares.

-------------------------

dpdp | 2021-11-29 15:43:32 UTC | #36

To understand how HD (Hierarchical Deterministic) Wallet works: https://iancoleman.io/bip39/

Internet Identity Specs: https://github.com/dfinity/internet-identity/blob/main/docs/internet-identity-spec.adoc

Internet Identity allows you to connect using any keypair listed in your "devices" (incl. recovery mechanisms which are derived from the seed phrase).

By doing this; it generates based on your Internet Identity Anchor and the front-end hostname, a unique DelegationKey; ( https://github.com/dfinity/internet-identity/blob/main/docs/internet-identity-spec.adoc#the-prepare_delegation-method )


I think social recovery would mean "Recovery identities" that the user is assigning (before losing his access) such as  M-of-N would be required to add a new device (public key) to the identity which should map to the original user;

-------------------------

coteclaude | 2021-11-29 15:45:22 UTC | #37

The seed phrase for the NNS cannot be used like any other seed phrase of other systems because of the  locked neurons.  As an example, in other crypto wallet like metamask, if you have concern or doubt your seed phrase may have been stolen or is lost, you may create a new wallet and move your crypto.  But this cannot be done with ICP locked in neurons.  So a permanent seed phrase could be very bad for the NNS

-------------------------

Roman | 2021-11-29 18:12:52 UTC | #38

I totally agree, and that is the case for example with Ledger Company's Hardware : they tell us "save cautiously your seedphrase, cause if you lose it, you will lose everything" and up to us to be very very careful. 

But currently with ICP, just to protect against seedphrase lost, everybody is put in danger, and overall, a lot of people don't use ICP because they resign using exclusively yubikey or ledger FIDO(U2F), but they can't use this on phone. So this is precisely why the seedphrase is better to choose than Yubikey and Fido to answer your question about what device make non removable rather than another : 
"Why should the seed phrase be privileged over other authentication methods? For example, why shouldn’t you have to present the Yubikey to remove the Yubikey?"

Answer : Yubikey and FidoU2F are not usable with iPhone and Android, so in order to avoid any risk of having Identity and than neurons stolen, one never adds the phone as device and then doesn't use ICP except once a day at UTC16pm to go to the NNS and at this moment only, go one minute to distrikt...

-------------------------

Roman | 2021-11-29 18:13:06 UTC | #39

That is why the best solution is : removability of the seedphrase only after having entered the seedphrase in the first place. But if not possible like @lastmjs seems to say it, the best is to choose immutable phrase. Cause, anyway, currently, if your seedphrase is compromised, you lose your identity and your neuron forever. That is why I don't understand your opinion, cause you seem to say that we could be compromised, but taking control back on our identity. Currently, if you are compromised, the attacker create another seedphrase, removes your devices, ans that is done forever for you.

-------------------------

Roman | 2021-11-29 18:13:17 UTC | #40

So, in this case (impossibility to make necessary to enter seedphrase in the first place before being able of removing it), immutable seedphrase like says @lastmjs remains better than losing control forever as the current system implies.

-------------------------

chishan1082 | 2021-11-29 16:15:22 UTC | #41


Maybe set up two devices with high authority for backup?

-------------------------

mparikh | 2021-11-29 16:16:18 UTC | #42

[quote="dpdp, post:36, topic:9144"]
I think social recovery would mean “Recovery identities” that the user is assigning (before losing his access) such as M-of-N would be required to add a new device (public key) to the identity which should map to the original user;
[/quote]

Almost....currently this is my thought process on social recovery...
social recovery would mean “Recovery identities” that the user is assigning (before losing his access) such as M-of-N would be required to update the mnemonic with a new seed phrase replacing the old and communicating the same to the original user.

-------------------------

Roman | 2021-11-29 16:16:09 UTC | #43

This is the current system.

-------------------------

lastmjs | 2021-11-29 16:19:46 UTC | #44

I have been using a Yubikey on my Android phone for over a year now. I'm not sure about iOS, do they have NFC or USB-C?

-------------------------

mparikh | 2021-11-29 16:21:08 UTC | #45

[quote="lastmjs, post:35, topic:9144"]
Users would need to understand that the seed phrase can never be regenerated or recovered
[/quote]

I would say that the original seed phrase can never be recovered. But an internet identity can be assigned a new seed phrase IF AND ONLY IF they can demonstrate possession of the old (existing) seed phrase.

-------------------------

dpdp | 2021-11-29 16:22:12 UTC | #46

What about just providing a Shamir39 tool to split the mnemonic?

https://iancoleman.io/shamir39/

-------------------------

mparikh | 2021-11-29 16:23:00 UTC | #47

That is exactly what github.com/icdev2dev/bachao is doing.

-------------------------

LightningLad91 | 2021-11-29 16:30:56 UTC | #48

[quote="lastmjs, post:35, topic:9144"]
I think adding social recovery to the seed phrase could be an elegant solution. It should be extremely difficult for an attacker to obtain a threshold of shares, and even if one were compromised the threshold could hopefully remove any individual shares.
[/quote]

If I'm understanding correctly, you're saying that once you establish social recovery shares you would not be able to remove any of them unless enough signatures were provided to meet the threshold? So if an attacker were able to compromise one of your existing devices he/she would not be able to disable social recovery?

That sounds good to me but I'm concerned something like that would take a fair amount of time to implement. We already have one user who is in a non-recoverable state.

What would be the minimum threshold required? This may sound really sad but I don't have a whole lot of people I would trust with the social recovery shares. For me, it's more about trusting these (1,2,3?) people to keep track of their share so that when the time comes I can rely on enough of them to meet the threshold. Personally, I'd much rather stick my seed phrase in safe with a tracker and call it done.

I understand this may not be ideal for everyone but I think it's good to provide multiple options and let the user choose what they feel comfortable with.

[quote="lastmjs, post:35, topic:9144"]
But what if you lose a Yubikey or your seed phrase?
[/quote]

I don't see this being too different from protecting your personal records. Sure I have online backups, but my most critical records are stored in a fire-proof safe and I don't access them frequently

-------------------------

Roman | 2021-11-29 18:36:22 UTC | #49

No. But even in this case, people would never have the patience of manipulating a yubikey before each impulse to connect to the web, mainly the more superficial but the more habitual and frequent like connecting to socials, streaming etc. If we had to do this to connect to Facebook or YouTube each time, it would have never spread. Plus, yubikey has a price, and plus again people would never bring their yubikey with them everywhere, but they surf on the web everywhere, so…
I think the seedphrase is the solution. Up to people to add devices later. But seedphrase has to be the security core, and has to be either unremovable/immutable without entering it before being able to remove/mutate it, or to be unremovable/immutable.

-------------------------

lastmjs | 2021-11-29 16:52:35 UTC | #50

Social recovery doesn't have to be "social". I think there are security benefits to being able to split up the recovery materials, even if you don't place the secret shares with another human being. For example, you could create 5 shares and hide them throughout your house, a burglar would have to find 3 of them instead of just the one location where you currently store your seed phrase.

And then after the home invasion is over, and you realize 1 or 2 shares have been stolen, you can use the remaining 3 shares to remove the 2 stolen shares (I'm hoping that's possible).

-------------------------

lastmjs | 2021-11-29 16:54:27 UTC | #51

[quote="LightningLad91, post:48, topic:9144"]
That sounds good to me but I’m concerned something like that would take a fair amount of time to implement. We already have one user who is in a non-recoverable state.
[/quote]

Basic versions of this shouldn't be too hard, see posts in this thread by @mparikh and @dpdp.

-------------------------

mparikh | 2021-11-29 17:03:17 UTC | #52

[quote="lastmjs, post:50, topic:9144"]
Social recovery doesn’t have to be “social”. I think there are security benefits to being able to split up the recovery materials, even if you don’t place the secret shares with another human being
[/quote]
Indeed. In fact with pro crypto states like Wyoming , it could be a corporation that might own a key share (and presumably having more robust mechanisms than just a phone call to reveal its key share).

[quote="lastmjs, post:50, topic:9144"]
For example, you could create 5 shares and hide them throughout your house, a burglar would have to find 3 of them instead of just the one location where you currently store your seed phrase.
[/quote]

You probably WOULDN'T want to do exactly that because of disaster recovery considerations.

[quote="lastmjs, post:50, topic:9144"]
And then after the home invasion is over, and you realize 1 or 2 shares have been stolen, you can use the remaining 3 shares to remove the 2 stolen shares (I’m hoping that’s possible)
[/quote]

Yes...through mnemonic rotation

-------------------------

Roman | 2021-11-29 17:05:04 UTC | #53

Yes, I agree with you !

-------------------------

LightningLad91 | 2021-11-29 17:15:10 UTC | #54

That's a good point. I could certainly see the benefit of this. Especially if I wanted to keep a share in my safe and maybe another in a deposit box, and one more in a cloud back up, and so on.

So at the end of the day we are still "locking" the seed phrase but instead of entering the existing seed phrase to unlock it we would have to compile enough shares to meet the threshold.

-------------------------

mparikh | 2021-11-29 17:24:14 UTC | #55

Exactly. The other thing is due to internet identity's level of indirection. This makes it possible to effectively do mnemonic updation. If some of the key shares are stolen/lost etc, provided you meet the threshold,  you can change the mnemonic and assign new key shares to different entities. All old key shares become invalid.

-------------------------

mparikh | 2021-11-29 17:37:27 UTC | #56

[quote="LightningLad91, post:48, topic:9144"]
For me, it’s more about trusting these (1,2,3?) people to keep track of their share so that when the time comes I can rely on enough of them to meet the threshold.
[/quote]
It's all about incentives. If you can prefund your disaster recovery so that every a disaster recovery drill occurs, you provide ,say 1 ICP, to each successful participant. That might provide enough incentive?

-------------------------

coteclaude | 2021-11-29 20:03:08 UTC | #57

My wish is that Dfinity create a security team who would develop a strong security system for the NNS.  NNS manage billions of $. No one, who steal your seed or your Yubikey, should be able to add and delete your devices so easily.  We should have warnings, 2FA if not 3FA, confirmation on other device, etc.
And then, should develop a self recovery system where only the creator should be able to recover.
No voting or human should be involved.
And also plan a system for your family to have access if you have a fatal accident.
Dfinity team are the best creators I have seen so far.  It should not be very difficult for these professionals to figure an innovative way to have the best secure system over all others.
Unfortunately, right now, I feel my Kraken account and my regular bank account much more secure then my NNS account.  This can be changed.
IC is a new born, so is the NNS.  Time will make it grow.  Have no choice if we want mass adoption.

-------------------------

nmattia | 2021-11-30 10:58:09 UTC | #58


> When I started using Yubikey last June, I was prompted for my Yubikey PIN every time I wanted to login in my NNS, which I loved. Then, after a NNS upgrade, it stopped asking for my PIN. Was it only a coincidence or a change in the upgrade?


Thanks for the research! This got me curious and I asked around for reasons why this might have been disabled. I think this is where it was disabled, and explains why: https://github.com/dfinity/internet-identity/pull/311

So yes, we can have this back, it's just that (right now) it's not very useful. To sum up the description: if someone steals your Yubikey, then can pretend to be the Internet Identity webapp and request and authentication *without* `UserVerification`; then forward that to the canister. Since the Internet Identity backend/canister doesn't check for that flag, then it doesn't really help. The "only" case where it helps is if the hacker has only limited capabilities, i.e. if the hacker only tries to log in via the web frontend.

I am guessing this is still something though; alternatively we could also make the changes in the backend to actually check that the Yubikey/FIDO2 device was used with `UserVerification` set to `preferred`.

-------------------------

nmattia | 2021-11-30 11:05:53 UTC | #59

Trying to clarify things, mostly for myself; there's also a great summary [here](https://forum.dfinity.org/t/internet-identity-lack-of-security/9144/13) by @LightningLad91 and a great comment by @timo [here](https://forum.dfinity.org/t/internet-identity-lack-of-security/9144/4).

 If I understand correctly, this is the OP's original problem: if any of your devices gets compromised, then the hijacker can replace all your devices (including seedphrase) locking you out completely. @Roman you also mention that, according to you, getting your account hijacked temporarily is not a "big" problem since all your ICPs are staked in neurons, and being able to recover your account using the seedphrase means recovering your neurons.

The idea proposed here is to make sure your seedphrase either cannot be removed at all, or cannot be removed without the user first entering it. This means that as long as you know your seedphrase, you can always log in.

 There are some issues with this approach (some that have been mentioned above):

* What if you forget your seedphrase? Then you are stuck with a seedphrase which you cannot change. What are the consequences of this, especially if it was ever leaked?
* What if you don't trust seedphrases (someone mentioned that characters appearing on a screen is not very secure)? Then don't use seedphrases! And this issue doesn't really affect you.
* What if the attacker keeps adding new devices, faster than you can remove them? That's something I would be worried about. If the attacker has the means and knowledge to hijack one of your devices, they can do many things to always have a way in.
* Right now, the backend doesn't differentiate between recovery devices and ... regular devices, meaning the attacker could (for instance using `dfx canister call ...`) add *another* seedphrase that the legitimate account owner could never change.

Furthermore there are some points I want to clarify:

1. IANAC -- I'm no cryptographer but I think that "seed" phrase is a bit of a misnomer. As others have pointed out above, most blockchains *must* have immutable seed phrases, which are unique for a wallet. This is not the case of II, where "seed" phrases are just another device (although the webapp treats them somewhat differently). To convince yourself, create an anchor, add a "seed" phrase, remove the "seed" phrase, and add a "seed" phrase. The second one is different from the first one.

2. Internet Identity is not a wallet. Its goal is to be an authentication mechanism for the IC. *Because* it is flexible it *can* be made very secure (see below) but at the end of the day (as Timo mentioned above) it is only as weak as the weakest link in the (device) chain.

3. You probably shouldn't use the same identity for your 30k staked tokens and for dscvr/distrkit/openchat. In one case (the staked tokens) you'll want something that's ironclad, probably with one or two hardware devices (like a ledger or yubikey) and absolutely *0* iPhone/iPad/Android devices. Those one or two hardware devices will be put in cold storage and you'll use them every *n* years when your neurons dissolve. The other identity is one you use for social accounts, etc, that is stored on your day-to-day devices (iPhone, etc). Anchors are cheap, why not have many? You (hopefully) don't use the same login (mechanism) for your e-banking and for Spotify, probably best to do the same on the IC.

4. It was mentioned that using a Yubikey/FIDO2 device with II is 2FA; as far as I understand it isn't. Two-factor authentication is when you have two factors, typically a password *and* a yubikey. In II's case, the yubikey is the *only* authentication thingy you use, since there is no password, making this not-2FA. ~~This is actually one-over-two factor authentication (or one-over-multiple FA...).~~

Maybe the problem here is better solved with best practices and documentation? Maybe we should have a page somewhere explaining the limitations of II as it is today, warn about pitfalls, and suggest workflows like splitting your IC presence between several anchors with varying security?

There's also some confusion that keeps being brought up about the relationship between recovery devices and regular devices. They are treated kinda the same but still differently in the webapp, and kinda the same but still differently in the backend canister. This should be clarified, and we're revisiting the UX a bit at the moment, but suggestions are welcome!

-------------------------

Roman | 2021-11-30 12:54:00 UTC | #62

Dear @nmattia, thank you for you wise answer. I will answer following your points' order :

> Roman you also mention that, according to you, getting your account hijacked temporarily is not a “big” problem since all your ICPs are staked in neurons, and being able to recover your account using the seedphrase means recovering your neurons"*

I don't say that is not a big problem, but a problem less big than the current problem of seeing one's identity and neuron lost forever. This is just a "moindre mal".

> What if you forget your seedphrase? Then you are stuck with a seedphrase which you cannot change. What are the consequences of this, especially if it was ever leaked?

Let me ask you, what if someone forgets his Ledger Hardware Wallet Seedphrase or any other immutable seed phrases ? Answer : this someone loses everything, and that is why Ledger, etc. recall frequently about being so cautious with this seedphrase. But despite of this risk, they don't choose a mutable seedphrase, cause with mutability comes the insecurity. I can assure you that no whale would buy Ledger if they had the same seedphrase mutability than ICP to protect the forgetters. In summary, currently,  the most cautious or responsible ones have to pay by taking all the risks in order to allow to those forgetting or losing their seed phrases a way to recover. But with this, the whole security falls for everyone.

> What if you don’t trust seedphrases (someone mentioned that characters appearing on a screen is not very secure)? Then don’t use seedphrases! And this issue doesn’t really affect you.

I am ok with this point, but this is quite a minimal risk compared to the current situation, and if one doesn't use seedphrase, one uses : 
- either a yubikey or ledger FIDO(U2F) which is inadequate with a fluid using of ICP ecosystem on an iPhone or even on a Desktop without having to connect an hardware every time before going to stream, on socials like distrikt, etc.
- or a device using biometrics, so easily compromisable ; then every persons with an amount that they won't want to risk – whatever the amount (it can be 100k for a whale, but also $50 for someone with low income) – won't use ICP sooner or later, cause of :
1.the fear of losing everything after a simple hijack or a phone/computer steal/loss
2. the lack of fluidity of having to use yubikey/FIDO all the time.

> What if the attacker keeps adding new devices, faster than you can remove them? That’s something I would be worried about. If the attacker has the means and knowledge to hijack one of your devices, they can do many things to always have a way in.

Not if enter again your seedphrase is accompanied by the question : "do you want disconnect all your currently connected devices" ? Like Facebook or Apple do after a password reinitialization : they give the opportunity to disconnect every devices at once. But, still, even if this is possibility was not implemented, and that I assume the situation you think about, this situation is very too rare, even exceptional, whereas current system implies an important probability to lose everything without any opportunity to take control back and that my approach gives the opportunity to take control back in the majority of cases. It is a matter of probability : but your way of arguing is like saying "the car seatbelt is not a solution, because in some rare cases, it can decapitate you while an accident, so don't install any seatbelt in any car". But think about the fact that your mother could have been killed by the seatbelt in the accident in which she just died is not enough to forget that she was not using the seatbelt when she had the accident and that she would have got better chances if she had used it. In our case : once having been hijacked forever and our neurons lost forever, the thought that the attacker would have maybe added devices faster than me would not help to accept the current system in the case where I would be hijacked forever, cause the situation is too rare. It is not about finding the perfect solution, but to quickly limit the current high probabilities of failure.

So I agree with you, the main risk is to have one's seedphrase stolen, but the risk already exists and currently, if one's seedphrase is stolen, one's neuron too, and forever, whereas not with my approach.

> Right now, the backend doesn’t differentiate between recovery devices and … regular devices, meaning the attacker could (for instance using `dfx canister call ...` ) add *another* seedphrase that the legitimate account owner could never change.

• This is in your hands :wink:

1. Agree
2. Agree
3. Dfinity MUST NOT argue that people just have to create several identities to solve the problem. One of maint "marketing" and attractive points of Internet Computer is : having now the possibility of not manipulating several accounts. Still : let us assume someone creates one identity only for staking, like me, it will never be totally quiet : the scare of being hacked will be already here with the current system, because of the previous points. Plus, let us assume I create an identity just for chill on the web, here is the problem : almost each NFT ICP projects are developing an "Engage-To-Earn" authentically allowed for the first time by the on-chain technology, so people will use their "casual" identity too engage, and generate NFT, Rewards, etc. and eventually will be scared of losing this "casual identity" too because of all their rewards accumulated, and if in order to protect their rewards, they send a lots of rewards to their first identity : the "wallet" identity, they will be even more scared about losing this identity dedicated for staking, but they will also lose a lot of percentages of rewards, because the more you have, the more rewards you earn. Simply think of someone having 1000 icp, this someone create 2 identities in order to have 2 neurons with 500 each : his yield will be so much lower. So, let us keep the "one identity" marketing, cause without this, the ICP is far less interesting. And the day where appears a blockchain with the one chain technology, and a better security, ICP is done. I even can say to you that I know project developing by thinking of avoiding this potential lack of ICP identity unity (if the unity of Internet Identity is eventually forsaken). Let us not forget that concurrency is everywhere, and that the identity will be a battlefield for blockchains.

@LightningLad91 @mparikh @lastmjs I let you complete or reformulate !

-------------------------

timo | 2021-11-30 15:49:16 UTC | #63

I think there is a major misunderstanding here. The II was not meant to be used for holding stake in the amounts that are thrown around here. It is not about having one II or two different ones. You simply don't use II at all for these kind of amounts.

II is a convenience feature for everyday use. It is not a security feature for long-term storage. 

II is and remains a "software wallet" no matter how you use it, even if you use it with a Yubikey and even if your FIDO device is PIN protected. When you connect a FIDO device it is only used once to sign the browser's session keys. After that all interaction is initiated and signed by the browser alone. Hence II is only as secure as your browser, regardless of how secure your phrase, biometric sensor or Yubikey is. You cannot entrust significant value to this environment.

The only safe ways to hold significant value is with an air-gapped computer and the proper tools such as quill or with a Ledger Nano connected to the NNS dapp as a hardware wallet. In the latter case every single transaction gets confirmed on the hardware wallet's display and signed inside the hardware wallet. The browser is then untrusted. There is no II at play with the hardware wallet.

Using a hardware wallet is different from using a FIDO device to log into your II. The former is a true hardware solution, the latter is still essentially a software wallet. The two are not to be confused.

I think because of this misunderstanding the discussion is getting derailed. Whales don't ask if they can have one or two IIs. Whales don't use II for storing value.

I am not saying that II can't be improved or that the discussion here doesn't have value. I am just saying we are getting derailed if we're discussing using II for long-term/cold/high value staking or storage.

-------------------------

Roman | 2021-11-30 16:03:12 UTC | #64

I really appreciate your clarification @timo. Maybe this is the key of the problem. So, what can one do now if one already staked one's ICP using one's Internet Identity. I look forward for using Hardware Ledger, but things seem stuck for its Integration. Is it possible to use quill retroactively, and desynchronize my neurons and my Internet Identity ? 

Still, it would mean that a non developper doesn't have a way to stake securely his ICP. In this case, every non developer stakers would have to surrender to not stake or to risk everything, and this would mean that ICP is not for mass adoption or at least for investors adoption. It would be reserved only to investors who would be also developers. If this is, quite bad situation for ICP's future so...

-------------------------

timo | 2021-11-30 16:04:19 UTC | #65

For improving the II we could discuss:
1) creating two levels of authentication methods, higher level and lower level, and you need to be logged in with a higher level method in order to remove (i.e. delete) a lower level method. But
a) using the higher level must be optional,
b) the user must be able to choose which method to put on the higher level (for some it is the phrase, for others a Yubikey, etc.)
c) it must be possible to put more than one method to the higher level if the user wants that.
This is just like an admin vs user account in an OS. You can create multiple accounts of either type.

2) Introducing threshold. So that for example you need to call "delete" with two out of three authentication methods in order to be able to delete an authentication method.

-------------------------

timo | 2021-11-30 16:34:21 UTC | #66

[quote="Roman, post:64, topic:9144"]
Is it possible to use quill retroactively, and desynchronize my neurons and my Internet Identity
[/quote]

No, if you have staked with II then you can't change that. Maybe a future upgrade to the NNS will allow changing the controller of neurons. If that happened then you could change it. But I don't know when or if that will ever happen. The reason that the neuron controller cannot be changed is so that neurons can't be sold. That's something the community has to decide if it wants to continue to prevent the sale of neurons and how. If someone comes up with mechanisms that allow to change the controller of a neuron while at the same time preventing a sale then changing the controller can be allowed.

Anyway, to your question what to do now in the short term. If you already have staked a significant amount with II then I would suggest the following:

Take a dedicated laptop for managing your neurons. Here, "managing" means changing dissolve delays, dissolving, disbursing, spawning. Those actions should happen infrequently. "Managing" does not mean voting. For voting you can configure a hotkey and you can vote from your everyday phone/laptop. The dedicated laptop can be old. If it is so old that it does not have a biometric sensor then you can use a Yubikey with it or you can type in the recovery phrase every time you need to manage your neurons. What is important is that you don't use the dedicated laptop for anything else than opening a browser and going to nns.ic0.app. That way you can get almost as secure as with quill or a hardware wallet. The more you restrict the laptop the better. The security is gradual. You could for example, configure a dedicated Wifi network in your router and let that dedicated laptop be the only device connected to it, so that your dedicated laptop and your everyday devices don't share the same Wifi, etc. 

This unfortunately also means to create a second II for every day use. Don't log in with the II that control the neurons on any other devices than your dedicated laptop.

You can configure your second II for every day use as the hotkey of the neurons. That way you can vote and monitor from your everyday devices.

In the medium term, you should request the feature to allow hotkeys for the "merge maturity" action. I understand that is the main reason why people want to manage their neurons frequently. Some people are merging daily. The easiest answer to that would be to allow hotkeys to trigger the merging. Or, alternatively, an auto-merge feature that you only have to enable once would also work. I think auto-merge is already being worked on.

In the medium term you can also push for improvements to the II that you started with. But please understand that over the dedicated laptop it will be a relatively small security gain.

-------------------------

GLdev | 2021-11-30 16:56:43 UTC | #67

[quote="timo, post:63, topic:9144"]
I think there is a major misunderstanding here.
[/quote]

That's an understatement :slight_smile: 

There's nothing inherently wrong with the way II works right now. It uses some new tech (webauthn), it supports fido keys and it's pretty good with protecting a user's privacy (maybe a bit too good at that). There's no "lack of security" here.

What people seem to misunderstand is that no amount of code and hand-holding features will fix bad OPSEC. All the hypotheticals that people used in this thread can be addressed by sane OPSEC: Don't use the same account for both staking a gazillion ICP and for playing hold'em. Don't add random insecure devices to your II that maintains said gazillion ICPs. Use live distros. Use airgapped systems, etc.

-------------------------

Roman | 2021-12-02 14:10:23 UTC | #68

So, to avoid - still not totally - risk, people have not only to create another II, but also buy a dedicated computer, etc.  In summary, even casually hold or stake and interact with NNS becomes « Mission : Impossible ». Conclusion : it is clearly not thought for a mass adoption. I wish I knew this before investing...

If any newcomer wanting to enthusiastically invest in ICP had to read this as good as rigorous and wise methodology you gave, it would make him immediately reluctant to invest in ICP and flee away to invest in safer and simpler blockchain allowing staking. 

I think this only way to act safely for a non developper investor, rationally described by you, would disgust any enthusiast investors.

-------------------------

Roman | 2021-11-30 17:07:50 UTC | #69

Thanks a lot for this long and patient methodology description !

-------------------------

mparikh | 2021-11-30 17:37:15 UTC | #70

I think about this a little differently.

1. If I have 100x of value, I would use a safer mechanism to store. (Just like I wouldn't store ALL of my net worth in a physical wallet).

2. I am ok with carrying around 1x of 100x with the potential of knowing and accepting the risk that I may lose 1x against not able to spend any value at all.

On the existing investment front, I believe that there's a mechanism to transfer the management of a neuron to follow another neuron; even one created with nns dapp in iis. If the followee is created through airgapped computer, then I THINK that's a path to secure existing investment. @timo might this work?

-------------------------

GLdev | 2021-11-30 17:40:13 UTC | #71

[quote="Roman, post:68, topic:9144"]
So ICP has a problem.
[/quote]

The project has lots of problems, but the II is not one of them. 

The more I read your posts, the more I'm convinced you are a troll. You seem to ignore what's being explained to you by security professionals, you seem to constantly move the goalposts, you find the most convenient edge cases and the most absurd what-ifs. You are not looking for a discussion, you seem to have a pre-made point and you want to drive it home. 

The title, your responses, they all read "TROLL" ... As an old forum adage went, "please don't feed the trolls"...

-------------------------

Roman | 2021-12-03 06:57:44 UTC | #72

Are you serious ? :smiley: Mate, are you new here ? If you never saw my name since the genesis, there is an issue. I let the socials tell you if I am a troll. But if you say so... Have you twitter at least, do you read the forum or telegram channels ? Best joke of the year. Do you know ICPMaximalist at least ?

-------------------------

LightningLad91 | 2021-11-30 18:11:47 UTC | #73

I don’t think @Roman is being a troll at all. I think he is expressing dissatisfaction with II.

I completely understand your points on OPSEC and I don’t disagree. To be honest I should have done more due diligence with how II works before I staked so much at Genesis.

But, I do agree with @Roman that telling people now, 6 months later to not stake large amounts of ICP with an NNS account that relies on II authentication is an oversight (unless I missed something in the original documentation warning against this). Especially since there was no other choice.

Edit: To be fair I guess the CLI has always existed. But that is not something I would have expected an every day user to figure out.

-------------------------

Roman | 2021-11-30 18:09:47 UTC | #74

Again, you have a better formulation than me to express my opinion.

-------------------------

GLdev | 2021-11-30 18:20:31 UTC | #75

[quote="Roman, post:72, topic:9144"]
Mate, are you new here ? If you never saw my name since the genesis, there is an issue.
[/quote]

Friend, I say this with absolute candor and no ill intentions: I don't care who you are, what your twitter is, or how much social clout you have. In this thread, this topic alone, your posts, the words you choose and the replies you type make you *sound* like a troll. If your intentions are indeed good, you should take a breather and rethink your approach.

I stand by my words:

The title is *misleading* at best. There is no inherent lack of security in the II. 
The replies are constantly moving the goalposts.
Your edge cases are contrived.
Every "bad security" example you gave somehow implies that PHYSICAL security is compromised. There are few security solutions that would ever work in such a situation, and most of them hint towards what's already been offered: live distros, airgapped systems. 

I don't intend to further this line with you. I am but a dev that wants to see this project succeed, and I have no intention of fighting with you. Just wanted to let you know that your approach is counterproductive, misleading and at the end of the day it makes you sound like a troll. *shrug*

-------------------------

mparikh | 2021-11-30 18:24:45 UTC | #76

I don't believe that @Roman is a troll, either.  If I look at his concerns,  it's that how to safeguard his investments. 

What is large or not depends on context..

Put this in a different context: 10 ICP  may not mean much to some. But for others, that's a LOT of money( perhaps ONE months worth of work). If II is NOT workable for those with "little" investment,  how will we  EVER get masses to stake their coins on NNS?

I believe that this post has been a HUGE learning experience for me , personally.

-------------------------

Roman | 2021-11-30 18:25:10 UTC | #77

You are right my good friend, I am a troll, I am meaningless and nobody. I won't talk anymore on the forum. Like this, you won't have to suffer anymore of my trolling.

-------------------------

LightningLad91 | 2021-11-30 18:32:57 UTC | #78

I agree with @mparikh that this discussion has been nothing less than educational. Had @Roman not posted this (idc what the title is) then we would not have had this opportunity to learn more about the limitations of II.

-------------------------

LightningLad91 | 2021-11-30 18:36:52 UTC | #79

No you’re not.

You might benefit from working on how you express your thoughts. But I’d say his ability to provide constructive feedback could also use work.

Don’t let it get to you. I appreciate this post.

-------------------------

GLdev | 2021-11-30 18:52:18 UTC | #80

[quote="LightningLad91, post:79, topic:9144"]
But I’d say his ability to provide constructive feedback could also use work.
[/quote]

Point taken. +20 chars

-------------------------

timo | 2021-11-30 19:24:14 UTC | #81

[quote="Roman, post:68, topic:9144"]
So, to avoid - still not totally - risk, people have not only to create another II, but also buy a dedicated computer, etc.
[/quote]

No!!!! A newcomer uses a Ledger Nano like they do on all other blockchains.

The suggestions I gave with a dedicated laptop was a short term solution for someone who has _already_ staked a high amount with an II and wants to reduce the risk immediately. Newcomers don't fall in that category. Let's not mix those cases and conclude that ICP has a problem because there are no options for newcomers.

EDIT: Re. dedicated laptop. As suggested elsewhere in this thread, a live distro is just as good.

-------------------------

LightningLad91 | 2021-11-30 19:07:55 UTC | #82

To be fair, newcomers on-boarding today don't have that option unless they use the Ledger's developer mode. Unless the Ledger app was released recently?

-------------------------

LightningLad91 | 2021-11-30 19:17:29 UTC | #83

@wpb perhaps you and I should get together and work on a proposal for allowing neuron transfers. We've talked about this topic frequently in the past; but, given what I've learned in this thread I'd really like to have the ability to transfer control of my neuron to my Ledger Nano in the future.

Edit: tagging @lastmjs because I'd like his opinon as well. We can move this chat to a telegram group if you're both interested.

-------------------------

coteclaude | 2021-11-30 19:14:26 UTC | #84

I am following this thread with much interest.  We were promoted to stake our ICP in the NNS by several people at Dfinity and outside. @wpb @Kyle_Langham and @ayjayem are trying to change some rewards distribution in order to add to the long term staking in the NNS.  The lack of security describe here by @GLdev is certainly a big fact that was not taken into consideration. Gabriel goes as far as suggesting to not have big amount of ICP into the NNS unless you know how to air gap, etc.  Of course, the majority of us have no clue how to air gap and do not wish to go that far.

There is nothing we can do from the past, but we can certainly try to improve.  
Again, **this come to the fact that it is way to easy to add and remove devices from II.**  This had happen to @xiaobing lately.
So I am asking to @jwiegley @hpeebles @diegop  Is there a way to add a PIN or a Ledger Nano confirmation for adding or removing a device in the II?
Is there a way to have the Last Date Login in the main screen so we are assure no one else have gone in our NNS?
This first step at increasing security would certainly help investors to feel much more secure.

As second step, would it be possible to receive a phone notification or email every time there is a login in our NNS?

For me, this would be top priority.  May be you guys have some much better idea.

Right now,  with what I have learned in this thread, I would not recommend anyone to send their ICP in the NNS, as Gabriel recommend.  Personally, I will manage the best I can to keep it as much secure as I possibly can now with the suggestion from this thread.

Thank you all for your posts here.

-------------------------

timo | 2021-11-30 19:19:32 UTC | #85

[quote="mparikh, post:70, topic:9144"]
On the existing investment front, I believe that there’s a mechanism to transfer the management of a neuron to follow another neuron; even one created with nns dapp in iis. If the followee is created through airgapped computer, then I THINK that’s a path to secure existing investment. @timo might this work?
[/quote]

I don't think this is possible. But can look into it again.

-------------------------

mparikh | 2021-11-30 19:24:12 UTC | #86


[quote="timo, post:63, topic:9144"]
The only safe ways to hold significant value is with an air-gapped computer and the proper tools such as quill or with a Ledger Nano connected to the NNS dapp as a hardware wallet. In the latter case every single transaction gets confirmed on the hardware wallet’s display and signed inside the hardware wallet. The browser is then untrusted. There is no II at play with the hardware wallet.
[/quote]

1. So CURRENTLY the ONLY SAFE WAY to hold significant value is an air-gapped computer with proper tools such as quill and keysmith. 

2. Internet Identity SHOULD NOT BE TRUSTED for any store of significant value.

are the two main points coming out of this hugely important post.

-------------------------

timo | 2021-11-30 19:29:52 UTC | #87

[quote="mparikh, post:86, topic:9144"]
So CURRENTLY the ONLY SAFE WAY
[/quote]

Well, and the Ledger Nano. Currently you are right, only in the Ledger's "dev store" and waiting to be moved by Ledger to Ledger's normal app store.

-------------------------

LightningLad91 | 2021-11-30 19:31:39 UTC | #88

That's my general take-away as well. At least until the Ledger app is officially released.

I'd also point out this kind of leaves existing users high and dry unless we can pass a proposal to allow a transfer of neuron control.

-------------------------

timo | 2021-11-30 20:02:06 UTC | #89

[quote="coteclaude, post:84, topic:9144"]
There is nothing we can do from the past, but we can certainly try to improve.
Again, **this come to the fact that it is way to easy to add and remove devices from II.** This had happen to @xiaobing lately.
[/quote]

Improvements to the II are more than welcome. But I expect a somewhat lengthy discussion is required about how exactly. Everybody has a clear idea how it should work based on his/her own opsec. But we have to find improvements that are generic enough to help everyone. I also wouldn't like to see features in the II that push people into a certain direction with their opsec. For example, saying your one and only phrase has to be the unchangeable root authority would do exactly that.

Let me propose a solution that requires minimal changes and let me know if that satisfies your needs. I am assuming that you already have staked in the NNS with II.
- accept that two IIs are needed and one of them (the staking II) is only ever used in a secure environment
- your secure environment can be a live distro
- get a FIDO device with PIN protection (the Ledger Nano can be used as such a device with the FIDO app on it)
- configure the staking II with two authentication methods: the FIDO device and a recovery phrase
- configure a hotkey in the neurons pointing to your other II (the everyday II)

Now assume that maturity would either be merged automatically or could be merged with through the hotkey with the everyday II. Then:
- monitor, vote, merge maturity with you everyday II

Would that satisfy most people's immediate needs?

It would require quite a dedicated attacker to overcome. Most likely physical access.

I think merging the maturity in this way is obtainable faster than changes to the II.

-------------------------

LightningLad91 | 2021-11-30 20:08:21 UTC | #90

Doesn't this assume that people have only used their existing II for the NNS Dapp? What about people who have profiles with other apps associated with that identity anchor?

This is the problem I'm having. Sure a dedicated laptop/live distro will work. But how many of the existing users want to go through that hassle and also lose their online presence?

Edit: I think all we are looking for is a way to recover our II even if one of our authentication devices are compromised. Forget staking. Let's say I just want to be able to recover so I don't lose access to my accounts. Would it not be acceptable to just pick one device as a recovery device so I can do something like stick it in a safety deposit box?

-------------------------

coteclaude | 2021-11-30 20:18:31 UTC | #91

I use Ledger Nano since last June.
There is no automatic merging, so I need to go in my account everyday to merge.
I am starting the dedicated computer as of today
Will wait the automatic merging and then, will proceed exactly as you recommend.
Thanks for all the clarity and explanations.
And happy to ear security improvement, especially for adding and removing devices, are in the plan.

-------------------------

coteclaude | 2021-11-30 20:22:58 UTC | #92

I love this idea for a recovery device (not necessarily seed phrase), that cannot be removed.
Make it optional.
The initial NNS creator would always be able to recover.
Nano Ledger would be great for recovery device.

-------------------------

timo | 2021-11-30 20:32:23 UTC | #93

[quote="LightningLad91, post:90, topic:9144"]
Doesn’t this assume that people have only used their existing II for the NNS Dapp? What about people who have profiles with other apps associated with that identity anchor?
[/quote]

Yes, that is true. You would lose your profile in those other dapps. That's unfortunately unavoidable. Unless, of course, the dapp in question offers a way to change the principal associated with your username. That functionality does not seem far fetched and might become common. We are asking the same thing of the NNS dapp when we ask that the neuron controller can be changed (the neuron id is the username here).

-------------------------

timo | 2021-11-30 20:40:56 UTC | #94


[quote="LightningLad91, post:90, topic:9144"]
I think all we are looking for is a way to recover our II even if one of our authentication devices are compromised. Forget staking.
[/quote]

[quote="coteclaude, post:92, topic:9144"]
I love this idea for a recovery device (not necessarily seed phrase), that cannot be removed.
[/quote]

Understood. Agree that it is a nice feature.

-------------------------

LightningLad91 | 2021-11-30 21:00:42 UTC | #95

I really appreciate your candidness. It is unfortunate though.

I still have concerns about using II even for non-NNS applications. Given what we've learned today why would I use II to login to InfinitySwap, Sonic, OpenChat,  or any other app that could store value? Do i need to have a dedicated laptop for each of those applications?

I really don't mean to beat a dead horse; and I apologize if I come off like I'm just complaining for the sake of it. I just had a really high opinion of II until today. If your recommendation is that I set up a different anchor for each application that I value (whether it be financial or personal) it just seems like it defeats the point of what II was supposed to fix? Perhaps that is on me and my misunderstanding.

I appreciate you taking all of this time to explain. It's been very enlightening and has given me a lot to consider.

-------------------------

timo | 2021-11-30 21:14:43 UTC | #96

Let's make some analogies before you ditch II entirely :grinning:. How much money would you store in or access through MetaMask, MEW, etc. (without connecting a hardware wallet to them)? About the same you can store in II. Both depend on browser security. If the browser/OS is compromised then you can lose funds.

The point I made is that II is a software wallet. Software wallets have the advantage that they can store key material and you don't have to confirm every single interaction on an external device and display. But if the browser/OS is compromised then the key material is at risk. Hardware wallets protect against that at the cost of having to approve every single interaction on an external device and display. Fundamentally there are only these two options, software wallet or hardware wallet and it is up to the user's judgement to make the trade off.

Here, to illustrate, "browser compromised" means for example that your browser can swap out an URL under the hood and display a green padlock when there shouldn't be one.

Now, in some further detail, II actually tries to improve over wallets like MetaMask. Where those wallets store key material permanently on disk (at least encrypted), II doesn't. II only creates session keys that are valid for 30 min. The permanent keys are inside the biometric sensor or Yubikey. That is an improvement because it shortens the attack window for certain attacks.

-------------------------

coteclaude | 2021-11-30 21:09:28 UTC | #97

Well, I have my cold wallet Ledger Nano installed in Metamask and if Metamask is compromised, they cannot remove any of my asset without my Ledger device.  Since the seed phrase for metamask is fixed, I would always have access or can simply delete it and install my cold wallet in another wallet.
Also, my Ledger Nano seed phrase have never come up on my screen.
Technically I understand your point but quiet different to me.
And NOOOO, I will not ditch my NNS :grin:

-------------------------

LightningLad91 | 2021-11-30 21:11:50 UTC | #98

Completely agree. I love II for all those reasons. 

But the thought of being put into a non-recoverable state because I made a human error (I think we can all empathize) with one my devices is just very scary. Especially when that II could gate access to my family photos, personal records, financial records, or any other valuable data.

-------------------------

wpb | 2021-12-01 11:46:26 UTC | #99

Wow, there is so much information in this thread.  I previously thought I understood, but now I suspect I have a knowledge gap regarding security of my accounts.  I will need to reread this thread again several times and consider changing my strategy.  I would very much prefer for it to be relatively simple to address these issues.

I have felt pretty secure with my single Internet Identity, multiple devices (iPhone, iPad, windows hello, 2x yubikey), and backup seed phrase.  I do know that anyone with access to any one of my devices can add their device, delete my devices, and delete my recovery method.  Knowing this, I also had the attitude of “not your keys, not your crypto” in regards to maintaining access to these devices.  In other words, I absolutely must keep the devices protected, locked, and only accessible by me (except leaving explicit instructions for my family in case something happens to me).  

While I still think the “not your keys, not your crypto” mantra applies to a large extent, this is probably an oversimplification.  I have much to learn.  There are so many concepts in this thread that are not familiar to me at this time.  

Again, I would prefer a much simpler method of making sure others cannot take over my internet identity and accounts.  I support identification and implementation of better recovery methods.

@Roman please note that I edited this post so hopefully it better explains what I was trying to say.

-------------------------

cryptoschindler | 2021-12-01 11:10:25 UTC | #100

You can use Yubikeys with smartphones

-------------------------

coteclaude | 2021-12-01 13:19:43 UTC | #101

With all the respect, can you explain me why you have a "Not your keys, not your cryptos" attitude?  What is the logic behind this? What about if your forget your home key at the restaurant.  Someone find it, kick your family out of your home and move in.  He then tell you:  "Not your keys, not your home".  Does crypto a real asset like your home?  Why would it be different?  This thinking have always been so strange to me.  May be this is why the crypto world is laid back on security.  I will work hard to make this attitude to change.  Crypto is too important. Mass adoption will never happen until security and proof of ownership is taken seriously by the crypto community.  This is something decentralization and crypto is way behind the traditional system.
Security and lack of proof of ownership is the biggest problem to have more "normal" people to get in and stake, not the reward distribution TMO.  How many friends and family member do you recommend to buy ICP and stake in the NNS?  How would you feel if you recommend someone and that person loose his key, loose the control of his NNS, thus loose his crypto?  Would you tell that friend or family member "Not your key, not your crypto"?
With some added security and proof of ownership, I would recommend.  But now, I would never recommend to anyone.

-------------------------

wpb | 2021-12-01 13:28:26 UTC | #102

I fully agree with you.  The only reason I have adopted that attitude is because I know that someone can delete my devices and recovery if they gain access to any one device.  It’s the only defense I knew about previously (before learning about some more complicated mechanisms in this thread).  It’s not a great solution and I agree that easier mechanisms for recovery are needed to achieve mass adoption.

-------------------------

coteclaude | 2021-12-01 13:40:36 UTC | #103

The vast majority of my crypto investment is through ETF (BTC & ETH).  I have to pay a small annual fee and loose all the Defi and Staking income.  But this is the price I have to pay for security.  The first crypto that will guarantee ownership (may be with NFTs), who will make sure that people cannot loose their account or can recover will succeed big times.   Promoting full security in crypto would be the biggest thing TMO.  I know Dfinity have a lot on their plate but I hope Dfinity will get it and will be the first one to get there as soon as possible.  They have the skill, the money and the creativity to be the first one. 
If security and recovery of accounts was a priority for IC, I would have less ETH and much more ICP because I believe much more in the future of ICP then ETH.

-------------------------

LightningLad91 | 2021-12-01 15:02:51 UTC | #104

[quote="wpb, post:99, topic:9144"]
While I still think the “not your keys, not your crypto” mantra applies to a large extent, this is probably an oversimplification. I have much to learn. There are so many concepts in this thread that are not familiar to me at this time.
[/quote]

The problem I'm facing is that II isn't just about Tokens. I can accept the added precaution of using a separate identity anchor/device for protecting my crypto.

But II is used to gain access to other applications like social media accounts, file storage, etc. These are the types of accounts that do have to be accessed on a daily basis. Meaning the devices I use to access these accounts can't just be put in cold storage all the time. These are also the types of accounts I would like to recover in the event that one of my devices are compromised.

Edit: I don't think it's appropriate to ask each application to provide an account recovery method.  I only say that because how would it work in a decentralized world? Let's take Distrikt for example; when Distrikt becomes an open internet service who is going to have the authority to move my account to a new Principal ID? Is a user expected to submit a proposal and petition the entire community to approve their request? That seems like it would be very unpopular. Especially since a loss of my II would require me to make that same proposal across each service I've registered with.

-------------------------

mparikh | 2021-12-02 03:15:55 UTC | #105

[quote="mparikh, post:86, topic:9144"]
Internet Identity SHOULD NOT BE TRUSTED for any store of significant value.
[/quote]

Given that no one is seriously contesting the above statement (most are in agreement), my situation is that ALL of my neurons have been created using NNS DAPP and thereby by extension with Internet Identity. Further the consensus is that air-gapped system is best for this management. 

I am therefore hyper-focused on how to move the day-to-day management of my neurons (currently mostly merging maturity at 100% and perhaps in the future to spawning) to an air-gapped system (quill et al) from using the NNS DAPP.  I am happy to report that some progress has been made on a system that "authorizes" an airgapped neuron to manage the nns-dapp neuron. I am now focused on the UX because I will be using this system for the foreseeable future without,hopefully, EVER logging into NNS DAPP for the management of staked neurons. I am grateful for the work and guidance on  the idea provided by @skilesare .   Will post on  a seperate topic on approach and progress.

I also understand that using live distros. as suggested by others in this topic, may work well for most people. However that solution, to me, seemed incomplete because in it we still use the Internet Identity  to manage significant store of value.

I also realize that there are many more issues with Internet Identity that need to be sorted out that have been pointed out in this topic. However, for me, It was important for me to decide what was the most urgent and immediately actionable.

-------------------------

ajismyid | 2021-12-02 03:26:59 UTC | #106

You can consider using security key that has PIN built-in to increase security. Yubikey not so secure in my opinion, because if somebody can access the physical key, they can use it directly. This is not the case for security key with PIN built-in in the hardware, you have to enter PIN first, before you can use the key to authorize / sign.

Security key with Built-In PIN I use daily: Ledger Nano S & OnlyKey ([crp.to](https://crp.to/))
Recovery key : Seed Phrase & Yubikey (for compatibility) just stay inside my secret security box for backup, that only me can access it.

-------------------------

